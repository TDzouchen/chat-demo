{"version":3,"file":"Carousel-legacy-BfF6yH4y.js","sources":["packages/shared/src/utils/scrollBy.ts","packages/chat-widget-components/src/components/Carousel/types.ts","packages/chat-widget-components/src/components/Carousel/CarouselArrow.tsx","packages/chat-widget-components/src/components/Carousel/CarouselItem.tsx","packages/chat-widget-components/src/components/Carousel/Carousel.tsx"],"sourcesContent":["const easeInOut = (t: number) => (t < 0.5 ? 2 * t * t : -1 + (4 - 2 * t) * t)\n\nexport const smoothScrollBy = (element: HTMLDivElement, targetLeft: number, duration = 400) => {\n  const start = element.scrollLeft\n  const startTime = performance.now()\n\n  const step = (timestamp: number) => {\n    const elapsed = timestamp - startTime\n    const progress = Math.min(elapsed / duration, 1)\n\n    const easedProgress = easeInOut(progress)\n\n    element.scrollLeft = Math.round(start + targetLeft * easedProgress)\n\n    if (progress < 1) {\n      requestAnimationFrame(step)\n    }\n  }\n\n  requestAnimationFrame(step)\n}\n","import { type CarouselCard, type MessageButton } from '@td-org/chat-widget-shared'\n\nexport type CarouselProps = {\n  enableRTL?: boolean\n  items: Array<CarouselCard>\n  onButtonClick: (info: MessageButton) => void\n  onError?: (e: Error) => void\n}\n\nexport type CarouselItemProps = {\n  onButtonClick: (info: MessageButton) => void\n  onError?: (e: Error) => void\n} & CarouselCard\n\nexport enum Direction {\n  Left = 'left',\n  Right = 'right'\n}\n","import clsx from 'clsx'\n\nimport { Direction } from './types.ts'\n\nimport classes from './Carousel.module.scss'\n\ntype PropTypes = {\n  onClick: () => void\n  direction: Direction\n  hidden?: boolean\n}\n\nconst RightArrow = (): JSX.Element => {\n  return (\n    <svg xmlns='http://www.w3.org/2000/svg' width='20' height='20' viewBox='0 0 20 20' fill='none'>\n      <path\n        d='M7.15837 13.825L8.33337 15L13.3334 10L8.33337 5L7.15837 6.175L10.975 10L7.15837 13.825Z'\n        fill='#1F1F1F'\n      />\n      <mask\n        id='mask0_3639_28005'\n        style={{ maskType: 'luminance' }}\n        maskUnits='userSpaceOnUse'\n        x='7'\n        y='5'\n        width='7'\n        height='10'\n      >\n        <path\n          d='M7.15837 13.825L8.33337 15L13.3334 10L8.33337 5L7.15837 6.175L10.975 10L7.15837 13.825Z'\n          fill='white'\n        />\n      </mask>\n      <g mask='url(#mask0_3639_28005)'></g>\n    </svg>\n  )\n}\n\nconst LeftArrow = (): JSX.Element => {\n  return (\n    <svg xmlns='http://www.w3.org/2000/svg' width='20' height='20' viewBox='0 0 20 20' fill='none'>\n      <path\n        d='M12.8417 6.175L11.6667 5L6.66669 10L11.6667 15L12.8417 13.825L9.02502 10L12.8417 6.175Z'\n        fill='#1F1F1F'\n      />\n      <mask\n        id='mask0_3639_27965'\n        style={{ maskType: 'luminance' }}\n        maskUnits='userSpaceOnUse'\n        x='6'\n        y='5'\n        width='7'\n        height='10'\n      >\n        <path\n          d='M12.8417 6.175L11.6667 5L6.66669 10L11.6667 15L12.8417 13.825L9.02502 10L12.8417 6.175Z'\n          fill='white'\n        />\n      </mask>\n      <g mask='url(#mask0_3639_27965)'></g>\n    </svg>\n  )\n}\n\nconst CarouselArrow = ({ onClick, direction, hidden }: PropTypes): JSX.Element => {\n  return (\n    <button\n      className={clsx([classes.arrow, classes[direction], { [classes.hidden]: hidden }])}\n      onClick={onClick}\n      aria-hidden={hidden}\n      aria-label={`scroll-${direction}`}\n    >\n      {direction === Direction.Left ? <LeftArrow /> : <RightArrow />}\n    </button>\n  )\n}\n\nexport default CarouselArrow\n","import { type SyntheticEvent, useState } from 'react'\n\nimport Buttons from '../Buttons/index.ts'\n\nimport { CarouselItemProps } from './types.ts'\n\nimport classes from './Carousel.module.scss'\n\nconst CarouselItem = (props: CarouselItemProps): JSX.Element => {\n  const { imageUrl, title, description, buttons, onButtonClick: onClick, onError } = props\n  const [error, setError] = useState(false)\n\n  const onImgError = async (e: SyntheticEvent<HTMLImageElement>) => {\n    if (onError) {\n      onError(new Error(`failed to load image. Url: ${e.currentTarget.currentSrc}`))\n    }\n    setError(true)\n  }\n\n  return (\n    <div className={classes.carousel}>\n      {imageUrl &&\n        (error ? (\n          <div className={classes.image} />\n        ) : (\n          <img className={classes.image} src={imageUrl} alt='carousel img' aria-hidden onError={onImgError} />\n        ))}\n      <div className={classes.content}>\n        <div className={classes.text}>\n          <p className={classes.title} title={title}>\n            {title}\n          </p>\n          {description && (\n            <p className={classes.description} title={description}>\n              {description}\n            </p>\n          )}\n        </div>\n        {buttons.length > 0 && <Buttons buttons={buttons} onClick={onClick} />}\n      </div>\n    </div>\n  )\n}\n\nexport default CarouselItem\n","import { useEffect, useRef, useState } from 'react'\nimport clsx from 'clsx'\n\nimport { smoothScrollBy } from '@td-org/chat-widget-shared'\n\nimport CarouselArrow from './CarouselArrow.tsx'\nimport CarouselItem from './CarouselItem.tsx'\nimport { CarouselProps, Direction } from './types.ts'\n\nimport classes from './Carousel.module.scss'\n\nconst carouselGap = 24\nconst Carousel = (props: CarouselProps): JSX.Element => {\n  const { enableRTL, items, onButtonClick, onError } = props\n  const hasItems = items.length > 1\n\n  const carouselRef = useRef<HTMLDivElement>(null)\n\n  const [hasLeftArrow, setLeftArrow] = useState(false)\n  const [hasRightArrow, setRightArrow] = useState(hasItems)\n\n  useEffect(() => {\n    const ref = carouselRef.current\n\n    setLeftArrow(enableRTL ? hasItems : false)\n    setRightArrow(!enableRTL ? hasItems : false)\n\n    const setArrowsVisibility = (event: Event) => {\n      const target = event.currentTarget as HTMLElement\n      if (!target) return\n      const { offsetWidth, scrollWidth, scrollLeft } = target\n\n      if (enableRTL) {\n        setLeftArrow(scrollLeft > offsetWidth - scrollWidth)\n        setRightArrow(scrollLeft !== 0)\n      } else {\n        setLeftArrow(scrollLeft !== 0)\n        setRightArrow(scrollLeft < scrollWidth - offsetWidth)\n      }\n    }\n\n    if (ref && ref.addEventListener) {\n      ref.addEventListener('scroll', setArrowsVisibility, false)\n    }\n\n    return () => {\n      if (ref && ref.removeEventListener) {\n        ref.removeEventListener('scroll', setArrowsVisibility, false)\n      }\n    }\n  }, [enableRTL, hasItems])\n\n  const scrollCarouselBy = (direction: Direction) => {\n    if (carouselRef.current) {\n      const distance = carouselRef.current.offsetWidth + carouselGap\n      const left = direction === Direction.Left ? -distance : distance\n\n      smoothScrollBy(carouselRef.current, left)\n    }\n  }\n\n  return (\n    <div\n      ref={carouselRef}\n      className={clsx({\n        [classes.container]: true,\n        [classes.rtl]: enableRTL\n      })}\n    >\n      {items.map((item, index) => (\n        <CarouselItem key={index} {...item} onButtonClick={onButtonClick} onError={onError} />\n      ))}\n      <CarouselArrow\n        hidden={!hasLeftArrow}\n        direction={Direction.Left}\n        onClick={() => scrollCarouselBy(Direction.Left)}\n      />\n      <CarouselArrow\n        hidden={!hasRightArrow}\n        direction={Direction.Right}\n        onClick={() => scrollCarouselBy(Direction.Right)}\n      />\n    </div>\n  )\n}\nexport default Carousel\n"],"names":["Direction","RightArrow","jsxs","xmlns","width","height","viewBox","fill","children","jsx","d","id","style","maskType","maskUnits","x","y","mask","LeftArrow","CarouselArrow","onClick","_ref","direction","hidden","className","clsx","classes","arrow","_defineProperty","concat","Left","CarouselItem","props","imageUrl","title","description","buttons","onButtonClick","onError","_reactExports$useStat2","_slicedToArray","useState","error","setError","onImgError","_ref3","_regeneratorRuntime","mark","_callee","e","wrap","_callee$","_context","prev","next","Error","currentTarget","currentSrc","stop","_x","apply","arguments","carousel","image","src","alt","content","text","length","Buttons","exports","enableRTL","items","hasItems","carouselRef","useRef","_reactExports$useStat4","hasLeftArrow","setLeftArrow","_reactExports$useStat6","hasRightArrow","setRightArrow","useEffect","ref","current","setArrowsVisibility","event","target","offsetWidth","scrollWidth","scrollLeft","addEventListener","removeEventListener","scrollCarouselBy","distance","left","element","targetLeft","duration","start","startTime","performance","now","step","timestamp","t","elapsed","progress","Math","min","easedProgress","round","requestAnimationFrame","smoothScrollBy","container","rtl","map","item","index","_objectSpread","Right"],"mappings":"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"}