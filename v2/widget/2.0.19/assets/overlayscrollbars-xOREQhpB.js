const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./DefaultAgentAvatarIcon-DavJHBcm.js","./main-vendor-DXirhFg8.js","./DefaultAvatarIcon.module-C6JQAtkI.js","./DefaultAvatarIcon-Cv_biWpz.css","./DefaultAvatarIcon-BIQLaLoM.js","./Buttons-DKZzT3nn.js","./reporter-vendor-CC1waedv.js","./Carousel-CnRUNKL3.js","./Carousel-DBaOUnxy.css","./TextMessage-c1bQfRS1.js","./TextMessage-Dy7sXIvH.css","./HtmlMessage-DpdQSChM.js","./HtmlMessage-BtRC1RYO.css","./MediaMessage-DDwtx2nI.js","./MediaMessage-CzIt3hyg.css","./QuickReplyMessage-DBgNhUo0.js","./QuickReplyMessage-CZmO-Gw-.css","./browser-BWWtcJkb.js","./Arrow-6NOPDRoB.js","./Attachment-BomkX3uz.js","./Close-BQSthrZa.js","./Clear-BtASIaZA.js","./Confirm-BiaOBJcr.js","./Emoji-THg1m4wf.js","./Minimize-D_7FTTz6.js","./MoreVert-Bt8riu2F.js","./Retry-kADmrIr4.js","./Send-B3z8J9Wo.js","./Warning-DD_rkQ7v.js","./Logo-Cq9VJqYi.js","./Download-B-fOxnU7.js","./Terminate-L_We6bCI.js","./Refresh-BDeG8WLo.js","./emoji-picker-react.esm-C23qRbqr.js"])))=>i.map(i=>d[i]);
var gf=Object.defineProperty;var yf=(t,e,n)=>e in t?gf(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var de=(t,e,n)=>yf(t,typeof e!="symbol"?e+"":e,n);import{i as cr,d as _f,c as Ye,g as eo,E as vf,a as vr,e as _n,s as Rc,p as Lc,r as E,j as f,f as bf,R as Re,u as et,h as Pc,k as Nc,l as jc,m as wf,L as Cf,n as xf,C as Ro}from"./main-vendor-DXirhFg8.js";import{O as Sf,a as Tf,R as xi,S as Si,L as Ef,b as kf,l as Af,W as If,c as Rf,Z as Lf,t as Ti,d as hs,e as Pf}from"./reporter-vendor-CC1waedv.js";/*!
* Talkdesk Confidential
*
* Copyright (C) Talkdesk Inc. 2024
*
* The source code for this program is not published or otherwise divested
* of its trade secrets, irrespective of what has been deposited with the
* U.S. Copyright Office. Unauthorized copying of this file, via any medium
* is strictly prohibited.
*/(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(s){if(s.ep)return;s.ep=!0;const o=n(s);fetch(s.href,o)}})();const Nf="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict";let $c=(t=21)=>{let e="",n=crypto.getRandomValues(new Uint8Array(t));for(;t--;)e+=Nf[n[t]&63];return e};const jf=72e6,Rs={getAccessToken:"GET_ACCESS_TOKEN",getConversationAndParticipant:"CREATE_CONVERSATION_AND_PARTICIPANT"},Ei={twilio:"twilio"},qt={send_success:"send_success",send_failure:"send_failure",disconnect:"disconnect",reconnect:"reconnect",need_scroll_to_bottom:"need_scroll_to_bottom"},Se={Start:"start",Loading:"loading",Conversation:"conversation",InitialScreen:"initial_screen",End:"end",Error:"error"},Ct={preloadClient:"preloadClient",conversationCreated:"conversationCreated",conversationEnded:"conversationEnded",conversationEndedByError:"conversationEndedByError",resetFrame:"resetFrame",enableScreenLoading:"enableScreenLoading"},Nr={ltr:"ltr",rtl:"rtl"},Bc=["ar-EG","ar-SA"],jr={BUTTONS:10,CAROUSEL_CARDS:10,CAROUSEL_BUTTONS:3,FILE_SIZE:10*1024*1024},ES=2,Oc=680,kS=64,$f=48,Bf=/^(?!.{256})(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/i,Of=/^(\+\d{1,3}\s?)\(?\d{1,3}\)?[\s-]?\d{3,4}[\s-]?\d{3,5}/i,AS=5,Lo={US1:"us1",IE1:"ie1"},In={tdGatewayUs:"/tdgateway/us",tdGatewayEu:"/tdgateway/eu",tdGatewayCa:"/tdgateway/ca",tdGatewayUsFed:"/tdgateway/usfed",tdChatSdk:"/tdchatsdk",tdReporter:"/tdreporter",twilioUs1:"/tdsocketprovider/us1/v3/wsconnect",twilioIe1:"/tdsocketprovider/ie1/v3/wsconnect",twilioMcsUs1:"/tdmcsprovider/us1",twilioMcsIe1:"/tdmcsprovider/ie1",twilioMediaUs1:"/tdmediaprovider/us1",twilioMediaIe1:"/tdmediaprovider/ie1"},Mc=["botIcon","botIconVerticalAlign","chatIcon","chatTitleIcon","chatTitle","chatSubtitle","customFieldPhoneDescription","customFieldPhoneInvalidFormatMessage","customFieldEmailInvalidFormatMessage","customFieldInputPlaceholder","customDropdownInputPlaceholder","chatConfirmButtonEndChat","chatCancelButtonEndChat","chatDialogBoxEndChat","chatPlaceholder","chatAriaLabel","startChatButtonLabel","endedChatMessage","linkProtocol","linkTarget","chatDialogBoxRetryEndChat","chatConfirmButtonRetryEndChat","chatCancelButtonRetryEndChat"],Ar={chatThemeColor:"#1f1f1f",chatHoverThemeColor:"#1f1f1f",chatContainerWidth:"360px",chatContainerHeight:"".concat(Oc,"px"),chatPositionBottom:"20px",chatPlaceholder:"Type a message...",chatAriaLabel:"Type a message",endedChatMessage:"This chat has ended",linkProtocol:"https",linkTarget:"_blank",chatLauncherColor:"#1f1f1f",chatHoverLauncherColor:"#1f1f1f",chatLauncherShadow:"0 4px 8px 0 rgba(0, 0, 0, 8%), 0 16px 16px 0 rgba(0, 0, 0, 4%), 0 32px 20px 0 rgba(0, 0, 0, 2%)",triggerButtonHeight:"64px",triggerButtonWidth:"64px",triggerButtonPositionBottom:"20px",triggerButtonPositionRight:"10px",chatTitle:"Talkdesk",chatTitleTextColor:"#1f1f1f",chatTitleIconColor:"#ffffff",chatTitleIcon:"https://prd-cdn-talkdesk.talkdesk.com/cdn-assets/latest/talkdesk/product/app-icons/chat-launcher.svg",chatTitleIconWidth:"32px",chatTitleIconHeight:"32px",chatIcon:"https://prd-cdn-talkdesk.talkdesk.com/cdn-assets/latest/talkdesk/product/app-icons/chat-launcher.svg",chatSubtitle:"Powered by Talkdesk",chatSubtitleTextColor:"#1f1f1f",chatCloseIconHeight:"20px",chatCloseIconWidth:"20px",chatCloseButtonColor:"#1f1f1f",chatHeaderBackgroundColor:"#f8f8f8",avatarBackgroundColor:"#1f1f1f",avatarForegroundColor:"#ffffff",avatarBorderColor:"#1f1f1f",botIcon:"",botIconHeight:"24px",botIconWidth:"24px",botIconVerticalAlign:"top",botTextColor:"#1f1f1f",botBackgroundColor:"#ffffff",botAnchorTextColor:"#1f1f1f",botAnchorTextColorVisited:"#1f1f1f",userTextColor:"#ffffff",userBackgroundColor:"#1f1f1f",userAnchorTextColor:"#ffffff",userAnchorTextColorVisited:"#ffffff",carouselTextColor:"#1f1f1f",buttonTextColor:"#1f1f1f",buttonHoverTextColor:"#1f1f1f",buttonBackgroundColor:"#f2f2f2",buttonHoverBackgroundColor:"#e9e9e9",replyTextColor:"#1f1f1f",replyBorderColor:"#1f1f1f",replyBackgroundColor:"#ffffff",replyHoverTextColor:"#1f1f1f",replyHoverBackgroundColor:"#e9e9e9",startChatButtonLabel:"Start new chat",startChatButtonTextColor:"#ffffff",startChatButtonBorderColor:"#1f1f1f",startChatButtonBackgroundColor:"#1f1f1f",startChatButtonHoverTextColor:"#ffffff",startChatButtonHoverBorderColor:"#2c2c2c",startChatButtonHoverBackgroundColor:"#2c2c2c",startChatTransparentButtonTextColor:"#1f1f1f",startChatTransparentButtonHoverBackgroundColor:"#f2f2f2",userInputSeparatorColor:"#e9e9e9",userInputHeight:"48px",initialFormBackgroundColor:"#f8f8f8",welcomeMessageBackgroundColor:"#f8f8f8",welcomeMessageTitleFontSize:"24px",welcomeMessageTitleFontFamily:"Inter,-apple-system,system-ui,avenir,helvetica,arial,sans-serif",welcomeMessageTitleColor:"#1f1f1f",welcomeMessageContentFontSize:"14px",welcomeMessageContentFontFamily:"Inter,-apple-system,system-ui,avenir,helvetica,arial,sans-serif",welcomeMessageContentColor:"#1f1f1f",customMessageFontSize:"14px",customMessageColor:"#1f1f1f",customMessageFontFamily:"Inter,-apple-system,system-ui,avenir,helvetica,arial,sans-serif",customMessageBackgroundColor:"#ffffff",customMessageNoBubbleFontSize:"14px",customMessageNoBubbleColor:"#1f1f1f",customMessageNoBubbleFontFamily:"Inter,-apple-system,system-ui,avenir,helvetica,arial,sans-serif",customFieldLabelFontSize:"14px",customFieldLabelFontFamily:"Inter,-apple-system,system-ui,avenir,helvetica,arial,sans-serif",customFieldLabelColor:"#595959",customFieldInputFontSize:"14px",customFieldInputFontFamily:"Inter,-apple-system,system-ui,avenir,helvetica,arial,sans-serif",customFieldInputColor:"#595959",customFieldInputBackgroundColor:"#ffffff",customFieldInputPlaceholder:"Type",customFieldPhoneDescription:"Include the country code, avoid spaces and/or symbols (e.g. +1123456789).",customFieldPhoneInvalidFormatMessage:"Please type a valid phone number",customFieldEmailInvalidFormatMessage:"Please type a valid email",customDropdownLabelFontSize:"14px",customDropdownLabelFontFamily:"Inter,-apple-system,system-ui,avenir,helvetica,arial,sans-serif",customDropdownLabelColor:"#595959",customDropdownInputFontSize:"14px",customDropdownInputFontFamily:"Inter,-apple-system,system-ui,avenir,helvetica,arial,sans-serif",customDropdownInputColor:"#595959",customDropdownInputBackgroundColor:"#ffffff",customDropdownInputPlaceholder:"Select",customButtonHeight:"32px",customButtonFontSize:"14px",customButtonFontFamily:"Inter,-apple-system,system-ui,avenir,helvetica,arial,sans-serif",customButtonColor:"#ffffff",customButtonBorderColor:"#1f1f1f",customButtonBackgroundColor:"#1f1f1f",customButtonHoverColor:"#ffffff",customButtonHoverBorderColor:"#2c2c2c",customButtonHoverBackgroundColor:"#2c2c2c",chatConfirmButtonFontSize:"14px",chatConfirmButtonFontColor:"#ffffff",chatConfirmButtonFontFamily:"Inter,-apple-system,system-ui,avenir,helvetica,arial,sans-serif",chatConfirmButtonBackgroundColor:"#1f1f1f",chatConfirmButtonHoverBackgroundColor:"#2c2c2c",chatConfirmButtonEndChat:"End chat",chatConfirmButtonRetryEndChat:"Try again",chatCancelButtonFontColor:"#1f1f1f",chatCancelButtonFontSize:"14px",chatCancelButtonFontFamily:"Inter,-apple-system,system-ui,avenir,helvetica,arial,sans-serif",chatCancelButtonEndChat:"Cancel",chatCancelButtonRetryEndChat:"Dismiss",chatCancelButtonBackgroundColor:"transparent",chatCancelButtonHoverBackgroundColor:"#f2f2f2",chatDialogBoxIconColor:"#8c8c8c",chatDialogBoxFontFamily:"Inter,-apple-system,system-ui,avenir,helvetica,arial,sans-serif",chatDialogBoxFontSize:"16px",chatDialogBoxFontColor:"#1f1f1f",chatDialogBoxEndChat:"Are you sure you want to end this chat?",chatDialogBoxRetryEndChat:"There was an error while ending the chat."},lr={botIcon:"",botIconVerticalAlign:Ar.botIconVerticalAlign,chatIcon:"",chatTitleIcon:"",chatTitle:Ar.chatTitle,chatSubtitle:"",customFieldPhoneDescription:"",customFieldPhoneInvalidFormatMessage:"",customFieldEmailInvalidFormatMessage:"",customFieldInputPlaceholder:Ar.customFieldInputPlaceholder,customDropdownInputPlaceholder:"",chatConfirmButtonEndChat:"",chatCancelButtonEndChat:"",chatDialogBoxEndChat:"",chatPlaceholder:"",chatAriaLabel:"",startChatButtonLabel:"",endedChatMessage:"",linkProtocol:Ar.linkProtocol,linkTarget:Ar.linkTarget,chatDialogBoxRetryEndChat:"",chatConfirmButtonRetryEndChat:"",chatCancelButtonRetryEndChat:""};function Dc(){const t=navigator.userAgent;let e="desktop";return/iPhone|iPad|iPod/i.test(t)?e="ios":/Android/i.test(t)&&(e="android"),{isMobile:e!=="desktop",type:e}}function _t(t){return typeof t=="string"?t:t==null?void 0:t.message}function Mf(t){const e=t.charCodeAt(0);return e>=65&&e<=90}function ki(t){const e=[...t].map((n,r)=>Mf(n)?r===0?n.toLowerCase():"-"+n.toLowerCase():n).join("");return"--".concat(e)}function Df(t,e){const n=Object.keys(e);return n.length?n.reduce((r,s)=>s.indexOf("-")>-1||s.indexOf("_")>-1?r:(t.style.setProperty(ki(s),e[s]),{...r,[ki(s)]:e[s]}),{}):{}}function Yo(t,e){let n;if(typeof t=="string"?n=t.indexOf("#")>-1?document.querySelector(t):document.getElementById(t):n=t,n)return Df(n,e)}function Fe(t,e){try{return JSON.stringify(t)}catch(n){return""}}function Fc(t,e,n){try{return JSON.parse(t)}catch(r){return n==null||n(r),e}}class Ff{constructor(e){de(this,"_status","pending");de(this,"_suspender");de(this,"_result");de(this,"_error");this._suspender=e.then(n=>{this._status="fulfilled",this._result=n}).catch(n=>{this._status="rejected",this._error=n})}get status(){return this._status}load(){if(this._status==="pending")throw this._suspender;if(this._status==="rejected")throw this._error;if(this._status==="fulfilled")return this._result;{const e=this._status;throw new Error('Status "'.concat(e,'" is not supported'))}}}function Sa(t){return new Promise(e=>{t<=0?e(!0):setTimeout(()=>e(!0),t)})}function Vf(t){return Math.min(2e3*t,3e4)}async function Ta(t,e={}){const{defaultRetry:n=5,retryDelay:r=Vf,onError:s}=e;if(n<=0)return await t();let o=0;const a=async()=>{try{return await t()}catch(i){if(s==null||s(i,o),o===n)throw i;return o+=1,await Sa(typeof r=="function"?r(o):r),await a()}};return a()}function Hf(t,e,n={}){const{mode:r=window.localStorage,onError:s}=n;try{return r.setItem(t,e),!0}catch(o){return s==null||s(o),!1}}function zf(t,e={}){const{mode:n=window.localStorage,onError:r}=e;try{return n.removeItem(t),!0}catch(s){return r==null||r(s),!1}}const Ge={Topic:"WidgetCommunication",Methods:{Maximize:"Maximize",Minimize:"Minimize",GetAllConfig:"GetAllConfig",GetCredentials:"GetCredentials",GetTdAccessToken:"GetTdAccessToken",SetBadge:"SetBadge",FrameOpened:"FrameOpened",DownloadTranscript:"DownloadTranscript",UpdatePreviewConfig:"UpdatePreviewConfig",PreviewReady:"PreviewReady",ConversationStart:"ConversationStart",FrameReady:"FrameReady",FrameResize:"FrameResize",UpdateAppConfigs:"UpdateAppConfigs",UpdateContext:"UpdateContext"}},Uf={Image:"image",Video:"video",Audio:"audio",File:"file"};class cn{constructor(){de(this,"enableSplitTwilioBootstrap");de(this,"participantName");de(this,"feedbackFlowId");de(this,"appearanceConfig",{initialScreen:{showInitialScreen:!1,welcomeMessage:{title:"",subtitle:""},controls:[]},chat:{messages:[]},generalSettings:{showCloseConversationButton:!1,showChatTranscriptsDownloadButton:!1,showTypingIndicatorButton:!1}});de(this,"appConfig",{enableEmoji:!0,enableAttachments:!0,enableValidation:!1,enableResponsiveLayout:!0,enablePointMoveTriggerButton:!1,enableUserInput:!0,languageCode:"en-US"});de(this,"appProps",{touchpointId:"",accountId:"",region:"td-us-1"});de(this,"options",{...lr});de(this,"styles",{});de(this,"context",{});de(this,"injectorWindowHostname","");de(this,"isMobile",!1);de(this,"deviceType","desktop")}}const Zf="modulepreload",Wf=function(t,e){return new URL(t,e).href},Ai={},Ce=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){const a=document.getElementsByTagName("link"),i=document.querySelector("meta[property=csp-nonce]"),c=(i==null?void 0:i.nonce)||(i==null?void 0:i.getAttribute("nonce"));s=Promise.allSettled(n.map(l=>{if(l=Wf(l,r),l in Ai)return;Ai[l]=!0;const d=l.endsWith(".css"),p=d?'[rel="stylesheet"]':"";if(!!r)for(let y=a.length-1;y>=0;y--){const _=a[y];if(_.href===l&&(!d||_.rel==="stylesheet"))return}else if(document.querySelector('link[href="'.concat(l,'"]').concat(p)))return;const g=document.createElement("link");if(g.rel=d?"stylesheet":Zf,d||(g.as="script"),g.crossOrigin="",g.href=l,c&&g.setAttribute("nonce",c),document.head.appendChild(g),d)return new Promise((y,_)=>{g.addEventListener("load",y),g.addEventListener("error",()=>_(new Error("Unable to preload CSS for ".concat(l))))})}))}function o(a){const i=new Event("vite:preloadError",{cancelable:!0});if(i.payload=a,window.dispatchEvent(i),!i.defaultPrevented)throw a}return s.then(a=>{for(const i of a||[])i.status==="rejected"&&o(i.reason);return e().catch(o)})};function Gf(){const t="en-US";let e=t,n=!1,r=null,s=[];const o=(i="")=>{const c=i||navigator.language||t;if(s.indexOf(c)>-1)return c;const l=s.find(d=>d.toLocaleLowerCase().indexOf(c.toLocaleLowerCase())>-1);return l||(/^(ar|AR)/.test(c)?Bc[0]:t)},a=async(i="")=>(n=!0,r=(await Ce(async()=>{const{default:c}=await import("./index-ytKdWvHH.js");return{default:c}},[],import.meta.url)).default,s=Object.keys(r),e=o(i),await cr.use(_f).init({lng:e,fallbackLng:t,resources:r,keySeparator:!1,supportedLngs:s,interpolation:{escapeValue:!1},react:{useSuspense:!1}}),e);return{changeLanguage:async(i="")=>n?(i===e||(e=o(i),await cr.changeLanguage(e)),e):await a(i),get current(){return e}}}const Ls=Gf(),Ko={reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],overline:[53,55],inverse:[7,27],hidden:[8,28],strikethrough:[9,29],black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],blackBright:[90,39],redBright:[91,39],greenBright:[92,39],yellowBright:[93,39],blueBright:[94,39],magentaBright:[95,39],cyanBright:[96,39],whiteBright:[97,39],bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],bgBlackBright:[100,49],bgRedBright:[101,49],bgGreenBright:[102,49],bgYellowBright:[103,49],bgBlueBright:[104,49],bgMagentaBright:[105,49],bgCyanBright:[106,49],bgWhiteBright:[107,49]};function Jo(t,e,n,r=!1){const s=String(e),o=(c,l)=>"\x1B[".concat(l[0],"m").concat(c,"\x1B[").concat(l[1],"m"),a=(c,l)=>l!=null&&typeof l=="string"?o(c,Ko[l]):l!=null&&Array.isArray(l)?l.reduce((d,p)=>a(d,p),c):l!=null&&l[c.trim()]!=null?a(c,l[c.trim()]):l!=null&&l["*"]!=null?a(c,l["*"]):c,i=null;return s.replace(/{{(.+?)}}/g,(c,l)=>{var p,m;const d=n[l]!=null?String(n[l]):r?"":c;return t.stylePrettyLogs?a(d,(m=(p=t==null?void 0:t.prettyLogStyles)==null?void 0:p[l])!=null?m:i)+o("",Ko.reset):d})}function mt(t,e=2,n=0){return t!=null&&isNaN(t)?"":(t=t!=null?t+n:t,e===2?t==null?"--":t<10?"0"+t:t.toString():t==null?"---":t<10?"00"+t:t<100?"0"+t:t.toString())}function qf(t){return{href:t.href,protocol:t.protocol,username:t.username,password:t.password,host:t.host,hostname:t.hostname,port:t.port,pathname:t.pathname,search:t.search,searchParams:[...t.searchParams].map(([e,n])=>({key:e,value:n})),hash:t.hash,origin:t.origin}}function Vc(t){const e=new Set;return JSON.stringify(t,(n,r)=>{if(typeof r=="object"&&r!==null){if(e.has(r))return"[Circular]";e.add(r)}return typeof r=="bigint"?"".concat(r):r})}function qe(t,e){const n={seen:[],stylize:Hc};return e!=null&&Wc(n,e),er(n.showHidden)&&(n.showHidden=!1),er(n.depth)&&(n.depth=2),er(n.colors)&&(n.colors=!0),er(n.customInspect)&&(n.customInspect=!0),n.colors&&(n.stylize=Kf),Ps(n,t,n.depth)}qe.colors=Ko;qe.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};function Yf(t){return typeof t=="boolean"}function er(t){return t===void 0}function Hc(t){return t}function Kf(t,e){var r,s,o,a;const n=qe.styles[e];return n!=null&&((s=(r=qe==null?void 0:qe.colors)==null?void 0:r[n])==null?void 0:s[0])!=null&&((a=(o=qe==null?void 0:qe.colors)==null?void 0:o[n])==null?void 0:a[1])!=null?"\x1B["+qe.colors[n][0]+"m"+t+"\x1B["+qe.colors[n][1]+"m":t}function ms(t){return typeof t=="function"}function zc(t){return typeof t=="string"}function Jf(t){return typeof t=="number"}function Uc(t){return t===null}function Zc(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Po(t){return to(t)&&Ea(t)==="[object RegExp]"}function to(t){return typeof t=="object"&&t!==null}function No(t){return to(t)&&(Ea(t)==="[object Error]"||t instanceof Error)}function Ii(t){return to(t)&&Ea(t)==="[object Date]"}function Ea(t){return Object.prototype.toString.call(t)}function Xf(t){const e={};return t.forEach(n=>{e[n]=!0}),e}function Qf(t,e,n,r,s){const o=[];for(let a=0,i=e.length;a<i;++a)Zc(e,String(a))?o.push(Xo(t,e,n,r,String(a),!0)):o.push("");return s.forEach(a=>{a.match(/^\d+$/)||o.push(Xo(t,e,n,r,a,!0))}),o}function jo(t){return"["+Error.prototype.toString.call(t)+"]"}function Ps(t,e,n=0){if(t.customInspect&&e!=null&&ms(e)&&(e==null?void 0:e.inspect)!==qe&&!(e!=null&&e.constructor&&(e==null?void 0:e.constructor.prototype)===e)){if(typeof e.inspect!="function"&&e.toString!=null)return e.toString();let d=e==null?void 0:e.inspect(n,t);return zc(d)||(d=Ps(t,d,n)),d}const r=an(t,e);if(r)return r;let s=Object.keys(e);const o=Xf(s);try{t.showHidden&&Object.getOwnPropertyNames&&(s=Object.getOwnPropertyNames(e))}catch(d){}if(No(e)&&(s.indexOf("message")>=0||s.indexOf("description")>=0))return jo(e);if(s.length===0)if(ms(t.stylize)){if(ms(e)){const d=e.name?": "+e.name:"";return t.stylize("[Function"+d+"]","special")}if(Po(e))return t.stylize(RegExp.prototype.toString.call(e),"regexp");if(Ii(e))return t.stylize(Date.prototype.toISOString.call(e),"date");if(No(e))return jo(e)}else return e;let a="",i=!1,c=["{\n","\n}"];if(Array.isArray(e)&&(i=!0,c=["[\n","\n]"]),ms(e)&&(a=" [Function"+(e.name?": "+e.name:"")+"]"),Po(e)&&(a=" "+RegExp.prototype.toString.call(e)),Ii(e)&&(a=" "+Date.prototype.toUTCString.call(e)),No(e)&&(a=" "+jo(e)),s.length===0&&(!i||e.length==0))return c[0]+a+c[1];if(n<0)return Po(e)?t.stylize(RegExp.prototype.toString.call(e),"regexp"):t.stylize("[Object]","special");t.seen.push(e);let l;return i?l=Qf(t,e,n,o,s):l=s.map(d=>Xo(t,e,n,o,d,i)),t.seen.pop(),ep(l,a,c)}function Xo(t,e,n,r,s,o){let a,i,c={value:void 0};try{c.value=e[s]}catch(l){}try{Object.getOwnPropertyDescriptor&&(c=Object.getOwnPropertyDescriptor(e,s)||c)}catch(l){}if(c.get?c.set?i=t.stylize("[Getter/Setter]","special"):i=t.stylize("[Getter]","special"):c.set&&(i=t.stylize("[Setter]","special")),Zc(r,s)||(a="["+s+"]"),i||(t.seen.indexOf(c.value)<0?(Uc(n)?i=Ps(t,c.value,void 0):i=Ps(t,c.value,n-1),i.indexOf("\n")>-1&&(o?i=i.split("\n").map(l=>"  "+l).join("\n").substr(2):i="\n"+i.split("\n").map(l=>"   "+l).join("\n"))):i=t.stylize("[Circular]","special")),er(a)){if(o&&s.match(/^\d+$/))return i;a=JSON.stringify(""+s),a.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.substr(1,a.length-2),a=t.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,"\\'").replace(/(^"|"$)/g,"'"),a=t.stylize(a,"string"))}return a+": "+i}function an(t,e){if(er(e))return t.stylize("undefined","undefined");if(zc(e)){const n="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,"\\'")+"'";return t.stylize(n,"string")}if(Jf(e))return t.stylize(""+e,"number");if(Yf(e))return t.stylize(""+e,"boolean");if(Uc(e))return t.stylize("null","null")}function ep(t,e,n){return n[0]+(e===""?"":e+"\n")+"  "+t.join(",\n  ")+" "+n[1]}function Wc(t,e){const n={...t};if(!e||!to(e))return t;const r={...e},s=Object.keys(e);let o=s.length;for(;o--;)n[s[o]]=r[s[o]];return n}function tp(t,...e){const n={seen:[],stylize:Hc};t!=null&&Wc(n,t);const r=e[0];let s=0,o="",a="";if(typeof r=="string"){if(e.length===1)return r;let i,c=0;for(let l=0;l<r.length-1;l++)if(r.charCodeAt(l)===37){const d=r.charCodeAt(++l);if(s+1!==e.length){switch(d){case 115:{const p=e[++s];typeof p=="number"||typeof p=="bigint"?i=an(n,p):typeof p!="object"||p===null?i=String(p):i=qe(p,{...t,compact:3,colors:!1,depth:0});break}case 106:i=Vc(e[++s]);break;case 100:{const p=e[++s];typeof p=="bigint"?i=an(n,p):typeof p=="symbol"?i="NaN":i=an(n,p);break}case 79:i=qe(e[++s],t);break;case 111:i=qe(e[++s],{...t,showHidden:!0,showProxy:!0,depth:4});break;case 105:{const p=e[++s];typeof p=="bigint"?i=an(n,p):typeof p=="symbol"?i="NaN":i=an(n,parseInt(i));break}case 102:{const p=e[++s];typeof p=="symbol"?i="NaN":i=an(n,parseInt(p));break}case 99:s+=1,i="";break;case 37:o+=r.slice(c,l),c=l+1;continue;default:continue}c!==l-1&&(o+=r.slice(c,l-1)),o+=i,c=l+1}else d===37&&(o+=r.slice(c,l),c=l+1)}c!==0&&(s++,a=" ",c<r.length&&(o+=r.slice(c)))}for(;s<e.length;){const i=e[s];o+=a,o+=typeof i!="string"?qe(i,t):i,a=" ",s++}return o}const np={getCallerStackFrame:Gc,getErrorTrace:qc,getMeta:op,transportJSON:cp,transportFormatted:ip,isBuffer:lp,isError:Kc,prettyFormatLogObj:ap,prettyFormatErrorObj:Jc};var Ic;const rp={runtime:[typeof window,typeof document].includes("undefined")?"Generic":"Browser",browser:(Ic=globalThis==null?void 0:globalThis.navigator)==null?void 0:Ic.userAgent},sp=/(?:(?:file|https?|global code|[^@]+)@)?(?:file:)?((?:\/[^:/]+){2,})(?::(\d+))?(?::(\d+))?/;function op(t,e,n,r,s,o){return Object.assign({},rp,{name:s,parentNames:o,date:new Date,logLevelId:t,logLevelName:e,path:r?void 0:Gc(n)})}function Gc(t,e=Error()){var n,r,s;return Yc((s=(r=(n=e==null?void 0:e.stack)==null?void 0:n.split("\n"))==null?void 0:r.filter(o=>!o.includes("Error: ")))==null?void 0:s[t])}function qc(t){var e,n,r,s;return(s=(r=(n=(e=t==null?void 0:t.stack)==null?void 0:e.split("\n"))!=null?n:[])==null?void 0:r.filter(o=>!o.includes("Error: ")))==null?void 0:s.reduce((o,a)=>(o.push(Yc(a)),o),[])}function Yc(t){var r;const e=(r=globalThis==null?void 0:globalThis.location)==null?void 0:r.origin,n={fullFilePath:void 0,fileName:void 0,fileNameWithLine:void 0,fileColumn:void 0,fileLine:void 0,filePath:void 0,filePathWithLine:void 0,method:void 0};if(t!=null){const s=t.match(sp);if(s){n.filePath=s[1].replace(/\?.*$/,""),n.fullFilePath="".concat(e).concat(n.filePath);const o=n.filePath.split("/");n.fileName=o[o.length-1],n.fileLine=s[2],n.fileColumn=s[3],n.filePathWithLine="".concat(n.filePath,":").concat(n.fileLine),n.fileNameWithLine="".concat(n.fileName,":").concat(n.fileLine)}}return n}function Kc(t){return t instanceof Error}function ap(t,e){return t.reduce((n,r)=>(Kc(r)?n.errors.push(Jc(r,e)):n.args.push(r),n),{args:[],errors:[]})}function Jc(t,e){const n=qc(t).map(s=>Jo(e,e.prettyErrorStackTemplate,{...s},!0)),r={errorName:" ".concat(t.name," "),errorMessage:Object.getOwnPropertyNames(t).reduce((s,o)=>(o!=="stack"&&s.push(t[o]),s),[]).join(", "),errorStack:n.join("\n")};return Jo(e,e.prettyErrorTemplate,r)}function ip(t,e,n,r){const s=(n.length>0&&e.length>0?"\n":"")+n.join("\n");r.prettyInspectOptions.colors=r.stylePrettyLogs,console.log(t+tp(r.prettyInspectOptions,...e)+s)}function cp(t){console.log(Vc(t))}function lp(t){return!1}class dp{constructor(e,n,r=4){var s,o,a,i,c,l,d,p,m,g,y,_,w,T,L,v,C,k,x,R,M,D,$,A,U,K;this.logObj=n,this.stackDepthLevel=r,this.runtime=np,this.settings={type:(s=e==null?void 0:e.type)!=null?s:"pretty",name:e==null?void 0:e.name,parentNames:e==null?void 0:e.parentNames,minLevel:(o=e==null?void 0:e.minLevel)!=null?o:0,argumentsArrayName:e==null?void 0:e.argumentsArrayName,hideLogPositionForProduction:(a=e==null?void 0:e.hideLogPositionForProduction)!=null?a:!1,prettyLogTemplate:(i=e==null?void 0:e.prettyLogTemplate)!=null?i:"{{yyyy}}.{{mm}}.{{dd}} {{hh}}:{{MM}}:{{ss}}:{{ms}}	{{logLevelName}}	{{filePathWithLine}}{{nameWithDelimiterPrefix}}	",prettyErrorTemplate:(c=e==null?void 0:e.prettyErrorTemplate)!=null?c:"\n{{errorName}} {{errorMessage}}\nerror stack:\n{{errorStack}}",prettyErrorStackTemplate:(l=e==null?void 0:e.prettyErrorStackTemplate)!=null?l:"  • {{fileName}}	{{method}}\n	{{filePathWithLine}}",prettyErrorParentNamesSeparator:(d=e==null?void 0:e.prettyErrorParentNamesSeparator)!=null?d:":",prettyErrorLoggerNameDelimiter:(p=e==null?void 0:e.prettyErrorLoggerNameDelimiter)!=null?p:"	",stylePrettyLogs:(m=e==null?void 0:e.stylePrettyLogs)!=null?m:!0,prettyLogTimeZone:(g=e==null?void 0:e.prettyLogTimeZone)!=null?g:"UTC",prettyLogStyles:(y=e==null?void 0:e.prettyLogStyles)!=null?y:{logLevelName:{"*":["bold","black","bgWhiteBright","dim"],SILLY:["bold","white"],TRACE:["bold","whiteBright"],DEBUG:["bold","green"],INFO:["bold","blue"],WARN:["bold","yellow"],ERROR:["bold","red"],FATAL:["bold","redBright"]},dateIsoStr:"white",filePathWithLine:"white",name:["white","bold"],nameWithDelimiterPrefix:["white","bold"],nameWithDelimiterSuffix:["white","bold"],errorName:["bold","bgRedBright","whiteBright"],fileName:["yellow"],fileNameWithLine:"white"},prettyInspectOptions:(_=e==null?void 0:e.prettyInspectOptions)!=null?_:{colors:!0,compact:!1,depth:1/0},metaProperty:(w=e==null?void 0:e.metaProperty)!=null?w:"_meta",maskPlaceholder:(T=e==null?void 0:e.maskPlaceholder)!=null?T:"[***]",maskValuesOfKeys:(L=e==null?void 0:e.maskValuesOfKeys)!=null?L:["password"],maskValuesOfKeysCaseInsensitive:(v=e==null?void 0:e.maskValuesOfKeysCaseInsensitive)!=null?v:!1,maskValuesRegEx:e==null?void 0:e.maskValuesRegEx,prefix:[...(C=e==null?void 0:e.prefix)!=null?C:[]],attachedTransports:[...(k=e==null?void 0:e.attachedTransports)!=null?k:[]],overwrite:{mask:(x=e==null?void 0:e.overwrite)==null?void 0:x.mask,toLogObj:(R=e==null?void 0:e.overwrite)==null?void 0:R.toLogObj,addMeta:(M=e==null?void 0:e.overwrite)==null?void 0:M.addMeta,addPlaceholders:(D=e==null?void 0:e.overwrite)==null?void 0:D.addPlaceholders,formatMeta:($=e==null?void 0:e.overwrite)==null?void 0:$.formatMeta,formatLogObj:(A=e==null?void 0:e.overwrite)==null?void 0:A.formatLogObj,transportFormatted:(U=e==null?void 0:e.overwrite)==null?void 0:U.transportFormatted,transportJSON:(K=e==null?void 0:e.overwrite)==null?void 0:K.transportJSON}}}log(e,n,...r){var p,m,g,y,_,w,T,L,v,C,k,x,R,M;if(e<this.settings.minLevel)return;const s=[...this.settings.prefix,...r],o=((p=this.settings.overwrite)==null?void 0:p.mask)!=null?(m=this.settings.overwrite)==null?void 0:m.mask(s):this.settings.maskValuesOfKeys!=null&&this.settings.maskValuesOfKeys.length>0?this._mask(s):s,a=this.logObj!=null?this._recursiveCloneAndExecuteFunctions(this.logObj):void 0,i=((g=this.settings.overwrite)==null?void 0:g.toLogObj)!=null?(y=this.settings.overwrite)==null?void 0:y.toLogObj(o,a):this._toLogObj(o,a),c=((_=this.settings.overwrite)==null?void 0:_.addMeta)!=null?(w=this.settings.overwrite)==null?void 0:w.addMeta(i,e,n):this._addMetaToLogObj(i,e,n);let l,d;return((T=this.settings.overwrite)==null?void 0:T.formatMeta)!=null&&(l=(L=this.settings.overwrite)==null?void 0:L.formatMeta(c==null?void 0:c[this.settings.metaProperty])),((v=this.settings.overwrite)==null?void 0:v.formatLogObj)!=null&&(d=(C=this.settings.overwrite)==null?void 0:C.formatLogObj(o,this.settings)),this.settings.type==="pretty"&&(l=l!=null?l:this._prettyFormatLogObjMeta(c==null?void 0:c[this.settings.metaProperty]),d=d!=null?d:this.runtime.prettyFormatLogObj(o,this.settings)),l!=null&&d!=null?((k=this.settings.overwrite)==null?void 0:k.transportFormatted)!=null?(x=this.settings.overwrite)==null||x.transportFormatted(l,d.args,d.errors,this.settings):this.runtime.transportFormatted(l,d.args,d.errors,this.settings):((R=this.settings.overwrite)==null?void 0:R.transportJSON)!=null?(M=this.settings.overwrite)==null||M.transportJSON(c):this.settings.type!=="hidden"&&this.runtime.transportJSON(c),this.settings.attachedTransports!=null&&this.settings.attachedTransports.length>0&&this.settings.attachedTransports.forEach(D=>{D(c)}),c}attachTransport(e){this.settings.attachedTransports.push(e)}getSubLogger(e,n){var o,a,i,c;const r={...this.settings,...e,parentNames:((o=this.settings)==null?void 0:o.parentNames)!=null&&((a=this.settings)==null?void 0:a.name)!=null?[...this.settings.parentNames,this.settings.name]:((i=this.settings)==null?void 0:i.name)!=null?[this.settings.name]:void 0,prefix:[...this.settings.prefix,...(c=e==null?void 0:e.prefix)!=null?c:[]]};return new this.constructor(r,n!=null?n:this.logObj,this.stackDepthLevel)}_mask(e){const n=this.settings.maskValuesOfKeysCaseInsensitive!==!0?this.settings.maskValuesOfKeys:this.settings.maskValuesOfKeys.map(r=>r.toLowerCase());return e==null?void 0:e.map(r=>this._recursiveCloneAndMaskValuesOfKeys(r,n))}_recursiveCloneAndMaskValuesOfKeys(e,n,r=[]){var s,o;if(r.includes(e))return{...e};if(typeof e=="object"&&e!==null&&r.push(e),this.runtime.isError(e)||this.runtime.isBuffer(e))return e;if(e instanceof Map)return new Map(e);if(e instanceof Set)return new Set(e);if(Array.isArray(e))return e.map(a=>this._recursiveCloneAndMaskValuesOfKeys(a,n,r));if(e instanceof Date)return new Date(e.getTime());if(e instanceof URL)return qf(e);if(e!==null&&typeof e=="object"){const a=this.runtime.isError(e)?this._cloneError(e):Object.create(Object.getPrototypeOf(e));return Object.getOwnPropertyNames(e).reduce((i,c)=>{var l;return i[c]=n.includes(((l=this.settings)==null?void 0:l.maskValuesOfKeysCaseInsensitive)!==!0?c:c.toLowerCase())?this.settings.maskPlaceholder:(()=>{try{return this._recursiveCloneAndMaskValuesOfKeys(e[c],n,r)}catch(d){return null}})(),i},a)}else{if(typeof e=="string"){let a=e;for(const i of((s=this.settings)==null?void 0:s.maskValuesRegEx)||[])a=a.replace(i,((o=this.settings)==null?void 0:o.maskPlaceholder)||"");return a}return e}}_recursiveCloneAndExecuteFunctions(e,n=[]){return this.isObjectOrArray(e)&&n.includes(e)?this.shallowCopy(e):(this.isObjectOrArray(e)&&n.push(e),Array.isArray(e)?e.map(r=>this._recursiveCloneAndExecuteFunctions(r,n)):e instanceof Date?new Date(e.getTime()):this.isObject(e)?Object.getOwnPropertyNames(e).reduce((r,s)=>{const o=Object.getOwnPropertyDescriptor(e,s);if(o){Object.defineProperty(r,s,o);const a=e[s];r[s]=typeof a=="function"?a():this._recursiveCloneAndExecuteFunctions(a,n)}return r},Object.create(Object.getPrototypeOf(e))):e)}isObjectOrArray(e){return typeof e=="object"&&e!==null}isObject(e){return typeof e=="object"&&!Array.isArray(e)&&e!==null}shallowCopy(e){return Array.isArray(e)?[...e]:{...e}}_toLogObj(e,n={}){return e=e==null?void 0:e.map(r=>this.runtime.isError(r)?this._toErrorObject(r):r),this.settings.argumentsArrayName==null?e.length===1&&!Array.isArray(e[0])&&this.runtime.isBuffer(e[0])!==!0&&!(e[0]instanceof Date)?n=typeof e[0]=="object"&&e[0]!=null?{...e[0],...n}:{0:e[0],...n}:n={...n,...e}:n={...n,[this.settings.argumentsArrayName]:e},n}_cloneError(e){const n=new e.constructor;return Object.getOwnPropertyNames(e).forEach(r=>{n[r]=e[r]}),n}_toErrorObject(e){var n;return{nativeError:e,name:(n=e.name)!=null?n:"Error",message:e.message,stack:this.runtime.getErrorTrace(e)}}_addMetaToLogObj(e,n,r){return{...e,[this.settings.metaProperty]:this.runtime.getMeta(n,r,this.stackDepthLevel,this.settings.hideLogPositionForProduction,this.settings.name,this.settings.parentNames)}}_prettyFormatLogObjMeta(e){var a,i,c,l,d,p,m,g,y,_,w,T,L,v,C,k,x,R,M,D,$,A,U,K,ee,te,oe;if(e==null)return"";let n=this.settings.prettyLogTemplate;const r={};n.includes("{{yyyy}}.{{mm}}.{{dd}} {{hh}}:{{MM}}:{{ss}}:{{ms}}")?n=n.replace("{{yyyy}}.{{mm}}.{{dd}} {{hh}}:{{MM}}:{{ss}}:{{ms}}","{{dateIsoStr}}"):this.settings.prettyLogTimeZone==="UTC"?(r.yyyy=(i=(a=e==null?void 0:e.date)==null?void 0:a.getUTCFullYear())!=null?i:"----",r.mm=mt((c=e==null?void 0:e.date)==null?void 0:c.getUTCMonth(),2,1),r.dd=mt((l=e==null?void 0:e.date)==null?void 0:l.getUTCDate(),2),r.hh=mt((d=e==null?void 0:e.date)==null?void 0:d.getUTCHours(),2),r.MM=mt((p=e==null?void 0:e.date)==null?void 0:p.getUTCMinutes(),2),r.ss=mt((m=e==null?void 0:e.date)==null?void 0:m.getUTCSeconds(),2),r.ms=mt((g=e==null?void 0:e.date)==null?void 0:g.getUTCMilliseconds(),3)):(r.yyyy=(_=(y=e==null?void 0:e.date)==null?void 0:y.getFullYear())!=null?_:"----",r.mm=mt((w=e==null?void 0:e.date)==null?void 0:w.getMonth(),2,1),r.dd=mt((T=e==null?void 0:e.date)==null?void 0:T.getDate(),2),r.hh=mt((L=e==null?void 0:e.date)==null?void 0:L.getHours(),2),r.MM=mt((v=e==null?void 0:e.date)==null?void 0:v.getMinutes(),2),r.ss=mt((C=e==null?void 0:e.date)==null?void 0:C.getSeconds(),2),r.ms=mt((k=e==null?void 0:e.date)==null?void 0:k.getMilliseconds(),3));const s=this.settings.prettyLogTimeZone==="UTC"?e==null?void 0:e.date:new Date(((x=e==null?void 0:e.date)==null?void 0:x.getTime())-((R=e==null?void 0:e.date)==null?void 0:R.getTimezoneOffset())*6e4);r.rawIsoStr=s==null?void 0:s.toISOString(),r.dateIsoStr=s==null?void 0:s.toISOString().replace("T"," ").replace("Z",""),r.logLevelName=e==null?void 0:e.logLevelName,r.fileNameWithLine=(D=(M=e==null?void 0:e.path)==null?void 0:M.fileNameWithLine)!=null?D:"",r.filePathWithLine=(A=($=e==null?void 0:e.path)==null?void 0:$.filePathWithLine)!=null?A:"",r.fullFilePath=(K=(U=e==null?void 0:e.path)==null?void 0:U.fullFilePath)!=null?K:"";let o=(ee=this.settings.parentNames)==null?void 0:ee.join(this.settings.prettyErrorParentNamesSeparator);return o=o!=null&&(e==null?void 0:e.name)!=null?o+this.settings.prettyErrorParentNamesSeparator:void 0,r.name=(e==null?void 0:e.name)!=null||o!=null?(o!=null?o:"")+(e==null?void 0:e.name):"",r.nameWithDelimiterPrefix=r.name.length>0?this.settings.prettyErrorLoggerNameDelimiter+r.name:"",r.nameWithDelimiterSuffix=r.name.length>0?r.name+this.settings.prettyErrorLoggerNameDelimiter:"",((te=this.settings.overwrite)==null?void 0:te.addPlaceholders)!=null&&((oe=this.settings.overwrite)==null||oe.addPlaceholders(e,r)),Jo(this.settings,n,r)}}class up extends dp{constructor(e,n){const r=typeof window<"u"&&typeof document<"u",s=r?window.chrome!==void 0&&window.CSS!==void 0&&window.CSS.supports("color","green"):!1,o=r?/^((?!chrome|android).)*safari/i.test(navigator.userAgent):!1;e=e||{},e.stylePrettyLogs=e.stylePrettyLogs&&r&&!s?!1:e.stylePrettyLogs,super(e,n,o?4:5)}log(e,n,...r){return super.log(e,n,...r)}silly(...e){return super.log(0,"SILLY",...e)}trace(...e){return super.log(1,"TRACE",...e)}debug(...e){return super.log(2,"DEBUG",...e)}info(...e){return super.log(3,"INFO",...e)}warn(...e){return super.log(4,"WARN",...e)}error(...e){return super.log(5,"ERROR",...e)}fatal(...e){return super.log(6,"FATAL",...e)}getSubLogger(e,n){return super.getSubLogger(e,n)}}const fp={BASE_URL:"./",DEV:!1,LEGACY:!1,MODE:"stg",PROD:!0,SSR:!1,VITE_BASE_URL_TD_CA_1:"undefined",VITE_BASE_URL_TD_EU_1:"undefined",VITE_BASE_URL_TD_US_1:"https://api.talkdeskstg.com",VITE_BASE_URL_TD_US_FED_1:"undefined",VITE_CDN_BASE:"https://talkdeskchatsdk.svc.talkdeskstg.com",VITE_DYNATRACE_ACCESS_TOKEN:"ZHQwYzAxLktNUUw0UU5NVk40WFEyRVI3R1JTS0VHNS5YQkdCMkVNQUhIREc1UTNPWk9DTldIR0xURlZJT05SM1NZVVNaS1lMVTY3SDVQQlQzT1JSVk5KTlFHNE5HUEZY",VITE_DYNATRACE_API_URL:"https://lou01238.live.dynatrace.com/api/v2/otlp",VITE_DYNATRACE_OTEL_SERVICE_NAME:"webchat-sdk-ui-v2",VITE_STAGE:"stg"},{VITE_DYNATRACE_API_URL:Ri,VITE_DYNATRACE_ACCESS_TOKEN:pp,VITE_DYNATRACE_OTEL_SERVICE_NAME:gs}=fp,hp=t=>{try{return window.atob(t)}catch(e){return console.warn("Failed to parse provider reporter api key",e),t}},Li=hp(pp);class Rr{constructor({context:e,proxyUrl:n}){de(this,"logger");de(this,"tracer");const r=this.createExporter(n),s=this.createTraceExporter(n);this.logger=this.createLogger(r,e),this.tracer=this.createTracer(s,e)}createExporter(e){return new Sf({url:"".concat(e||Ri,"/v1/logs"),headers:{Authorization:"Api-Token ".concat(Li)}})}createTraceExporter(e){return new Tf({url:"".concat(e||Ri,"/v1/traces"),headers:{Authorization:"Api-Token ".concat(Li)}})}createLogger(e,n){if(!e)return;const r=new xi({[Si]:gs,...n}),s=new Ef({resource:r});s.addLogRecordProcessor(new kf(e)),Af.setGlobalLoggerProvider(s);const o=s.getLogger(gs);return(a,{severityNumber:i,severityText:c,...l})=>{o.emit({body:a,severityNumber:i,severityText:c,attributes:l})}}createTracer(e,n){if(!e)return;const r=new xi({[Si]:gs,...n}),s=new If({resource:r});return s.addSpanProcessor(new Rf(e)),s.register({contextManager:new Lf}),Ti.setGlobalTracerProvider(s),s.getTracer(gs)}debug(e,n={}){var r;(r=this.escapeLogger)==null||r.call(this,e,{...n,severityNumber:hs.DEBUG,severityText:"DEBUG"})}info(e,n={}){var r;(r=this.escapeLogger)==null||r.call(this,e,{...n,severityNumber:hs.INFO,severityText:"INFO"})}error(e,n={}){var r;(r=this.escapeLogger)==null||r.call(this,e,{...n,severityNumber:hs.ERROR,severityText:"ERROR","otel.status_code":"ERROR"})}warn(e,n={}){var r;(r=this.escapeLogger)==null||r.call(this,e,{...n,severityNumber:hs.WARN,severityText:"WARN"})}startSpan(e,n={}){var s;const r=(s=this.tracer)==null?void 0:s.startSpan(e);return r?(r.setAttributes({...n,startAt:new Date().toISOString()}),r):null}startChildSpan(e,n,r={}){var a;if(!n)return null;const s=Ti.setSpan(Pf.active(),n),o=(a=this.tracer)==null?void 0:a.startSpan(e,{},s);return o?(o.setAttributes({...r,startAt:new Date().toISOString()}),o):null}get escapeLogger(){if(!this.logger){console.error("Can not reach to the dynatrace logger!");return}return this.logger}}de(Rr,"instance");function mp({context:t,proxyUrl:e}){return Rr.instance||(Rr.instance=new Rr({context:t,proxyUrl:e})),Rr.instance}function gp(t){let e,n=!1;function r(){return{documentVisibilityState:document.visibilityState,identity:S.getState().identity,roomId:S.getState().credentials.roomId,providerRegion:S.getState().credentials.region,maximize:S.getState().isFrameOpened?"on":"off",lang:Ls.current,browserLang:window.navigator.language}}function s(c){const{_meta:l,...d}=c,p=l,m=(p==null?void 0:p.name)||"unknown logger name",g=p.date.toISOString(),y=p.logLevelName,_=[m];if(d)try{Object.values(d).forEach(w=>{if(!(w instanceof Function||w instanceof RegExp))if(typeof w=="object")if(w!=null&&w.nativeError){const T=w;_.push("".concat((T==null?void 0:T.name)||"Error",": ").concat((T==null?void 0:T.message)||""))}else _.push(Fe(w));else _.push(String(w))})}catch(w){const T=w;_.push("Error formatTsLog payload",Fe(d),"".concat((T==null?void 0:T.name)||"Error",": ").concat((T==null?void 0:T.message)||""))}return{logLevelId:p.logLevelId,logLevelName:y,logDate:g,log:_.join(" | ")}}function o(c,l){var p,m,g;const d={talkdeskWidgetHref:window.location.href,talkdeskAccountId:(p=c==null?void 0:c.touchpoint)==null?void 0:p.account_id,talkdeskTouchpointId:(m=c==null?void 0:c.appProps)==null?void 0:m.touchpointId,talkdeskRegion:(g=c==null?void 0:c.appProps)==null?void 0:g.region,injectorWindowHref:c==null?void 0:c.injectorWindowHref,environment:"stg",userAgent:window.navigator.userAgent};n=/localhost/gi.test(d.injectorWindowHref||""),e=mp({context:d,proxyUrl:l})}function a({log:c,logLevelName:l,logDate:d}){var p;if(e){const m=l.toLocaleLowerCase();n||(p=e[m])==null||p.call(e,c,{logDate:d,...r()})}return c}return{init:c=>{var d,p;const l=(d=c==null?void 0:c.appProps)!=null&&d.proxyHost?"//".concat((p=c==null?void 0:c.appProps)==null?void 0:p.proxyHost).concat(In.tdReporter):"";switch(t){case"dynatrace":o(c,l);break}},run:(c,l)=>{const d=c._meta;if((d==null?void 0:d.logLevelId)>=l){const p=s(c);switch(t){case"dynatrace":return a(p);default:return null}}},startSpan:c=>{var l;return n?null:(l=e.startSpan)==null?void 0:l.call(e,c,r())},startChildSpan:(c,l)=>{var d;return n?null:(d=e.startChildSpan)==null?void 0:d.call(e,c,l,r())}}}const tr=gp("dynatrace"),yp={SILLY:0,TRACE:1,DEBUG:2,INFO:3,WARN:4,ERROR:5,FATAL:6},Pi=yp.INFO,Ni=(t,e)=>e!=null&&e.name?"".concat(e.name,":").concat(t):t;class _p extends up{constructor(e,n){super(e,n)}startSpan(e){return tr.startSpan(e)}startChildSpan(e,n){return tr.startChildSpan(e,n)}getSubLogger(e,n){const r=super.getSubLogger(e,n);return r.startSpan=s=>tr.startSpan(Ni(s,e)),r.startChildSpan=(s,o)=>tr.startChildSpan(Ni(s,e),o),r}}const ut=new _p({type:"pretty",name:"Widget",minLevel:Pi,prettyLogTemplate:"{{dateIsoStr}} [{{logLevelName}}] {{name}} ",attachedTransports:[t=>tr.run(t,Pi)]});var vp=200,ka="__lodash_hash_undefined__",bp=1/0,Xc=9007199254740991,wp="[object Arguments]",Cp="[object Function]",xp="[object GeneratorFunction]",Sp="[object Symbol]",Tp=/[\\^$.*+?()[\]{}|]/g,Ep=/^\[object .+?Constructor\]$/,kp=/^(?:0|[1-9]\d*)$/,Ap=typeof Ye=="object"&&Ye&&Ye.Object===Object&&Ye,Ip=typeof self=="object"&&self&&self.Object===Object&&self,Aa=Ap||Ip||Function("return this")();function Rp(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}function Lp(t,e){var n=t?t.length:0;return!!n&&jp(t,e,0)>-1}function Pp(t,e){for(var n=-1,r=t?t.length:0,s=Array(r);++n<r;)s[n]=e(t[n],n,t);return s}function Ia(t,e){for(var n=-1,r=e.length,s=t.length;++n<r;)t[s+n]=e[n];return t}function Np(t,e,n,r){for(var s=t.length,o=n+-1;++o<s;)if(e(t[o],o,t))return o;return-1}function jp(t,e,n){if(e!==e)return Np(t,$p,n);for(var r=n-1,s=t.length;++r<s;)if(t[r]===e)return r;return-1}function $p(t){return t!==t}function Bp(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}function Op(t,e){return t.has(e)}function Mp(t,e){return t==null?void 0:t[e]}function Dp(t){var e=!1;if(t!=null&&typeof t.toString!="function")try{e=!!(t+"")}catch(n){}return e}function Qc(t,e){return function(n){return t(e(n))}}var Fp=Array.prototype,Vp=Function.prototype,no=Object.prototype,$o=Aa["__core-js_shared__"],ji=function(){var t=/[^.]+$/.exec($o&&$o.keys&&$o.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),el=Vp.toString,Qr=no.hasOwnProperty,Ra=no.toString,Hp=RegExp("^"+el.call(Qr).replace(Tp,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),$i=Aa.Symbol,zp=Qc(Object.getPrototypeOf,Object),Up=no.propertyIsEnumerable,Zp=Fp.splice,Bi=$i?$i.isConcatSpreadable:void 0,Qo=Object.getOwnPropertySymbols,Oi=Math.max,Wp=tl(Aa,"Map"),$r=tl(Object,"create");function jn(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function Gp(){this.__data__=$r?$r(null):{}}function qp(t){return this.has(t)&&delete this.__data__[t]}function Yp(t){var e=this.__data__;if($r){var n=e[t];return n===ka?void 0:n}return Qr.call(e,t)?e[t]:void 0}function Kp(t){var e=this.__data__;return $r?e[t]!==void 0:Qr.call(e,t)}function Jp(t,e){var n=this.__data__;return n[t]=$r&&e===void 0?ka:e,this}jn.prototype.clear=Gp;jn.prototype.delete=qp;jn.prototype.get=Yp;jn.prototype.has=Kp;jn.prototype.set=Jp;function br(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function Xp(){this.__data__=[]}function Qp(t){var e=this.__data__,n=ro(e,t);if(n<0)return!1;var r=e.length-1;return n==r?e.pop():Zp.call(e,n,1),!0}function eh(t){var e=this.__data__,n=ro(e,t);return n<0?void 0:e[n][1]}function th(t){return ro(this.__data__,t)>-1}function nh(t,e){var n=this.__data__,r=ro(n,t);return r<0?n.push([t,e]):n[r][1]=e,this}br.prototype.clear=Xp;br.prototype.delete=Qp;br.prototype.get=eh;br.prototype.has=th;br.prototype.set=nh;function wr(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function rh(){this.__data__={hash:new jn,map:new(Wp||br),string:new jn}}function sh(t){return so(this,t).delete(t)}function oh(t){return so(this,t).get(t)}function ah(t){return so(this,t).has(t)}function ih(t,e){return so(this,t).set(t,e),this}wr.prototype.clear=rh;wr.prototype.delete=sh;wr.prototype.get=oh;wr.prototype.has=ah;wr.prototype.set=ih;function Ns(t){var e=-1,n=t?t.length:0;for(this.__data__=new wr;++e<n;)this.add(t[e])}function ch(t){return this.__data__.set(t,ka),this}function lh(t){return this.__data__.has(t)}Ns.prototype.add=Ns.prototype.push=ch;Ns.prototype.has=lh;function dh(t,e){var n=La(t)||nl(t)?Bp(t.length,String):[],r=n.length,s=!!r;for(var o in t)s&&(o=="length"||xh(o,r))||n.push(o);return n}function ro(t,e){for(var n=t.length;n--;)if(Rh(t[n][0],e))return n;return-1}function uh(t,e,n,r){var s=-1,o=Lp,a=!0,i=t.length,c=[],l=e.length;if(!i)return c;e.length>=vp&&(o=Op,a=!1,e=new Ns(e));e:for(;++s<i;){var d=t[s],p=d;if(d=d!==0?d:0,a&&p===p){for(var m=l;m--;)if(e[m]===p)continue e;c.push(d)}else o(e,p,r)||c.push(d)}return c}function fh(t,e,n,r,s){var o=-1,a=t.length;for(n||(n=Ch),s||(s=[]);++o<a;){var i=t[o];n(i)?Ia(s,i):s[s.length]=i}return s}function ph(t,e,n){var r=e(t);return La(t)?r:Ia(r,n(t))}function hh(t){if(!Pa(t)||Th(t))return!1;var e=sl(t)||Dp(t)?Hp:Ep;return e.test(Ih(t))}function mh(t){if(!Pa(t))return kh(t);var e=Eh(t),n=[];for(var r in t)r=="constructor"&&(e||!Qr.call(t,r))||n.push(r);return n}function gh(t,e){return t=Object(t),yh(t,e,function(n,r){return r in t})}function yh(t,e,n){for(var r=-1,s=e.length,o={};++r<s;){var a=e[r],i=t[a];n(i,a)&&(o[a]=i)}return o}function _h(t,e){return e=Oi(e===void 0?t.length-1:e,0),function(){for(var n=arguments,r=-1,s=Oi(n.length-e,0),o=Array(s);++r<s;)o[r]=n[e+r];r=-1;for(var a=Array(e+1);++r<e;)a[r]=n[r];return a[e]=o,Rp(t,this,a)}}function vh(t){return ph(t,jh,wh)}function so(t,e){var n=t.__data__;return Sh(e)?n[typeof e=="string"?"string":"hash"]:n.map}function tl(t,e){var n=Mp(t,e);return hh(n)?n:void 0}var bh=Qo?Qc(Qo,Object):al,wh=Qo?function(t){for(var e=[];t;)Ia(e,bh(t)),t=zp(t);return e}:al;function Ch(t){return La(t)||nl(t)||!!(Bi&&t&&t[Bi])}function xh(t,e){return e=e==null?Xc:e,!!e&&(typeof t=="number"||kp.test(t))&&t>-1&&t%1==0&&t<e}function Sh(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}function Th(t){return!!ji&&ji in t}function Eh(t){var e=t&&t.constructor,n=typeof e=="function"&&e.prototype||no;return t===n}function kh(t){var e=[];if(t!=null)for(var n in Object(t))e.push(n);return e}function Ah(t){if(typeof t=="string"||Nh(t))return t;var e=t+"";return e=="0"&&1/t==-bp?"-0":e}function Ih(t){if(t!=null){try{return el.call(t)}catch(e){}try{return t+""}catch(e){}}return""}function Rh(t,e){return t===e||t!==t&&e!==e}function nl(t){return Lh(t)&&Qr.call(t,"callee")&&(!Up.call(t,"callee")||Ra.call(t)==wp)}var La=Array.isArray;function rl(t){return t!=null&&Ph(t.length)&&!sl(t)}function Lh(t){return ol(t)&&rl(t)}function sl(t){var e=Pa(t)?Ra.call(t):"";return e==Cp||e==xp}function Ph(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=Xc}function Pa(t){var e=typeof t;return!!t&&(e=="object"||e=="function")}function ol(t){return!!t&&typeof t=="object"}function Nh(t){return typeof t=="symbol"||ol(t)&&Ra.call(t)==Sp}function jh(t){return rl(t)?dh(t):mh(t)}var $h=_h(function(t,e){return t==null?{}:(e=Pp(fh(e),Ah),gh(t,uh(vh(t),e)))});function al(){return[]}var Bh=$h;const js=eo(Bh);var Oh=1/0,Mh=9007199254740991,Dh="[object Arguments]",Fh="[object Function]",Vh="[object GeneratorFunction]",Hh="[object Symbol]",zh=typeof Ye=="object"&&Ye&&Ye.Object===Object&&Ye,Uh=typeof self=="object"&&self&&self.Object===Object&&self,Zh=zh||Uh||Function("return this")();function Wh(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}function Gh(t,e){for(var n=-1,r=t?t.length:0,s=Array(r);++n<r;)s[n]=e(t[n],n,t);return s}function qh(t,e){for(var n=-1,r=e.length,s=t.length;++n<r;)t[s+n]=e[n];return t}var Na=Object.prototype,Yh=Na.hasOwnProperty,ja=Na.toString,Mi=Zh.Symbol,Kh=Na.propertyIsEnumerable,Di=Mi?Mi.isConcatSpreadable:void 0,Fi=Math.max;function Jh(t,e,n,r,s){var o=-1,a=t.length;for(n||(n=tm),s||(s=[]);++o<a;){var i=t[o];n(i)?qh(s,i):s[s.length]=i}return s}function Xh(t,e){return t=Object(t),Qh(t,e,function(n,r){return r in t})}function Qh(t,e,n){for(var r=-1,s=e.length,o={};++r<s;){var a=e[r],i=t[a];n(i,a)&&(o[a]=i)}return o}function em(t,e){return e=Fi(e===void 0?t.length-1:e,0),function(){for(var n=arguments,r=-1,s=Fi(n.length-e,0),o=Array(s);++r<s;)o[r]=n[e+r];r=-1;for(var a=Array(e+1);++r<e;)a[r]=n[r];return a[e]=o,Wh(t,this,a)}}function tm(t){return sm(t)||rm(t)||!!(Di&&t&&t[Di])}function nm(t){if(typeof t=="string"||dm(t))return t;var e=t+"";return e=="0"&&1/t==-Oh?"-0":e}function rm(t){return am(t)&&Yh.call(t,"callee")&&(!Kh.call(t,"callee")||ja.call(t)==Dh)}var sm=Array.isArray;function om(t){return t!=null&&cm(t.length)&&!im(t)}function am(t){return il(t)&&om(t)}function im(t){var e=lm(t)?ja.call(t):"";return e==Fh||e==Vh}function cm(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=Mh}function lm(t){var e=typeof t;return!!t&&(e=="object"||e=="function")}function il(t){return!!t&&typeof t=="object"}function dm(t){return typeof t=="symbol"||il(t)&&ja.call(t)==Hh}var um=em(function(t,e){return t==null?{}:Xh(t,Gh(Jh(e),nm))}),fm=um;const pm=eo(fm);var $s={exports:{}};$s.exports;(function(t,e){var n=200,r="Expected a function",s="__lodash_hash_undefined__",o=1,a=2,i=1/0,c=9007199254740991,l="[object Arguments]",d="[object Array]",p="[object Boolean]",m="[object Date]",g="[object Error]",y="[object Function]",_="[object GeneratorFunction]",w="[object Map]",T="[object Number]",L="[object Object]",v="[object Promise]",C="[object RegExp]",k="[object Set]",x="[object String]",R="[object Symbol]",M="[object WeakMap]",D="[object ArrayBuffer]",$="[object DataView]",A="[object Float32Array]",U="[object Float64Array]",K="[object Int8Array]",ee="[object Int16Array]",te="[object Int32Array]",oe="[object Uint8Array]",ue="[object Uint8ClampedArray]",fe="[object Uint16Array]",ce="[object Uint32Array]",Te=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,O=/^\w*$/,F=/^\./,z=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Z=/[\\^$.*+?()[\]{}|]/g,N=/\\(\\)?/g,q=/^\[object .+?Constructor\]$/,W=/^(?:0|[1-9]\d*)$/,B={};B[A]=B[U]=B[K]=B[ee]=B[te]=B[oe]=B[ue]=B[fe]=B[ce]=!0,B[l]=B[d]=B[D]=B[p]=B[$]=B[m]=B[g]=B[y]=B[w]=B[T]=B[L]=B[C]=B[k]=B[x]=B[M]=!1;var ae=typeof Ye=="object"&&Ye&&Ye.Object===Object&&Ye,ge=typeof self=="object"&&self&&self.Object===Object&&self,ye=ae||ge||Function("return this")(),we=e&&!e.nodeType&&e,$e=we&&!0&&t&&!t.nodeType&&t,ne=$e&&$e.exports===we,Be=ne&&ae.process,ze=function(){try{return Be&&Be.binding("util")}catch(u){}}(),Le=ze&&ze.isTypedArray;function Oe(u,h){for(var b=-1,j=h.length,re=u.length;++b<j;)u[re+b]=h[b];return u}function Ee(u,h){for(var b=-1,j=u?u.length:0;++b<j;)if(h(u[b],b,u))return!0;return!1}function Pe(u){return function(h){return h==null?void 0:h[u]}}function be(u,h){for(var b=-1,j=Array(u);++b<u;)j[b]=h(b);return j}function xe(u){return function(h){return u(h)}}function je(u,h){return u==null?void 0:u[h]}function He(u){var h=!1;if(u!=null&&typeof u.toString!="function")try{h=!!(u+"")}catch(b){}return h}function bn(u){var h=-1,b=Array(u.size);return u.forEach(function(j,re){b[++h]=[re,j]}),b}function Jt(u,h){return function(b){return u(h(b))}}function Fn(u){var h=-1,b=Array(u.size);return u.forEach(function(j){b[++h]=j}),b}var Vn=Array.prototype,Ft=Function.prototype,wt=Object.prototype,wn=ye["__core-js_shared__"],Hn=function(){var u=/[^.]+$/.exec(wn&&wn.keys&&wn.keys.IE_PROTO||"");return u?"Symbol(src)_1."+u:""}(),zn=Ft.toString,nt=wt.hasOwnProperty,Ue=wt.toString,Sr=RegExp("^"+zn.call(nt).replace(Z,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Xt=ye.Symbol,Qt=ye.Uint8Array,At=Jt(Object.getPrototypeOf,Object),Un=wt.propertyIsEnumerable,Cn=Vn.splice,Tr=Object.getOwnPropertySymbols,wo=Jt(Object.keys,Object),Zn=Yn(ye,"DataView"),xn=Yn(ye,"Map"),Er=Yn(ye,"Promise"),Wn=Yn(ye,"Set"),en=Yn(ye,"WeakMap"),It=Yn(Object,"create"),Gn=Tn(Zn),qn=Tn(xn),Co=Tn(Er),ss=Tn(Wn),uu=Tn(en),os=Xt?Xt.prototype:void 0,xo=os?os.valueOf:void 0,li=os?os.toString:void 0;function Sn(u){var h=-1,b=u?u.length:0;for(this.clear();++h<b;){var j=u[h];this.set(j[0],j[1])}}function fu(){this.__data__=It?It(null):{}}function pu(u){return this.has(u)&&delete this.__data__[u]}function hu(u){var h=this.__data__;if(It){var b=h[u];return b===s?void 0:b}return nt.call(h,u)?h[u]:void 0}function mu(u){var h=this.__data__;return It?h[u]!==void 0:nt.call(h,u)}function gu(u,h){var b=this.__data__;return b[u]=It&&h===void 0?s:h,this}Sn.prototype.clear=fu,Sn.prototype.delete=pu,Sn.prototype.get=hu,Sn.prototype.has=mu,Sn.prototype.set=gu;function Vt(u){var h=-1,b=u?u.length:0;for(this.clear();++h<b;){var j=u[h];this.set(j[0],j[1])}}function yu(){this.__data__=[]}function _u(u){var h=this.__data__,b=is(h,u);if(b<0)return!1;var j=h.length-1;return b==j?h.pop():Cn.call(h,b,1),!0}function vu(u){var h=this.__data__,b=is(h,u);return b<0?void 0:h[b][1]}function bu(u){return is(this.__data__,u)>-1}function wu(u,h){var b=this.__data__,j=is(b,u);return j<0?b.push([u,h]):b[j][1]=h,this}Vt.prototype.clear=yu,Vt.prototype.delete=_u,Vt.prototype.get=vu,Vt.prototype.has=bu,Vt.prototype.set=wu;function Ht(u){var h=-1,b=u?u.length:0;for(this.clear();++h<b;){var j=u[h];this.set(j[0],j[1])}}function Cu(){this.__data__={hash:new Sn,map:new(xn||Vt),string:new Sn}}function xu(u){return cs(this,u).delete(u)}function Su(u){return cs(this,u).get(u)}function Tu(u){return cs(this,u).has(u)}function Eu(u,h){return cs(this,u).set(u,h),this}Ht.prototype.clear=Cu,Ht.prototype.delete=xu,Ht.prototype.get=Su,Ht.prototype.has=Tu,Ht.prototype.set=Eu;function as(u){var h=-1,b=u?u.length:0;for(this.__data__=new Ht;++h<b;)this.add(u[h])}function ku(u){return this.__data__.set(u,s),this}function Au(u){return this.__data__.has(u)}as.prototype.add=as.prototype.push=ku,as.prototype.has=Au;function zt(u){this.__data__=new Vt(u)}function Iu(){this.__data__=new Vt}function Ru(u){return this.__data__.delete(u)}function Lu(u){return this.__data__.get(u)}function Pu(u){return this.__data__.has(u)}function Nu(u,h){var b=this.__data__;if(b instanceof Vt){var j=b.__data__;if(!xn||j.length<n-1)return j.push([u,h]),this;b=this.__data__=new Ht(j)}return b.set(u,h),this}zt.prototype.clear=Iu,zt.prototype.delete=Ru,zt.prototype.get=Lu,zt.prototype.has=Pu,zt.prototype.set=Nu;function di(u,h){var b=nn(u)||vi(u)?be(u.length,String):[],j=b.length,re=!!j;for(var Y in u)(h||nt.call(u,Y))&&!(re&&(Y=="length"||hi(Y,j)))&&b.push(Y);return b}function is(u,h){for(var b=u.length;b--;)if(_i(u[b][0],h))return b;return-1}function ui(u,h){h=ls(h,u)?[h]:fi(h);for(var b=0,j=h.length;u!=null&&b<j;)u=u[ds(h[b++])];return b&&b==j?u:void 0}function ju(u,h,b){var j=h(u);return nn(u)?j:Oe(j,b(u))}function $u(u){return Ue.call(u)}function Bu(u,h){return u!=null&&h in Object(u)}function So(u,h,b,j,re){return u===h?!0:u==null||h==null||!kr(u)&&!us(h)?u!==u&&h!==h:Ou(u,h,So,b,j,re)}function Ou(u,h,b,j,re,Y){var le=nn(u),Me=nn(h),De=d,We=d;le||(De=tn(u),De=De==l?L:De),Me||(We=tn(h),We=We==l?L:We);var rt=De==L&&!He(u),st=We==L&&!He(h),Je=De==We;if(Je&&!rt)return Y||(Y=new zt),le||cf(u)?pi(u,h,b,j,re,Y):Yu(u,h,De,b,j,re,Y);if(!(re&a)){var pt=rt&&nt.call(u,"__wrapped__"),ht=st&&nt.call(h,"__wrapped__");if(pt||ht){var rn=pt?u.value():u,Ut=ht?h.value():h;return Y||(Y=new zt),b(rn,Ut,j,re,Y)}}return Je?(Y||(Y=new zt),Ku(u,h,b,j,re,Y)):!1}function Mu(u,h,b,j){var re=b.length,Y=re;if(u==null)return!Y;for(u=Object(u);re--;){var le=b[re];if(le[2]?le[1]!==u[le[0]]:!(le[0]in u))return!1}for(;++re<Y;){le=b[re];var Me=le[0],De=u[Me],We=le[1];if(le[2]){if(De===void 0&&!(Me in u))return!1}else{var rt=new zt,st;if(!(st===void 0?So(We,De,j,o|a,rt):st))return!1}}return!0}function Du(u){if(!kr(u)||rf(u))return!1;var h=bi(u)||He(u)?Sr:q;return h.test(Tn(u))}function Fu(u){return us(u)&&ko(u.length)&&!!B[Ue.call(u)]}function Vu(u){return typeof u=="function"?u:u==null?hf:typeof u=="object"?nn(u)?Zu(u[0],u[1]):Uu(u):mf(u)}function Hu(u){if(!mi(u))return wo(u);var h=[];for(var b in Object(u))nt.call(u,b)&&b!="constructor"&&h.push(b);return h}function zu(u){if(!kr(u))return sf(u);var h=mi(u),b=[];for(var j in u)j=="constructor"&&(h||!nt.call(u,j))||b.push(j);return b}function Uu(u){var h=Xu(u);return h.length==1&&h[0][2]?yi(h[0][0],h[0][1]):function(b){return b===u||Mu(b,u,h)}}function Zu(u,h){return ls(u)&&gi(h)?yi(ds(u),h):function(b){var j=df(b,u);return j===void 0&&j===h?uf(b,u):So(h,j,void 0,o|a)}}function Wu(u,h,b){for(var j=-1,re=h.length,Y={};++j<re;){var le=h[j],Me=u[le];b(Me,le)&&(Y[le]=Me)}return Y}function Gu(u){return function(h){return ui(h,u)}}function qu(u){if(typeof u=="string")return u;if(Ao(u))return li?li.call(u):"";var h=u+"";return h=="0"&&1/u==-i?"-0":h}function fi(u){return nn(u)?u:of(u)}function pi(u,h,b,j,re,Y){var le=re&a,Me=u.length,De=h.length;if(Me!=De&&!(le&&De>Me))return!1;var We=Y.get(u);if(We&&Y.get(h))return We==h;var rt=-1,st=!0,Je=re&o?new as:void 0;for(Y.set(u,h),Y.set(h,u);++rt<Me;){var pt=u[rt],ht=h[rt];if(j)var rn=le?j(ht,pt,rt,h,u,Y):j(pt,ht,rt,u,h,Y);if(rn!==void 0){if(rn)continue;st=!1;break}if(Je){if(!Ee(h,function(Ut,En){if(!Je.has(En)&&(pt===Ut||b(pt,Ut,j,re,Y)))return Je.add(En)})){st=!1;break}}else if(!(pt===ht||b(pt,ht,j,re,Y))){st=!1;break}}return Y.delete(u),Y.delete(h),st}function Yu(u,h,b,j,re,Y,le){switch(b){case $:if(u.byteLength!=h.byteLength||u.byteOffset!=h.byteOffset)return!1;u=u.buffer,h=h.buffer;case D:return!(u.byteLength!=h.byteLength||!j(new Qt(u),new Qt(h)));case p:case m:case T:return _i(+u,+h);case g:return u.name==h.name&&u.message==h.message;case C:case x:return u==h+"";case w:var Me=bn;case k:var De=Y&a;if(Me||(Me=Fn),u.size!=h.size&&!De)return!1;var We=le.get(u);if(We)return We==h;Y|=o,le.set(u,h);var rt=pi(Me(u),Me(h),j,re,Y,le);return le.delete(u),rt;case R:if(xo)return xo.call(u)==xo.call(h)}return!1}function Ku(u,h,b,j,re,Y){var le=re&a,Me=Io(u),De=Me.length,We=Io(h),rt=We.length;if(De!=rt&&!le)return!1;for(var st=De;st--;){var Je=Me[st];if(!(le?Je in h:nt.call(h,Je)))return!1}var pt=Y.get(u);if(pt&&Y.get(h))return pt==h;var ht=!0;Y.set(u,h),Y.set(h,u);for(var rn=le;++st<De;){Je=Me[st];var Ut=u[Je],En=h[Je];if(j)var Ci=le?j(En,Ut,Je,h,u,Y):j(Ut,En,Je,u,h,Y);if(!(Ci===void 0?Ut===En||b(Ut,En,j,re,Y):Ci)){ht=!1;break}rn||(rn=Je=="constructor")}if(ht&&!rn){var fs=u.constructor,ps=h.constructor;fs!=ps&&"constructor"in u&&"constructor"in h&&!(typeof fs=="function"&&fs instanceof fs&&typeof ps=="function"&&ps instanceof ps)&&(ht=!1)}return Y.delete(u),Y.delete(h),ht}function Ju(u){return ju(u,ff,ef)}function cs(u,h){var b=u.__data__;return nf(h)?b[typeof h=="string"?"string":"hash"]:b.map}function Xu(u){for(var h=Io(u),b=h.length;b--;){var j=h[b],re=u[j];h[b]=[j,re,gi(re)]}return h}function Yn(u,h){var b=je(u,h);return Du(b)?b:void 0}var Qu=Tr?Jt(Tr,Object):wi,ef=Tr?function(u){for(var h=[];u;)Oe(h,Qu(u)),u=At(u);return h}:wi,tn=$u;(Zn&&tn(new Zn(new ArrayBuffer(1)))!=$||xn&&tn(new xn)!=w||Er&&tn(Er.resolve())!=v||Wn&&tn(new Wn)!=k||en&&tn(new en)!=M)&&(tn=function(u){var h=Ue.call(u),b=h==L?u.constructor:void 0,j=b?Tn(b):void 0;if(j)switch(j){case Gn:return $;case qn:return w;case Co:return v;case ss:return k;case uu:return M}return h});function tf(u,h,b){h=ls(h,u)?[h]:fi(h);for(var j,re=-1,le=h.length;++re<le;){var Y=ds(h[re]);if(!(j=u!=null&&b(u,Y)))break;u=u[Y]}if(j)return j;var le=u?u.length:0;return!!le&&ko(le)&&hi(Y,le)&&(nn(u)||vi(u))}function hi(u,h){return h=h==null?c:h,!!h&&(typeof u=="number"||W.test(u))&&u>-1&&u%1==0&&u<h}function ls(u,h){if(nn(u))return!1;var b=typeof u;return b=="number"||b=="symbol"||b=="boolean"||u==null||Ao(u)?!0:O.test(u)||!Te.test(u)||h!=null&&u in Object(h)}function nf(u){var h=typeof u;return h=="string"||h=="number"||h=="symbol"||h=="boolean"?u!=="__proto__":u===null}function rf(u){return!!Hn&&Hn in u}function mi(u){var h=u&&u.constructor,b=typeof h=="function"&&h.prototype||wt;return u===b}function gi(u){return u===u&&!kr(u)}function yi(u,h){return function(b){return b==null?!1:b[u]===h&&(h!==void 0||u in Object(b))}}function sf(u){var h=[];if(u!=null)for(var b in Object(u))h.push(b);return h}var of=To(function(u){u=lf(u);var h=[];return F.test(u)&&h.push(""),u.replace(z,function(b,j,re,Y){h.push(re?Y.replace(N,"$1"):j||b)}),h});function ds(u){if(typeof u=="string"||Ao(u))return u;var h=u+"";return h=="0"&&1/u==-i?"-0":h}function Tn(u){if(u!=null){try{return zn.call(u)}catch(h){}try{return u+""}catch(h){}}return""}function To(u,h){if(typeof u!="function"||h&&typeof h!="function")throw new TypeError(r);var b=function(){var j=arguments,re=h?h.apply(this,j):j[0],Y=b.cache;if(Y.has(re))return Y.get(re);var le=u.apply(this,j);return b.cache=Y.set(re,le),le};return b.cache=new(To.Cache||Ht),b}To.Cache=Ht;function _i(u,h){return u===h||u!==u&&h!==h}function vi(u){return af(u)&&nt.call(u,"callee")&&(!Un.call(u,"callee")||Ue.call(u)==l)}var nn=Array.isArray;function Eo(u){return u!=null&&ko(u.length)&&!bi(u)}function af(u){return us(u)&&Eo(u)}function bi(u){var h=kr(u)?Ue.call(u):"";return h==y||h==_}function ko(u){return typeof u=="number"&&u>-1&&u%1==0&&u<=c}function kr(u){var h=typeof u;return!!u&&(h=="object"||h=="function")}function us(u){return!!u&&typeof u=="object"}function Ao(u){return typeof u=="symbol"||us(u)&&Ue.call(u)==R}var cf=Le?xe(Le):Fu;function lf(u){return u==null?"":qu(u)}function df(u,h,b){var j=u==null?void 0:ui(u,h);return j===void 0?b:j}function uf(u,h){return u!=null&&tf(u,h,Bu)}function Io(u){return Eo(u)?di(u):Hu(u)}function ff(u){return Eo(u)?di(u,!0):zu(u)}function pf(u,h){return u==null?{}:Wu(u,Ju(u),Vu(h))}function hf(u){return u}function mf(u){return ls(u)?Pe(ds(u)):Gu(u)}function wi(){return[]}t.exports=pf})($s,$s.exports);var hm=$s.exports;const mm=eo(hm);function Bs(t){return t?js(t,Mc):{}}function ea(t){return t?pm(t,Mc):{}}function cl(t,e){let n={};if(t!=null&&t.theme){const{brandColor:r,headerTextColor:s,headerBgColor:o,welcomeBgColor:a,welcomeTextColor:i,initialFormBgColor:c,agentBubbleColor:l,agentTextColor:d,customerBubbleColor:p,customerTextColor:m,buttonColors:{primary:{textColor:g,backgroundColor:y,hoverBackgroundColor:_},secondary:{textColor:w,backgroundColor:T,hoverBackgroundColor:L},outLine:{textColor:v,borderColor:C,backgroundColor:k,hoverBackgroundColor:x},transparent:{textColor:R=v,hoverBackgroundColor:M=x}={}}}=t.theme;n={chatThemeColor:r,chatHoverThemeColor:r,chatHeaderBackgroundColor:o,chatTitleTextColor:s,chatSubtitleTextColor:s,chatCloseButtonColor:s,chatTitleIconColor:g,welcomeMessageBackgroundColor:a,welcomeMessageTitleColor:i,welcomeMessageContentColor:i,initialFormBackgroundColor:c,botTextColor:d,botBackgroundColor:l,botAnchorTextColor:d,botAnchorTextColorVisited:d,userTextColor:m,userBackgroundColor:p,userAnchorTextColor:m,userAnchorTextColorVisited:m,customButtonBackgroundColor:y,customButtonColor:g,customButtonBorderColor:y,customButtonHoverBackgroundColor:_,customButtonHoverColor:g,customButtonHoverBorderColor:_,startChatButtonTextColor:g,startChatButtonBorderColor:y,startChatButtonBackgroundColor:y,startChatButtonHoverTextColor:g,startChatButtonHoverBorderColor:_,startChatButtonHoverBackgroundColor:_,startChatTransparentButtonTextColor:R,startChatTransparentButtonHoverBackgroundColor:M,replyTextColor:v,replyBorderColor:C,replyBackgroundColor:k,replyHoverTextColor:v,replyHoverBackgroundColor:x,buttonTextColor:w,buttonHoverTextColor:w,buttonBackgroundColor:T,buttonHoverBackgroundColor:L,chatConfirmButtonFontColor:g,chatConfirmButtonBackgroundColor:y,chatConfirmButtonHoverBackgroundColor:_}}return t!=null&&t.logoUrl&&(n={...n,chatTitleIcon:"url(".concat(t.logoUrl,")")}),e&&(n={...n,...e},e.chatTitleIcon&&(n={...n,chatTitleIcon:"url(".concat(e.chatTitleIcon,")")})),n}function Vi(t){return t?mm({chatTitleIcon:t.logoUrl,chatTitle:t.title,chatSubtitle:t.description},e=>!!e):{}}var Os=function(){return Os=Object.assign||function(e){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},Os.apply(this,arguments)};function Hi(t,e,n,r){function s(o){return o instanceof n?o:new n(function(a){a(o)})}return new(n||(n=Promise))(function(o,a){function i(d){try{l(r.next(d))}catch(p){a(p)}}function c(d){try{l(r.throw(d))}catch(p){a(p)}}function l(d){d.done?o(d.value):s(d.value).then(i,c)}l((r=r.apply(t,[])).next())})}function zi(t,e){var n={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,s,o,a;return a={next:i(0),throw:i(1),return:i(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function i(l){return function(d){return c([l,d])}}function c(l){if(r)throw new TypeError("Generator is already executing.");for(;a&&(a=0,l[0]&&(n=0)),n;)try{if(r=1,s&&(o=l[0]&2?s.return:l[0]?s.throw||((o=s.return)&&o.call(s),0):s.next)&&!(o=o.call(s,l[1])).done)return o;switch(s=0,o&&(l=[l[0]&2,o.value]),l[0]){case 0:case 1:o=l;break;case 4:return n.label++,{value:l[1],done:!1};case 5:n.label++,s=l[1],l=[0];continue;case 7:l=n.ops.pop(),n.trys.pop();continue;default:if(o=n.trys,!(o=o.length>0&&o[o.length-1])&&(l[0]===6||l[0]===2)){n=0;continue}if(l[0]===3&&(!o||l[1]>o[0]&&l[1]<o[3])){n.label=l[1];break}if(l[0]===6&&n.label<o[1]){n.label=o[1],o=l;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(l);break}o[2]&&n.ops.pop(),n.trys.pop();continue}l=e.call(t,n)}catch(d){l=[6,d],s=0}finally{r=o=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}var ll=function(){function t(e){this.options=e,this._traceId=0,this._methods=new Map,this._emitter=new vf,this._handlerOnMessageByBound=this.handlerOnMessage.bind(this),this.createService(),this.getListener().addEventListener("message",this._handlerOnMessageByBound,!1)}return t.jsonParseData=function(e,n){try{return JSON.parse(e)}catch(r){return n}},t.jsonStringifyData=function(e){try{return JSON.stringify(e)}catch(n){return""}},t.runHandler=function(e){return Hi(this,void 0,void 0,function(){var n,r;return zi(this,function(s){switch(s.label){case 0:return s.trys.push([0,2,,3]),[4,e()];case 1:return n=s.sent(),[2,{data:n,error:null}];case 2:return r=s.sent(),[2,{error:typeof r=="string"?r:r.message}];case 3:return[2]}})})},t.prototype.destroy=function(){this._emitter.removeAllListeners(),this._methods.clear(),this.getListener().removeEventListener("message",this._handlerOnMessageByBound,!1)},t.prototype.register=function(e,n){this._methods.set(e,n),this.log("Register ".concat(e),this._methods)},t.prototype.unregister=function(e){this._methods.delete(e),this.log("Unregister ".concat(e),this._methods)},t.prototype.trigger=function(e){for(var n=this,r=[],s=1;s<arguments.length;s++)r[s-1]=arguments[s];return new Promise(function(o){var a=n.createId();n.sendMessage({id:a,method:e,payload:r,type:"request"}),n.log("Trigger ".concat(e," | ").concat(a),r),n._emitter.once("response_".concat(a),function(i){o(i.payload),n.log("Receive ".concat(e," | ").concat(a),t.jsonStringifyData(i))})})},t.prototype.createId=function(){return"".concat(this.options.name,"_").concat(this._traceId++)},t.prototype.createService=function(){var e=this;this._emitter.on(this.options.topic,function(n){return Hi(e,void 0,void 0,function(){var r,s,o,a,i;return zi(this,function(c){switch(c.label){case 0:return r=n.id,s=n.payload,o=n.method,a=this._methods.get(o),a?[4,t.runHandler(function(){return a.apply(void 0,s)})]:[3,2];case 1:return i=c.sent(),this.sendMessage({id:r,method:o,payload:i,type:"response"}),[3,3];case 2:this.sendMessage({id:r,method:o,payload:{error:"No found method in service"},type:"response"}),c.label=3;case 3:return[2]}})})})},t.prototype.sendMessage=function(e){var n=this.options,r=n.sender,s=n.origin,o=n.topic,a=t.jsonStringifyData(Os(Os({},e),{topic:o}));if(!r.postMessage)throw new Error("The sender no found postMessage method please check the sender option");a&&r.postMessage(a,s||"*")},t.prototype.handlerOnMessage=function(e){var n=e.data;if(n){var r=t.jsonParseData(n,null);if(!(!r||r.topic!==this.options.topic)){var s=r.id,o=r.type;o==="request"&&this._emitter.emit(this.options.topic,r),o==="response"&&this._emitter.emit("response_".concat(s),r)}}},t.prototype.getListener=function(){return this.options.listener||window},t.prototype.log=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var s=this.options,o=s.debug,a=s.name;if(o){var i=new Date().toISOString(),c="[RPC] [".concat(i,"] [").concat(a,"] ").concat(e);console.groupCollapsed(c),n!=null&&n.length&&console.info.apply(console,n),console.groupEnd()}},Object.defineProperty(t.prototype,"methods",{get:function(){return this._methods},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"emitter",{get:function(){return this._emitter},enumerable:!1,configurable:!0}),t}();const gm=[Intl.DateTimeFormat().resolvedOptions().locale,"en-US"],ym={hour:"2-digit",minute:"2-digit"};function oo(t){return new Date(t).toLocaleTimeString(gm,ym)}function $a(t){return t<10?"0".concat(t):t}function _m(t){return new Date(t).getFullYear()}function vm(t){return $a(new Date(t).getMonth()+1)}function bm(t){return $a(new Date(t).getDate())}function wm(t){return $a(new Date(t).getHours())}function Cm(t){return new Date(t).getMinutes()}function xm(t){return new Date(t).getSeconds()}const Sm=/(\[[^[]*\])|([-_:/.,()\s]+)|(A|a|YYYY|YY?|MM?M?M?|Do|DD?|hh?|HH?|mm?|ss?|S{1,3}|z|ZZ?)/g,Tm={YYYY:_m,MM:vm,DD:bm,HH:wm,mm:Cm,ss:xm};function Em(t,e="YYYY-MM-DD"){const n=e.match(Sm);return n?n.map(s=>Tm[s]||s).filter(s=>!!s).reduce((s,o)=>(s+=typeof o=="function"?o(t):o,s),""):""}function km(){return Intl.DateTimeFormat().resolvedOptions().timeZone}const St=vr(()=>{const t=new ll({name:"Widget",sender:window.parent,topic:Ge.Topic,debug:!1});t.register(Ge.Methods.FrameOpened,()=>{S.getState().setIsFrameOpened(!0)}),t.register(Ge.Methods.UpdateAppConfigs,n=>{Ms.getState().update(n)}),t.register(Ge.Methods.UpdateContext,n=>{Ms.getState().updateContext(n)});const e=async()=>{const n=await t.trigger(Ge.Methods.GetTdAccessToken);return n!=null&&n.data?(S.getState().setCredentials({tdAccessToken:n.data}),n.data):""};return{frameReady:()=>t.trigger(Ge.Methods.FrameReady),frameResize:n=>t.trigger(Ge.Methods.FrameResize,n),maximize:()=>t.trigger(Ge.Methods.Maximize),minimize:async()=>{const n=await t.trigger(Ge.Methods.Minimize);return S.getState().setIsFrameOpened(!1),n},getAllConfig:()=>t.trigger(Ge.Methods.GetAllConfig),getCredentials:n=>t.trigger(Ge.Methods.GetCredentials,n),setBadge:n=>t.trigger(Ge.Methods.SetBadge,n),downloadTranscript:async n=>{const r=a=>{const i="".concat(cr.t("downloadTranscriptFileName"),"-").concat(Em(new Date,"YYYY-MM-DD-HH-mm"),".txt"),c=km();return t.trigger(Ge.Methods.DownloadTranscript,{token:a,interactionId:n,fileName:i,timezone:c})};let s=S.getState().credentials.tdAccessToken;s||(s=await e());const o=await r(s);return o!=null&&o.data?o:(s=await e(),r(s))},previewReady:async()=>{await t.trigger(Ge.Methods.PreviewReady)},onPreviewConfigChange:n=>{t.register(Ge.Methods.UpdatePreviewConfig,r=>{n(r)})},conversationStart:()=>t.trigger(Ge.Methods.ConversationStart)}}),IS=()=>St(_n(t=>({maximize:t.maximize,frameResize:t.frameResize}))),dl=vr((t,e)=>({page:"Conversation",config:new cn,reset:()=>{t({config:new cn})},init:async()=>{St.getState().onPreviewConfigChange(r=>{var l,d;const{title:s,description:o,logoUrl:a}=((l=r==null?void 0:r.widgetSettings)==null?void 0:l.appearance)||{},i=new cn().options;t(p=>({page:r.page,config:{...p.config,appearanceConfig:{...p.config.appearanceConfig,...r.widgetSettings},options:{...new cn().options,...e().config.options,chatTitle:s||(i==null?void 0:i.chatTitle),chatSubtitle:o||i.chatSubtitle,chatTitleIcon:a||i.chatTitleIcon},participantName:r.userName}}));const c=Bs(cl((d=r==null?void 0:r.widgetSettings)==null?void 0:d.appearance));Yo(document.documentElement,c)});const n=await St.getState().getAllConfig();if(n!=null&&n.data){const{isMobile:r,type:s}=Dc(),{appProps:o,appConfig:a,context:i,touchpoint:c,participantName:l}=n.data,d=new cn,p=await Ls.changeLanguage(a==null?void 0:a.languageCode);document.documentElement.className=s,d.isMobile=r,d.deviceType=s,d.appConfig={...e().config.appConfig,...a,languageCode:p},d.appProps=o,d.context=i,d.participantName=l;try{c.config&&(d.appearanceConfig=JSON.parse(c.config))}catch(g){console.log("Error parsing appearance config, using default appearance config")}d.options={...e().config.options,...ea(a==null?void 0:a.styles)},d.styles=(a==null?void 0:a.styles)||{},t({config:d});const m=Bs(a==null?void 0:a.styles);Yo(document.documentElement,m),await St.getState().previewReady()}},update:()=>Promise.resolve(),updateContext:()=>{}})),RS=()=>dl(_n(t=>({page:t.page,chatTitle:t.config.options.chatTitle,chatSubtitle:t.config.options.chatSubtitle,enableEmoji:t.config.appConfig.enableEmoji,enableAttachments:t.config.appConfig.enableAttachments,enableValidation:t.config.appConfig.enableValidation,welcomeMessage:t.config.appearanceConfig.initialScreen.welcomeMessage,showInitialScreen:t.config.appearanceConfig.initialScreen.showInitialScreen,controls:t.config.appearanceConfig.initialScreen.controls,showCloseConversationButton:t.config.appearanceConfig.generalSettings.showCloseConversationButton,showDownloadTranscriptButton:t.config.appearanceConfig.generalSettings.showChatTranscriptsDownloadButton,showTypingIndicatorButton:t.config.appearanceConfig.generalSettings.showTypingIndicatorButton,context:t.config.context,isDisabled:t.page==="InitialScreen"&&!t.config.appearanceConfig.initialScreen.showInitialScreen}))),ys=ut.getSubLogger({name:"useConfig"}),Ms=vr((t,e)=>{let n=!1;return{config:new cn,reset:()=>{t({config:new cn}),n=!1},init:async()=>{var s,o;if(n)return;n=!0;const r=await St.getState().getAllConfig();if(r!=null&&r.data){tr.init(r.data);const{isMobile:a,type:i}=Dc(),{appProps:c,appConfig:l,touchpoint:d,context:p,injectorWindowHostname:m}=r.data,g=new cn,y=await Ls.changeLanguage(l==null?void 0:l.languageCode);document.documentElement.className=i,g.isMobile=a,g.deviceType=i,g.injectorWindowHostname=m,g.enableSplitTwilioBootstrap=d.enable_split_twilio_bootstrap,g.feedbackFlowId=d.feedback_flow_id,g.appConfig={...e().config.appConfig,...l,languageCode:y},g.appProps=c,g.context=p,g.appearanceConfig=Fc(d.config,g.appearanceConfig,w=>{ys.error("Error parsing touchpoint appearance config",w)}),g.styles=Bs(l.styles),g.options={...e().config.options,...Object.assign(Vi((s=g==null?void 0:g.appearanceConfig)==null?void 0:s.appearance),ea(l.styles))},t({config:g});const _=cl((o=g==null?void 0:g.appearanceConfig)==null?void 0:o.appearance,Bs(l.styles));Yo(document.documentElement,_),ys.info("Received configuration: touchpointId=".concat(c==null?void 0:c.touchpointId," appConfig=").concat(Fe(l)," appProps=").concat(Fe(c)," touchpoint=").concat(Fe(d))),S.setState({enableInitialForm:g.appearanceConfig.initialScreen.showInitialScreen}),S.getState().setLayoutDirection(y)}},update:async({appConfig:r})=>{var a;if(!n){ys.warn("Update app configs failed because the config is not initialized yet.");return}const{config:s}=e(),o=await Ls.changeLanguage(r==null?void 0:r.languageCode);s.appConfig={...s.appConfig,...r,languageCode:o},s.options={...s.options,...Object.assign(Vi((a=s==null?void 0:s.appearanceConfig)==null?void 0:a.appearance),ea(r.styles))},t({config:s}),S.getState().setLayoutDirection(o)},updateContext:r=>{n||ys.warn("Update context failed because the config is not initialized yet.");const{config:s}=e();s.context={...r},t({config:s})}}}),Am=()=>Ms(_n(t=>({chatTitle:t.config.options.chatTitle,chatSubtitle:t.config.options.chatSubtitle,enableEmoji:t.config.appConfig.enableEmoji,enableAttachments:t.config.appConfig.enableAttachments,enableValidation:t.config.appConfig.enableValidation,enableUserInput:t.config.appConfig.enableUserInput,showInitialScreen:t.config.appearanceConfig.initialScreen.showInitialScreen,welcomeMessage:t.config.appearanceConfig.initialScreen.welcomeMessage,controls:t.config.appearanceConfig.initialScreen.controls,showCloseConversationButton:t.config.appearanceConfig.generalSettings.showCloseConversationButton,showDownloadTranscriptButton:t.config.appearanceConfig.generalSettings.showChatTranscriptsDownloadButton,showTypingIndicatorButton:t.config.appearanceConfig.generalSettings.showTypingIndicatorButton,context:t.config.context,languageCode:t.config.appConfig.languageCode}))),Im=t=>t.config.appProps,Rm=t=>t.config.styles,bt=t=>t.config.options,Lm=t=>t.config.appearanceConfig.initialScreen,Pm=t=>t.config.appearanceConfig.chat,ul=t=>t.config.appearanceConfig.generalSettings,ve=/preview.html/gi.test(window.location.href)?dl:Ms,LS=()=>ve(Lm),PS=()=>ve(Im),NS=()=>ve(Rm);function Nm(){const t=new URL(window.location.href);return new URLSearchParams(t.search)}function es(){return Nm().get("touchpointId")||""}const Ui=()=>typeof window.BroadcastChannel=="function",_s=ut.getSubLogger({name:"useBoardCast"}),yt=vr()(()=>{const t="td-board-cast-".concat(es()||"unknown-touchpoint-id"),e=new Map;let n=!1,r=null;const s=(a,i=[])=>{if(a){const c=e.get(a);c==null||c.forEach(l=>l(...i)),_s.debug("Received tab event=".concat(a," data=").concat(Fe(i)))}},o=a=>{if(a.key===t&&a.newValue){const{event:i,data:c}=Fc(a.newValue,{});s(i,c),zf(t)}};return{init(){n||(Ui()?(_s.debug("Using tab events for broadcast channel namespace=".concat(t)),r=new BroadcastChannel(t),r.onmessage=a=>{const{event:i,data:c}=a.data;s(i,c)}):(_s.debug("Using tab events for storage changed namespace=".concat(t)),window.addEventListener("storage",o)),n=!0)},on(a,i){const c=e.get(a)||[];e.set(a,[...c,i])},emit(a,...i){Ui()?r==null||r.postMessage({event:a,data:i}):Hf(t,Fe({event:a,data:i})),_s.debug("Emit tab from event=".concat(a," data=").concat(Fe(i)))},off(a,i){var c;e.has(a)&&e.set(a,((c=e.get(a))==null?void 0:c.filter(l=>l!==i))||[])},destroy(){var a;(a=r==null?void 0:r.close)==null||a.call(r),r=null,window.removeEventListener("storage",o),e.clear(),n=!1},count(){const a={};return e.forEach((i,c)=>{a[c]=i}),a}}}),jm=t=>({on:t.on,off:t.off,emit:t.emit}),jS=()=>yt(_n(jm));function Bo(){return{showScreenLoading:!1,layoutDirection:Nr.ltr,page:Se.Start,events:{},enableInitialForm:!1,formData:null,hasInitialized:!1,userInputAreaRef:null,interactionId:"",shouldLoadFeedback:!1,feedbackLink:"",feedbackStatus:{status:"init",message:"",height:0},typingMode:"agent",isFrameOpened:!1,identity:"",credentials:{accessToken:"",roomId:"",region:"",tdAccessToken:""},chatContentScroll:{headerVisible:!1,footerVisible:!1,scrollTop:0,scrollOver:0,scrollPercent:0},initialScreenScroll:{headerVisible:!1,footerVisible:!1},initialScreenHeight:Oc,unreadMessageCount:0}}const Oo=ut.getSubLogger({name:"useApp"}),$m="td-app-".concat(es()||"unknown-touchpoint-id");let Ir=null;const S=vr()(Rc(Lc((t,e)=>({...Bo(),go:(n,r)=>{var a,i,c;const{page:s,events:o}=e();if(s!==n){const l="leave_".concat(s),d="enter_".concat(n),p="".concat(s,"_to_").concat(n);(a=o[l])==null||a.forEach(m=>m(r)),t({page:n}),(i=o[d])==null||i.forEach(m=>m(r)),(c=o[p])==null||c.forEach(m=>m(r)),Oo.debug("Going from ".concat(s," to ").concat(n," with params=").concat(Fe(r!=null?r:{})))}else Oo.debug("Going to same ".concat(n," with params=").concat(Fe(r!=null?r:{})))},getInitialPage:()=>{const{enableInitialForm:n}=e();return n?Se.InitialScreen:Se.Conversation},is:n=>(Array.isArray(n)?n:[n]).includes(e().page),isNot:n=>!(Array.isArray(n)?n:[n]).includes(e().page),on:(n,r)=>{t(s=>{var o;return s.events[n]||(s.events[n]=[]),(o=s.events[n])==null||o.push(r),s})},off:(n,r)=>{const{events:s}=e();s[n]&&t(o=>{var a;return o.events[n]=(a=s[n])==null?void 0:a.filter(i=>i!==r),o})},reset:n=>{if(n){const r=Array.isArray(n)?n:[n],s=Bo(),o=r.reduce((a,i)=>({...a,[i]:s[i]}),{});t(o)}else t(Bo())},emit:(n,r)=>{var o;const{events:s}=e();s[n]&&((o=s[n])==null||o.forEach(a=>a(r)))},focusUserInputArea:()=>{const{userInputAreaRef:n}=e();n==null||n.focus()},setIsFrameOpened:n=>{t({isFrameOpened:n})},createIdentity:(n=!1,r="")=>{var o;let s=e().identity;return(n||!s)&&(s=n&&r?r:"widget.".concat((o=ve.getState().config)==null?void 0:o.injectorWindowHostname,"-").concat($c()),t({identity:s})),s},setCredentials:n=>{const r={...e().credentials,...n};return t({credentials:r}),r},hasProviderCredentials:()=>{const{accessToken:n,roomId:r}=e().credentials;return!!(n&&r)},setFormData:n=>{t({formData:n})},setLayoutDirection:n=>{const{layoutDirection:r}=e(),s=Bc.indexOf(n)>-1?Nr.rtl:Nr.ltr;r!==s&&t({layoutDirection:s})},hiddenScreenLoading:()=>{Ir&&(clearTimeout(Ir),Ir=null),e().showScreenLoading&&t({showScreenLoading:!1})},enableScreenLoading:(n,r=!1)=>{e().showScreenLoading||(t({showScreenLoading:!0}),r&&yt.getState().emit(Ct.enableScreenLoading,n),Ir=setTimeout(()=>{t({showScreenLoading:!1}),Ir=null},n))},updateChatContentScroll:n=>{const r={...e().chatContentScroll,...n};r.footerVisible||r.scrollPercent===100?t({chatContentScroll:r,unreadMessageCount:0}):t({chatContentScroll:r})},updateInitialScreenScroll:n=>{t({initialScreenScroll:{...e().initialScreenScroll,...n}})},updateInitialScreenHeight:n=>{t({initialScreenHeight:n})},updateFeedbackStatus:n=>{Oo.info("Received feedback page message current=".concat(Fe(n)," prev=").concat(Fe(e().feedbackStatus))),t({feedbackStatus:n})},enableLoadFeedback:()=>{e().shouldLoadFeedback||t({shouldLoadFeedback:!0})},updateUnreadMessageCount:n=>{n>0&&!e().chatContentScroll.footerVisible?t({unreadMessageCount:n}):t({unreadMessageCount:0})}}),{name:$m,partialize:t=>es()?{isFrameOpened:t.isFrameOpened,credentials:t.credentials,identity:t.identity}:{}})));function fl(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(n=fl(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function $n(){for(var t,e,n=0,r="",s=arguments.length;n<s;n++)(t=arguments[n])&&(e=fl(t))&&(r&&(r+=" "),r+=e);return r}const Bm="_AvatarBox_15kim_11",Zi={AvatarBox:Bm},Om=E.lazy(()=>Ce(()=>import("./DefaultAgentAvatarIcon-DavJHBcm.js"),__vite__mapDeps([0,1,2,3]),import.meta.url)),Mm=E.lazy(()=>Ce(()=>import("./DefaultAvatarIcon-BIQLaLoM.js"),__vite__mapDeps([4,1,2,3]),import.meta.url)),pl=({url:t,className:e,type:n="system"})=>t?f.jsx("div",{className:$n(Zi.AvatarBox,e),"data-testid":"avatar",style:{background:"url(".concat(t,") center center / cover no-repeat")}}):f.jsx("div",{className:$n(Zi.AvatarBox,e),"data-testid":"avatar",children:n==="agent"?f.jsx(E.Suspense,{children:f.jsx(Om,{})}):f.jsx(E.Suspense,{children:f.jsx(Mm,{})})}),Dm="static-bottom-area";function Fm(){return f.jsx("div",{id:Dm})}const Vm=()=>Ce(()=>import("./Buttons-DKZzT3nn.js"),__vite__mapDeps([5,1,6]),import.meta.url),Hm=E.lazy(Vm),zm=()=>Ce(()=>import("./Carousel-CnRUNKL3.js"),__vite__mapDeps([7,1,6,8]),import.meta.url),Um=E.lazy(zm),Zm="_systemBubble_b47m5_11",Wm="_bubble_b47m5_11",Gm="_messageContainer_b47m5_11",qm="_message_b47m5_11",Ym="_error_b47m5_11",Km="_loading_b47m5_11",Jm="_rounded_b47m5_11",Xm="_normal_b47m5_11",Qm="_transparent_b47m5_21",eg="_avatar_b47m5_31",tg="_relative_b47m5_57",ng="_status_b47m5_66",rg="_nameAndTimestamp_b47m5_71",sg="_name_b47m5_71",og="_divide_b47m5_85",ag="_timestamp_b47m5_94",ig="_received_b47m5_97",cg="_sent_b47m5_104",lg="_inSeries_b47m5_116",dg="_lastMessage_b47m5_119",Ne={systemBubble:Zm,bubble:Wm,messageContainer:Gm,message:qm,error:Ym,loading:Km,rounded:Jm,normal:Xm,transparent:Qm,avatar:eg,relative:tg,status:ng,nameAndTimestamp:rg,name:sg,divide:og,timestamp:ag,received:ig,sent:cg,inSeries:lg,lastMessage:dg};function ug(t){let e;switch(t){case"text":case"rich_text":case"buttons":case"quick_replies":case"file":case"error":case"image":case"video":case"audio":case"carousel":case"typing":return Ne.bubble;case"system":return Ne.systemBubble;default:return e=t,console.warn('Type "'.concat(e,'" is not supported')),Ne.bubble}}function fg(t){let e;switch(t){case"text":case"quick_replies":case"file":case"error":case"typing":case"system":return Ne.normal;case"image":case"video":case"audio":return Ne.transparent;case"rich_text":case"buttons":return Ne.rounded;case"carousel":return Ne.relative;default:return e=t,console.warn('Type "'.concat(e,'" is not supported')),Ne.normal}}class hl extends E.Component{constructor(e){super(e),this.state={hasError:!1}}componentDidCatch(e,n){var r,s;(s=(r=this.props).onError)==null||s.call(r,e,n),this.setState({hasError:!0})}render(){return this.state.hasError?this.props.fallback:this.props.children}}const Ba=({type:t,className:e,children:n})=>f.jsx("div",{className:$n(Ne.message,fg(t),e),"data-testid":"message-box",children:n}),pg="Failed to load dynamically imported message.",hg=({type:t,errorMessage:e})=>f.jsx(Ba,{className:Ne.error,type:t,children:e||pg}),mg="_spinner_tzosf_11",gg="_rotation_tzosf_1",yg="_tiny_tzosf_23",_g="_small_tzosf_28",vg="_medium_tzosf_33",Wi={spinner:mg,rotation:gg,tiny:yg,small:_g,medium:vg},ao=({size:t="small"})=>f.jsx("div",{className:$n(Wi.spinner,Wi[t]),"data-testid":"sending"}),bg=({type:t})=>f.jsx(Ba,{className:Ne.loading,type:t,children:f.jsx(ao,{})}),wg=({type:t,errorMessage:e,children:n,onError:r})=>f.jsx(hl,{onError:r,fallback:f.jsx(hg,{type:t,errorMessage:e}),children:f.jsx(E.Suspense,{fallback:f.jsx(bg,{type:t}),children:f.jsx(Ba,{type:t,children:n})})});function Cg(t){const{name:e,avatar:n,status:r,timestamp:s,children:o,alignment:a,type:i,errorMessage:c,onError:l,isLastMessage:d=!1,isInSeries:p=!1}=t;return f.jsxs("div",{className:$n(ug(i),{[Ne.sent]:a==="sent",[Ne.received]:a==="received",[Ne.inSeries]:p,[Ne.lastMessage]:d}),"data-qa":i,"data-testid":i,children:[n&&f.jsx("div",{className:Ne.avatar,children:n}),f.jsxs("div",{className:Ne.messageContainer,children:[f.jsx(wg,{type:i,errorMessage:c,onError:l,children:o}),r&&f.jsx("div",{className:Ne.status,children:r})]}),(e||s)&&f.jsxs("div",{className:Ne.nameAndTimestamp,children:[e&&f.jsx("div",{className:Ne.name,children:e}),e&&s&&f.jsx("div",{className:Ne.divide,children:f.jsx("span",{children:"·"})}),s&&f.jsx("div",{className:Ne.timestamp,children:s})]})]})}const xg="_bottom_zl3d8_6",Sg="_timestamp_zl3d8_10",Tg="_name_zl3d8_11",Oa={bottom:xg,timestamp:Sg,name:Tg};function Eg(t){const{url:e,align:n,type:r}=t;return f.jsx(pl,{className:$n({[Oa.bottom]:n==="bottom"}),url:e,type:r})}const ml=({name:t})=>f.jsx("span",{className:Oa.name,children:t});ml.whyDidYouRender=!0;const kg="_small_1ri7f_6",Ag="_medium_1ri7f_11",Ig="_large_1ri7f_16",Rg="_fail_1ri7f_21",Gi={small:kg,medium:Ag,large:Ig,fail:Rg},Lg=({size:t="small",onResend:e})=>f.jsx("button",{onClick:e,"data-testid":"fail","aria-label":"failed to send",className:$n(Gi.fail,Gi[t]),children:f.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%",fill:"none",children:[f.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9.99996 1.66699C5.39996 1.66699 1.66663 5.40033 1.66663 10.0003C1.66663 14.6003 5.39996 18.3337 9.99996 18.3337C14.6 18.3337 18.3333 14.6003 18.3333 10.0003C18.3333 5.40033 14.6 1.66699 9.99996 1.66699ZM9.16663 14.167V12.5003H10.8333V14.167H9.16663ZM9.16663 5.83366V10.8337H10.8333V5.83366H9.16663Z",fill:"#F5222D"}),f.jsx("mask",{id:"mask0_3590_3492",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:"1",y:"1",width:"18",height:"18",children:f.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9.99996 1.66699C5.39996 1.66699 1.66663 5.40033 1.66663 10.0003C1.66663 14.6003 5.39996 18.3337 9.99996 18.3337C14.6 18.3337 18.3333 14.6003 18.3333 10.0003C18.3333 5.40033 14.6 1.66699 9.99996 1.66699ZM9.16663 14.167V12.5003H10.8333V14.167H9.16663ZM9.16663 5.83366V10.8337H10.8333V5.83366H9.16663Z",fill:"white"})}),f.jsx("g",{mask:"url(#mask0_3590_3492)"})]})});function Pg(t){const{status:e,onResend:n}=t;if(e==="sending")return f.jsx(ao,{});if(e==="failure")return f.jsx(Lg,{onResend:n})}function Ng(t){const{text:e}=t;return f.jsx("span",{className:Oa.timestamp,children:e})}const jg=()=>Ce(()=>import("./TextMessage-c1bQfRS1.js"),__vite__mapDeps([9,1,6,10]),import.meta.url),Ss=E.lazy(jg),$g="_buttonsText_1x53l_11",Bg="_container_1x53l_17",Og="_button_1x53l_11",qi={buttonsText:$g,container:Bg,button:Og},Mg=({text:t,linkProtocol:e,linkTarget:n,buttons:r,onButtonClick:s})=>f.jsxs("div",{className:qi.vaButtons,children:[f.jsx(Ss,{className:qi.buttonsText,text:t,linkProtocol:e,linkTarget:n}),f.jsx(Hm,{buttons:r,onClick:s})]}),Dg=()=>Ce(()=>import("./HtmlMessage-DpdQSChM.js"),__vite__mapDeps([11,1,12]),import.meta.url),Fg=E.lazy(Dg),gl=new Map;function Yi(t){return gl.get(t)}function Vg(t,e){gl.set(t,e)}function Hg(t,e){return n=>{const r=n.identity;if(!Yi(r)){const a=new Ff(e(n));Vg(r,a)}const s=Yi(r).load(),o={...n,...s};return f.jsx(t,{...o})}}const zg=()=>Ce(()=>import("./MediaMessage-DDwtx2nI.js"),__vite__mapDeps([13,1,6,14]),import.meta.url),Ug=E.lazy(async()=>{const t=(await zg()).default;return{default:Hg(t,async n=>{const{getContentTemporaryUrl:r}=n;if(r){const s=await r();if(s)return{url:s}}return{}})}}),Zg=()=>Ce(()=>import("./QuickReplyMessage-DBgNhUo0.js"),__vite__mapDeps([15,1,6,16]),import.meta.url),Wg=E.lazy(Zg),Gg={"system-message":"_system-message_xyb9s_6"},qg=({children:t})=>f.jsx("p",{className:Gg["system-message"],"data-qa":"system message",children:t}),Yg="_loading_11a6b_11",Kg="_blink_11a6b_1",Jg={loading:Yg,blink:Kg},Xg=()=>f.jsxs("div",{className:Jg.loading,"data-testid":"typing-message",children:[f.jsx("span",{}),f.jsx("span",{}),f.jsx("span",{})]}),Qg=({sid:t,tid:e,enableRTL:n,messageItem:r,onButtonClick:s,onMediaSourceError:o,linkProtocol:a,linkTarget:i,isLastMessage:c=!1,errorMessageText:l,onMediaLoadedData:d})=>{const p=r.type;let m;const g={linkProtocol:a,linkTarget:i};switch(p){case"text":return f.jsx(Ss,{...r,...g});case"quick_replies":return f.jsx(Wg,{...r,...g,isLastMessage:c,onButtonClick:s});case"carousel":return f.jsx(Um,{enableRTL:n,items:r.cards,onButtonClick:s,onError:o});case"buttons":return f.jsx(Mg,{...g,text:r.text,buttons:r.buttons,onButtonClick:s});case"rich_text":return f.jsx(Fg,{html:r.html});case"video":case"audio":case"file":case"image":return f.jsx(Ug,{identity:e||t,onMediaLoadedData:d,onError:o,type:r.type,url:r.url||"",getContentTemporaryUrl:r.getContentTemporaryUrl,children:r.children});case"typing":return f.jsx(Xg,{});case"system":return f.jsx(qg,{...r});case"error":return f.jsx(Ss,{text:l||r.error_message,...g});default:return m=p,f.jsx(Ss,{text:'Type "'.concat(m,'" is not supported'),...g})}},yl=({sid:t,tid:e,enableRTL:n=!1,hasName:r=!1,hasAvatar:s=!1,hasTimestamp:o=!1,status:a,avatarUrl:i,avatarType:c,avatarVerticalAlign:l,formattedTime:d,participantName:p="",alignment:m,linkProtocol:g="https",linkTarget:y="_blank",isLastMessage:_=!1,isInSeries:w=!1,onButtonClick:T,onResend:L,onMediaSourceError:v,errorMessageText:C,onMessageError:k,onMediaLoadedData:x,...R})=>{const M=a!=="success"&&m==="sent",D=R;return f.jsx(Cg,{status:M&&f.jsx(Pg,{status:a,onResend:L}),name:r&&f.jsx(ml,{name:p}),avatar:s&&f.jsx(Eg,{align:l,url:i,type:c}),timestamp:o&&f.jsx(Ng,{text:d}),alignment:m,type:D.type,errorMessage:C,onError:k,isLastMessage:_,isInSeries:w,children:f.jsx(Qg,{sid:t,tid:e,enableRTL:n,messageItem:D,alignment:m,linkProtocol:g,linkTarget:y,isLastMessage:_,errorMessageText:C,onButtonClick:T,onMediaSourceError:v,onMediaLoadedData:x})})};yl.whyDidYouRender=!0;const _l=E.memo(yl),ey="_error_2hw0o_11",ty="_message_2hw0o_20",ny="_retry_2hw0o_27",Mo={error:ey,message:ty,retry:ny};function $S(t){const{onRetry:e}=t;return f.jsxs("div",{className:Mo.error,children:[f.jsx("p",{className:Mo.message,children:"There was a problem while trying to load the widget"}),f.jsx("button",{className:Mo.retry,onClick:e,children:"Try again"})]})}const vl=E.createContext({element:null}),ry=()=>{const t=E.useContext(vl);if(!t.element)throw new Error("You must use a PortalProvider to get a portal.");return t};function sy({children:t}){const{element:e}=ry();return bf.createPortal(t,e)}const Ki="tdw-portal-container";function BS(t){const{children:e}=t,[n,r]=E.useState(null);E.useLayoutEffect(()=>{const o=document.getElementById(Ki);r(o)},[]);const s=E.useMemo(()=>({element:n}),[n]);return f.jsxs(vl.Provider,{value:s,children:[n?e:null,f.jsx("div",{id:Ki})]})}const Ma=t=>{const{attributes:e,author:n}=t,r=e;return r!=null&&r.is_virtual_agent?"va":r!=null&&r.agentId?"agent":n==="system"?"system":"contact"},bl=t=>{const{attributes:e}=t,n=e;return n!=null&&n.agentId?n.agentId:""},oy=t=>{const{appearanceConfig:e,options:n}=ve.getState().config,{displayAgentsName:r,displayAutopilotsAvatar:s,autopilotsAvatar:o}=e.generalSettings,{botIcon:a}=n;switch(t){case"agent":return{url:a,type:r?"agent":"system"};case"va":return{url:s&&o?o:a};case"system":return{url:a};default:return}},wl=t=>{if(t!=="contact")return oy(t)},Cl=({role:t,agentName:e=""})=>{const{appearanceConfig:n}=ve.getState().config,{displayAgentsName:r,displayAutopilotsName:s,autopilotsName:o}=n.generalSettings;switch(t){case"contact":return"contactName";case"va":return s?o?o.trim():"autopilotsName":"";case"agent":return r?e:"";default:return""}},ay=t=>{var o;const e=t.attributes;if(!((o=e==null?void 0:e.action)!=null&&o.metadata))return;const{cur_identified_id:n,cur_participant_type:r,cur_display_name:s}=e.action.metadata;r==="LIVE_AGENT"&&Ve.getState().setAssigneeName(n,s)},xl=t=>{var s;const e=Ma(t),n=((s=t.attributes)==null?void 0:s.agentId)||"",r=Ve.getState().getAssigneeName(n);return Cl({role:e,agentName:r})},Da="TYPING_MESSAGE_ID",iy={tid:Da,sid:"typing",status:"success",alignment:"received",timestamp:0,formattedTime:"",items:[{type:"typing"}]};function io(t){return t===Da}function cy(t){t==null||t(Da)}function ta({role:t,agentName:e}){const n=wl(t),r=Cl({role:t,agentName:e});return{...iy,role:t,avatar:n,participantName:r}}function ly(t,e,n,r){const s=Date.now(),o=e.get("file"),a=o instanceof Blob?URL.createObjectURL(o):"";return{sid:"",alignment:"sent",tid:t,status:"sending",items:[{type:n,url:a,smart_text:{key:"download"}}],timestamp:s,formattedTime:oo(s),...r}}function dy(t,e,n){const r=Date.now();return{sid:"",alignment:"sent",tid:t,status:"sending",items:[{type:"text",text:e}],timestamp:r,formattedTime:oo(r),...n}}function uy(t){const{sid:e,index:n}=t,r=bl(t),s=Ma(t),o=xl(t);return{index:n,sid:e,rid:r,role:s,participantName:o,status:"success"}}const fy=t=>{var g;const e=t.attributes;if(!((g=e==null?void 0:e.action)!=null&&g.metadata))return!0;const{cur_identified_id:n,cur_participant_type:r,cur_display_name:s,pre_identified_id:o,pre_participant_type:a}=e.action.metadata,{appearanceConfig:i}=ve.getState().config,{displayAgentsName:c,agentsNameDisplayRule:l}=i.generalSettings;return!c||!s?!0:!a&&r==="VIRTUAL_AGENT"||n===o||l==="same name"&&a==="LIVE_AGENT"&&r==="LIVE_AGENT"};function py(t){return t!==null&&!Array.isArray(t)&&typeof t=="object"&&t.constructor===Object}function hy(t){return[{type:"text",text:t.text_response}]}function my(t){return t.content.map(e=>({type:"rich_text",html:e}))}const gy=new RegExp("([\\p{Ll}\\d])(\\p{Lu})","gu"),yy=new RegExp("(\\p{Lu})([\\p{Lu}][\\p{Ll}])","gu"),_y=new RegExp("(\\d)\\p{Ll}|(\\p{L})\\d","u"),vy=/[^\p{L}\d]+/giu,Ji="$1\0$2",Xi="";function Sl(t){let e=t.trim();e=e.replace(gy,Ji).replace(yy,Ji),e=e.replace(vy,"\0");let n=0,r=e.length;for(;e.charAt(n)==="\0";)n++;if(n===r)return[];for(;e.charAt(r-1)==="\0";)r--;return e.slice(n,r).split(/\0/g)}function by(t){var n;const e=Sl(t);for(let r=0;r<e.length;r++){const s=e[r],o=_y.exec(s);if(o){const a=o.index+((n=o[1])!=null?n:o[2]).length;e.splice(r,1,s.slice(0,a),s.slice(a))}}return e}function wy(t,e){var o;const[n,r,s]=Sy(t,e);return n+r.map(xy(e==null?void 0:e.locale)).join((o=e==null?void 0:e.delimiter)!=null?o:" ")+s}function Cy(t,e){return wy(t,{delimiter:"_",...e})}function xy(t){return t===!1?e=>e.toLowerCase():e=>e.toLocaleLowerCase(t)}function Sy(t,e={}){var i,c,l;const n=(i=e.split)!=null?i:e.separateNumbers?by:Sl,r=(c=e.prefixCharacters)!=null?c:Xi,s=(l=e.suffixCharacters)!=null?l:Xi;let o=0,a=t.length;for(;o<t.length;){const d=t.charAt(o);if(!r.includes(d))break;o++}for(;a>o;){const d=a-1,p=t.charAt(d);if(!s.includes(p))break;a=d}return[t.slice(0,o),n(t.slice(o,a)),t.slice(a)]}const Ty=t=>t!==null&&typeof t=="object";function Ey(t){return function e(n,r=1,s){if(r===0||!Ty(n))return n;if(Array.isArray(n))return n.map(a=>e(a,r-1,s));const o=Object.create(Object.getPrototypeOf(n));return Object.keys(n).forEach(a=>{const i=n[a],c=t(a,s),l=e(i,r-1,s);o[c]=l}),o}}const ky=Ey(Cy);var pe;(function(t){t.assertEqual=s=>s;function e(s){}t.assertIs=e;function n(s){throw new Error}t.assertNever=n,t.arrayToEnum=s=>{const o={};for(const a of s)o[a]=a;return o},t.getValidEnumValues=s=>{const o=t.objectKeys(s).filter(i=>typeof s[s[i]]!="number"),a={};for(const i of o)a[i]=s[i];return t.objectValues(a)},t.objectValues=s=>t.objectKeys(s).map(function(o){return s[o]}),t.objectKeys=typeof Object.keys=="function"?s=>Object.keys(s):s=>{const o=[];for(const a in s)Object.prototype.hasOwnProperty.call(s,a)&&o.push(a);return o},t.find=(s,o)=>{for(const a of s)if(o(a))return a},t.isInteger=typeof Number.isInteger=="function"?s=>Number.isInteger(s):s=>typeof s=="number"&&isFinite(s)&&Math.floor(s)===s;function r(s,o=" | "){return s.map(a=>typeof a=="string"?"'".concat(a,"'"):a).join(o)}t.joinValues=r,t.jsonStringifyReplacer=(s,o)=>typeof o=="bigint"?o.toString():o})(pe||(pe={}));var na;(function(t){t.mergeShapes=(e,n)=>({...e,...n})})(na||(na={}));const H=pe.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),ln=t=>{switch(typeof t){case"undefined":return H.undefined;case"string":return H.string;case"number":return isNaN(t)?H.nan:H.number;case"boolean":return H.boolean;case"function":return H.function;case"bigint":return H.bigint;case"symbol":return H.symbol;case"object":return Array.isArray(t)?H.array:t===null?H.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?H.promise:typeof Map<"u"&&t instanceof Map?H.map:typeof Set<"u"&&t instanceof Set?H.set:typeof Date<"u"&&t instanceof Date?H.date:H.object;default:return H.unknown}},P=pe.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),Ay=t=>JSON.stringify(t,null,2).replace(/"([^"]+)":/g,"$1:");class at extends Error{constructor(e){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=e}get errors(){return this.issues}format(e){const n=e||function(o){return o.message},r={_errors:[]},s=o=>{for(const a of o.issues)if(a.code==="invalid_union")a.unionErrors.map(s);else if(a.code==="invalid_return_type")s(a.returnTypeError);else if(a.code==="invalid_arguments")s(a.argumentsError);else if(a.path.length===0)r._errors.push(n(a));else{let i=r,c=0;for(;c<a.path.length;){const l=a.path[c];c===a.path.length-1?(i[l]=i[l]||{_errors:[]},i[l]._errors.push(n(a))):i[l]=i[l]||{_errors:[]},i=i[l],c++}}};return s(this),r}static assert(e){if(!(e instanceof at))throw new Error("Not a ZodError: ".concat(e))}toString(){return this.message}get message(){return JSON.stringify(this.issues,pe.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=n=>n.message){const n={},r=[];for(const s of this.issues)s.path.length>0?(n[s.path[0]]=n[s.path[0]]||[],n[s.path[0]].push(e(s))):r.push(e(s));return{formErrors:r,fieldErrors:n}}get formErrors(){return this.flatten()}}at.create=t=>new at(t);const dr=(t,e)=>{let n;switch(t.code){case P.invalid_type:t.received===H.undefined?n="Required":n="Expected ".concat(t.expected,", received ").concat(t.received);break;case P.invalid_literal:n="Invalid literal value, expected ".concat(JSON.stringify(t.expected,pe.jsonStringifyReplacer));break;case P.unrecognized_keys:n="Unrecognized key(s) in object: ".concat(pe.joinValues(t.keys,", "));break;case P.invalid_union:n="Invalid input";break;case P.invalid_union_discriminator:n="Invalid discriminator value. Expected ".concat(pe.joinValues(t.options));break;case P.invalid_enum_value:n="Invalid enum value. Expected ".concat(pe.joinValues(t.options),", received '").concat(t.received,"'");break;case P.invalid_arguments:n="Invalid function arguments";break;case P.invalid_return_type:n="Invalid function return type";break;case P.invalid_date:n="Invalid date";break;case P.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(n='Invalid input: must include "'.concat(t.validation.includes,'"'),typeof t.validation.position=="number"&&(n="".concat(n," at one or more positions greater than or equal to ").concat(t.validation.position))):"startsWith"in t.validation?n='Invalid input: must start with "'.concat(t.validation.startsWith,'"'):"endsWith"in t.validation?n='Invalid input: must end with "'.concat(t.validation.endsWith,'"'):pe.assertNever(t.validation):t.validation!=="regex"?n="Invalid ".concat(t.validation):n="Invalid";break;case P.too_small:t.type==="array"?n="Array must contain ".concat(t.exact?"exactly":t.inclusive?"at least":"more than"," ").concat(t.minimum," element(s)"):t.type==="string"?n="String must contain ".concat(t.exact?"exactly":t.inclusive?"at least":"over"," ").concat(t.minimum," character(s)"):t.type==="number"?n="Number must be ".concat(t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than ").concat(t.minimum):t.type==="date"?n="Date must be ".concat(t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than ").concat(new Date(Number(t.minimum))):n="Invalid input";break;case P.too_big:t.type==="array"?n="Array must contain ".concat(t.exact?"exactly":t.inclusive?"at most":"less than"," ").concat(t.maximum," element(s)"):t.type==="string"?n="String must contain ".concat(t.exact?"exactly":t.inclusive?"at most":"under"," ").concat(t.maximum," character(s)"):t.type==="number"?n="Number must be ".concat(t.exact?"exactly":t.inclusive?"less than or equal to":"less than"," ").concat(t.maximum):t.type==="bigint"?n="BigInt must be ".concat(t.exact?"exactly":t.inclusive?"less than or equal to":"less than"," ").concat(t.maximum):t.type==="date"?n="Date must be ".concat(t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"," ").concat(new Date(Number(t.maximum))):n="Invalid input";break;case P.custom:n="Invalid input";break;case P.invalid_intersection_types:n="Intersection results could not be merged";break;case P.not_multiple_of:n="Number must be a multiple of ".concat(t.multipleOf);break;case P.not_finite:n="Number must be finite";break;default:n=e.defaultError,pe.assertNever(t)}return{message:n}};let Tl=dr;function Iy(t){Tl=t}function Ds(){return Tl}const Fs=t=>{const{data:e,path:n,errorMaps:r,issueData:s}=t,o=[...n,...s.path||[]],a={...s,path:o};if(s.message!==void 0)return{...s,path:o,message:s.message};let i="";const c=r.filter(l=>!!l).slice().reverse();for(const l of c)i=l(a,{data:e,defaultError:i}).message;return{...s,path:o,message:i}},Ry=[];function V(t,e){const n=Ds(),r=Fs({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,n,n===dr?void 0:dr].filter(s=>!!s)});t.common.issues.push(r)}class Ke{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,n){const r=[];for(const s of n){if(s.status==="aborted")return Q;s.status==="dirty"&&e.dirty(),r.push(s.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,n){const r=[];for(const s of n){const o=await s.key,a=await s.value;r.push({key:o,value:a})}return Ke.mergeObjectSync(e,r)}static mergeObjectSync(e,n){const r={};for(const s of n){const{key:o,value:a}=s;if(o.status==="aborted"||a.status==="aborted")return Q;o.status==="dirty"&&e.dirty(),a.status==="dirty"&&e.dirty(),o.value!=="__proto__"&&(typeof a.value<"u"||s.alwaysSet)&&(r[o.value]=a.value)}return{status:e.value,value:r}}}const Q=Object.freeze({status:"aborted"}),nr=t=>({status:"dirty",value:t}),Qe=t=>({status:"valid",value:t}),ra=t=>t.status==="aborted",sa=t=>t.status==="dirty",Br=t=>t.status==="valid",Or=t=>typeof Promise<"u"&&t instanceof Promise;function Vs(t,e,n,r){if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return e.get(t)}function El(t,e,n,r,s){if(typeof e=="function"?t!==e||!s:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(t,n),n}var G;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(G||(G={}));var Lr,Pr;class Bt{constructor(e,n,r,s){this._cachedPath=[],this.parent=e,this.data=n,this._path=r,this._key=s}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const Qi=(t,e)=>{if(Br(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const n=new at(t.common.issues);return this._error=n,this._error}}};function se(t){if(!t)return{};const{errorMap:e,invalid_type_error:n,required_error:r,description:s}=t;if(e&&(n||r))throw new Error('Can\'t use "invalid_type_error" or "required_error" in conjunction with custom error map.');return e?{errorMap:e,description:s}:{errorMap:(a,i)=>{var c,l;const{message:d}=t;return a.code==="invalid_enum_value"?{message:d!=null?d:i.defaultError}:typeof i.data>"u"?{message:(c=d!=null?d:r)!==null&&c!==void 0?c:i.defaultError}:a.code!=="invalid_type"?{message:i.defaultError}:{message:(l=d!=null?d:n)!==null&&l!==void 0?l:i.defaultError}},description:s}}class ie{constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(e){return ln(e.data)}_getOrReturnCtx(e,n){return n||{common:e.parent.common,data:e.data,parsedType:ln(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new Ke,ctx:{common:e.parent.common,data:e.data,parsedType:ln(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const n=this._parse(e);if(Or(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(e){const n=this._parse(e);return Promise.resolve(n)}parse(e,n){const r=this.safeParse(e,n);if(r.success)return r.data;throw r.error}safeParse(e,n){var r;const s={common:{issues:[],async:(r=n==null?void 0:n.async)!==null&&r!==void 0?r:!1,contextualErrorMap:n==null?void 0:n.errorMap},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:ln(e)},o=this._parseSync({data:e,path:s.path,parent:s});return Qi(s,o)}async parseAsync(e,n){const r=await this.safeParseAsync(e,n);if(r.success)return r.data;throw r.error}async safeParseAsync(e,n){const r={common:{issues:[],contextualErrorMap:n==null?void 0:n.errorMap,async:!0},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:ln(e)},s=this._parse({data:e,path:r.path,parent:r}),o=await(Or(s)?s:Promise.resolve(s));return Qi(r,o)}refine(e,n){const r=s=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(s):n;return this._refinement((s,o)=>{const a=e(s),i=()=>o.addIssue({code:P.custom,...r(s)});return typeof Promise<"u"&&a instanceof Promise?a.then(c=>c?!0:(i(),!1)):a?!0:(i(),!1)})}refinement(e,n){return this._refinement((r,s)=>e(r)?!0:(s.addIssue(typeof n=="function"?n(r,s):n),!1))}_refinement(e){return new Et({schema:this,typeName:J.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}optional(){return jt.create(this,this._def)}nullable(){return gn.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Tt.create(this,this._def)}promise(){return fr.create(this,this._def)}or(e){return Vr.create([this,e],this._def)}and(e){return Hr.create(this,e,this._def)}transform(e){return new Et({...se(this._def),schema:this,typeName:J.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const n=typeof e=="function"?e:()=>e;return new Gr({...se(this._def),innerType:this,defaultValue:n,typeName:J.ZodDefault})}brand(){return new Fa({typeName:J.ZodBranded,type:this,...se(this._def)})}catch(e){const n=typeof e=="function"?e:()=>e;return new qr({...se(this._def),innerType:this,catchValue:n,typeName:J.ZodCatch})}describe(e){const n=this.constructor;return new n({...this._def,description:e})}pipe(e){return ts.create(this,e)}readonly(){return Yr.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const Ly=/^c[^\s-]{8,}$/i,Py=/^[0-9a-z]+$/,Ny=/^[0-9A-HJKMNP-TV-Z]{26}$/,jy=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,$y=/^[a-z0-9_-]{21}$/i,By=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,Oy=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,My="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let Do;const Dy=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,Fy=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,Vy=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,kl="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",Hy=new RegExp("^".concat(kl,"$"));function Al(t){let e="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return t.precision?e="".concat(e,"\\.\\d{").concat(t.precision,"}"):t.precision==null&&(e="".concat(e,"(\\.\\d+)?")),e}function zy(t){return new RegExp("^".concat(Al(t),"$"))}function Il(t){let e="".concat(kl,"T").concat(Al(t));const n=[];return n.push(t.local?"Z?":"Z"),t.offset&&n.push("([+-]\\d{2}:?\\d{2})"),e="".concat(e,"(").concat(n.join("|"),")"),new RegExp("^".concat(e,"$"))}function Uy(t,e){return!!((e==="v4"||!e)&&Dy.test(t)||(e==="v6"||!e)&&Fy.test(t))}class xt extends ie{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==H.string){const o=this._getOrReturnCtx(e);return V(o,{code:P.invalid_type,expected:H.string,received:o.parsedType}),Q}const r=new Ke;let s;for(const o of this._def.checks)if(o.kind==="min")e.data.length<o.value&&(s=this._getOrReturnCtx(e,s),V(s,{code:P.too_small,minimum:o.value,type:"string",inclusive:!0,exact:!1,message:o.message}),r.dirty());else if(o.kind==="max")e.data.length>o.value&&(s=this._getOrReturnCtx(e,s),V(s,{code:P.too_big,maximum:o.value,type:"string",inclusive:!0,exact:!1,message:o.message}),r.dirty());else if(o.kind==="length"){const a=e.data.length>o.value,i=e.data.length<o.value;(a||i)&&(s=this._getOrReturnCtx(e,s),a?V(s,{code:P.too_big,maximum:o.value,type:"string",inclusive:!0,exact:!0,message:o.message}):i&&V(s,{code:P.too_small,minimum:o.value,type:"string",inclusive:!0,exact:!0,message:o.message}),r.dirty())}else if(o.kind==="email")Oy.test(e.data)||(s=this._getOrReturnCtx(e,s),V(s,{validation:"email",code:P.invalid_string,message:o.message}),r.dirty());else if(o.kind==="emoji")Do||(Do=new RegExp(My,"u")),Do.test(e.data)||(s=this._getOrReturnCtx(e,s),V(s,{validation:"emoji",code:P.invalid_string,message:o.message}),r.dirty());else if(o.kind==="uuid")jy.test(e.data)||(s=this._getOrReturnCtx(e,s),V(s,{validation:"uuid",code:P.invalid_string,message:o.message}),r.dirty());else if(o.kind==="nanoid")$y.test(e.data)||(s=this._getOrReturnCtx(e,s),V(s,{validation:"nanoid",code:P.invalid_string,message:o.message}),r.dirty());else if(o.kind==="cuid")Ly.test(e.data)||(s=this._getOrReturnCtx(e,s),V(s,{validation:"cuid",code:P.invalid_string,message:o.message}),r.dirty());else if(o.kind==="cuid2")Py.test(e.data)||(s=this._getOrReturnCtx(e,s),V(s,{validation:"cuid2",code:P.invalid_string,message:o.message}),r.dirty());else if(o.kind==="ulid")Ny.test(e.data)||(s=this._getOrReturnCtx(e,s),V(s,{validation:"ulid",code:P.invalid_string,message:o.message}),r.dirty());else if(o.kind==="url")try{new URL(e.data)}catch(a){s=this._getOrReturnCtx(e,s),V(s,{validation:"url",code:P.invalid_string,message:o.message}),r.dirty()}else o.kind==="regex"?(o.regex.lastIndex=0,o.regex.test(e.data)||(s=this._getOrReturnCtx(e,s),V(s,{validation:"regex",code:P.invalid_string,message:o.message}),r.dirty())):o.kind==="trim"?e.data=e.data.trim():o.kind==="includes"?e.data.includes(o.value,o.position)||(s=this._getOrReturnCtx(e,s),V(s,{code:P.invalid_string,validation:{includes:o.value,position:o.position},message:o.message}),r.dirty()):o.kind==="toLowerCase"?e.data=e.data.toLowerCase():o.kind==="toUpperCase"?e.data=e.data.toUpperCase():o.kind==="startsWith"?e.data.startsWith(o.value)||(s=this._getOrReturnCtx(e,s),V(s,{code:P.invalid_string,validation:{startsWith:o.value},message:o.message}),r.dirty()):o.kind==="endsWith"?e.data.endsWith(o.value)||(s=this._getOrReturnCtx(e,s),V(s,{code:P.invalid_string,validation:{endsWith:o.value},message:o.message}),r.dirty()):o.kind==="datetime"?Il(o).test(e.data)||(s=this._getOrReturnCtx(e,s),V(s,{code:P.invalid_string,validation:"datetime",message:o.message}),r.dirty()):o.kind==="date"?Hy.test(e.data)||(s=this._getOrReturnCtx(e,s),V(s,{code:P.invalid_string,validation:"date",message:o.message}),r.dirty()):o.kind==="time"?zy(o).test(e.data)||(s=this._getOrReturnCtx(e,s),V(s,{code:P.invalid_string,validation:"time",message:o.message}),r.dirty()):o.kind==="duration"?By.test(e.data)||(s=this._getOrReturnCtx(e,s),V(s,{validation:"duration",code:P.invalid_string,message:o.message}),r.dirty()):o.kind==="ip"?Uy(e.data,o.version)||(s=this._getOrReturnCtx(e,s),V(s,{validation:"ip",code:P.invalid_string,message:o.message}),r.dirty()):o.kind==="base64"?Vy.test(e.data)||(s=this._getOrReturnCtx(e,s),V(s,{validation:"base64",code:P.invalid_string,message:o.message}),r.dirty()):pe.assertNever(o);return{status:r.value,value:e.data}}_regex(e,n,r){return this.refinement(s=>e.test(s),{validation:n,code:P.invalid_string,...G.errToObj(r)})}_addCheck(e){return new xt({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...G.errToObj(e)})}url(e){return this._addCheck({kind:"url",...G.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...G.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...G.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...G.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...G.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...G.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...G.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...G.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...G.errToObj(e)})}datetime(e){var n,r;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(n=e==null?void 0:e.offset)!==null&&n!==void 0?n:!1,local:(r=e==null?void 0:e.local)!==null&&r!==void 0?r:!1,...G.errToObj(e==null?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,...G.errToObj(e==null?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...G.errToObj(e)})}regex(e,n){return this._addCheck({kind:"regex",regex:e,...G.errToObj(n)})}includes(e,n){return this._addCheck({kind:"includes",value:e,position:n==null?void 0:n.position,...G.errToObj(n==null?void 0:n.message)})}startsWith(e,n){return this._addCheck({kind:"startsWith",value:e,...G.errToObj(n)})}endsWith(e,n){return this._addCheck({kind:"endsWith",value:e,...G.errToObj(n)})}min(e,n){return this._addCheck({kind:"min",value:e,...G.errToObj(n)})}max(e,n){return this._addCheck({kind:"max",value:e,...G.errToObj(n)})}length(e,n){return this._addCheck({kind:"length",value:e,...G.errToObj(n)})}nonempty(e){return this.min(1,G.errToObj(e))}trim(){return new xt({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new xt({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new xt({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get minLength(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxLength(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}xt.create=t=>{var e;return new xt({checks:[],typeName:J.ZodString,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,...se(t)})};function Zy(t,e){const n=(t.toString().split(".")[1]||"").length,r=(e.toString().split(".")[1]||"").length,s=n>r?n:r,o=parseInt(t.toFixed(s).replace(".","")),a=parseInt(e.toFixed(s).replace(".",""));return o%a/Math.pow(10,s)}class pn extends ie{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==H.number){const o=this._getOrReturnCtx(e);return V(o,{code:P.invalid_type,expected:H.number,received:o.parsedType}),Q}let r;const s=new Ke;for(const o of this._def.checks)o.kind==="int"?pe.isInteger(e.data)||(r=this._getOrReturnCtx(e,r),V(r,{code:P.invalid_type,expected:"integer",received:"float",message:o.message}),s.dirty()):o.kind==="min"?(o.inclusive?e.data<o.value:e.data<=o.value)&&(r=this._getOrReturnCtx(e,r),V(r,{code:P.too_small,minimum:o.value,type:"number",inclusive:o.inclusive,exact:!1,message:o.message}),s.dirty()):o.kind==="max"?(o.inclusive?e.data>o.value:e.data>=o.value)&&(r=this._getOrReturnCtx(e,r),V(r,{code:P.too_big,maximum:o.value,type:"number",inclusive:o.inclusive,exact:!1,message:o.message}),s.dirty()):o.kind==="multipleOf"?Zy(e.data,o.value)!==0&&(r=this._getOrReturnCtx(e,r),V(r,{code:P.not_multiple_of,multipleOf:o.value,message:o.message}),s.dirty()):o.kind==="finite"?Number.isFinite(e.data)||(r=this._getOrReturnCtx(e,r),V(r,{code:P.not_finite,message:o.message}),s.dirty()):pe.assertNever(o);return{status:s.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,G.toString(n))}gt(e,n){return this.setLimit("min",e,!1,G.toString(n))}lte(e,n){return this.setLimit("max",e,!0,G.toString(n))}lt(e,n){return this.setLimit("max",e,!1,G.toString(n))}setLimit(e,n,r,s){return new pn({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:G.toString(s)}]})}_addCheck(e){return new pn({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:G.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:G.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:G.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:G.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:G.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:G.toString(n)})}finite(e){return this._addCheck({kind:"finite",message:G.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:G.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:G.toString(e)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&pe.isInteger(e.value))}get isFinite(){let e=null,n=null;for(const r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(n===null||r.value>n)&&(n=r.value):r.kind==="max"&&(e===null||r.value<e)&&(e=r.value)}return Number.isFinite(n)&&Number.isFinite(e)}}pn.create=t=>new pn({checks:[],typeName:J.ZodNumber,coerce:(t==null?void 0:t.coerce)||!1,...se(t)});class hn extends ie{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce&&(e.data=BigInt(e.data)),this._getType(e)!==H.bigint){const o=this._getOrReturnCtx(e);return V(o,{code:P.invalid_type,expected:H.bigint,received:o.parsedType}),Q}let r;const s=new Ke;for(const o of this._def.checks)o.kind==="min"?(o.inclusive?e.data<o.value:e.data<=o.value)&&(r=this._getOrReturnCtx(e,r),V(r,{code:P.too_small,type:"bigint",minimum:o.value,inclusive:o.inclusive,message:o.message}),s.dirty()):o.kind==="max"?(o.inclusive?e.data>o.value:e.data>=o.value)&&(r=this._getOrReturnCtx(e,r),V(r,{code:P.too_big,type:"bigint",maximum:o.value,inclusive:o.inclusive,message:o.message}),s.dirty()):o.kind==="multipleOf"?e.data%o.value!==BigInt(0)&&(r=this._getOrReturnCtx(e,r),V(r,{code:P.not_multiple_of,multipleOf:o.value,message:o.message}),s.dirty()):pe.assertNever(o);return{status:s.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,G.toString(n))}gt(e,n){return this.setLimit("min",e,!1,G.toString(n))}lte(e,n){return this.setLimit("max",e,!0,G.toString(n))}lt(e,n){return this.setLimit("max",e,!1,G.toString(n))}setLimit(e,n,r,s){return new hn({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:G.toString(s)}]})}_addCheck(e){return new hn({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:G.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:G.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:G.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:G.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:G.toString(n)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}hn.create=t=>{var e;return new hn({checks:[],typeName:J.ZodBigInt,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,...se(t)})};class Mr extends ie{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==H.boolean){const r=this._getOrReturnCtx(e);return V(r,{code:P.invalid_type,expected:H.boolean,received:r.parsedType}),Q}return Qe(e.data)}}Mr.create=t=>new Mr({typeName:J.ZodBoolean,coerce:(t==null?void 0:t.coerce)||!1,...se(t)});class Bn extends ie{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==H.date){const o=this._getOrReturnCtx(e);return V(o,{code:P.invalid_type,expected:H.date,received:o.parsedType}),Q}if(isNaN(e.data.getTime())){const o=this._getOrReturnCtx(e);return V(o,{code:P.invalid_date}),Q}const r=new Ke;let s;for(const o of this._def.checks)o.kind==="min"?e.data.getTime()<o.value&&(s=this._getOrReturnCtx(e,s),V(s,{code:P.too_small,message:o.message,inclusive:!0,exact:!1,minimum:o.value,type:"date"}),r.dirty()):o.kind==="max"?e.data.getTime()>o.value&&(s=this._getOrReturnCtx(e,s),V(s,{code:P.too_big,message:o.message,inclusive:!0,exact:!1,maximum:o.value,type:"date"}),r.dirty()):pe.assertNever(o);return{status:r.value,value:new Date(e.data.getTime())}}_addCheck(e){return new Bn({...this._def,checks:[...this._def.checks,e]})}min(e,n){return this._addCheck({kind:"min",value:e.getTime(),message:G.toString(n)})}max(e,n){return this._addCheck({kind:"max",value:e.getTime(),message:G.toString(n)})}get minDate(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e!=null?new Date(e):null}}Bn.create=t=>new Bn({checks:[],coerce:(t==null?void 0:t.coerce)||!1,typeName:J.ZodDate,...se(t)});class Hs extends ie{_parse(e){if(this._getType(e)!==H.symbol){const r=this._getOrReturnCtx(e);return V(r,{code:P.invalid_type,expected:H.symbol,received:r.parsedType}),Q}return Qe(e.data)}}Hs.create=t=>new Hs({typeName:J.ZodSymbol,...se(t)});class Dr extends ie{_parse(e){if(this._getType(e)!==H.undefined){const r=this._getOrReturnCtx(e);return V(r,{code:P.invalid_type,expected:H.undefined,received:r.parsedType}),Q}return Qe(e.data)}}Dr.create=t=>new Dr({typeName:J.ZodUndefined,...se(t)});class Fr extends ie{_parse(e){if(this._getType(e)!==H.null){const r=this._getOrReturnCtx(e);return V(r,{code:P.invalid_type,expected:H.null,received:r.parsedType}),Q}return Qe(e.data)}}Fr.create=t=>new Fr({typeName:J.ZodNull,...se(t)});class ur extends ie{constructor(){super(...arguments),this._any=!0}_parse(e){return Qe(e.data)}}ur.create=t=>new ur({typeName:J.ZodAny,...se(t)});class Ln extends ie{constructor(){super(...arguments),this._unknown=!0}_parse(e){return Qe(e.data)}}Ln.create=t=>new Ln({typeName:J.ZodUnknown,...se(t)});class Yt extends ie{_parse(e){const n=this._getOrReturnCtx(e);return V(n,{code:P.invalid_type,expected:H.never,received:n.parsedType}),Q}}Yt.create=t=>new Yt({typeName:J.ZodNever,...se(t)});class zs extends ie{_parse(e){if(this._getType(e)!==H.undefined){const r=this._getOrReturnCtx(e);return V(r,{code:P.invalid_type,expected:H.void,received:r.parsedType}),Q}return Qe(e.data)}}zs.create=t=>new zs({typeName:J.ZodVoid,...se(t)});class Tt extends ie{_parse(e){const{ctx:n,status:r}=this._processInputParams(e),s=this._def;if(n.parsedType!==H.array)return V(n,{code:P.invalid_type,expected:H.array,received:n.parsedType}),Q;if(s.exactLength!==null){const a=n.data.length>s.exactLength.value,i=n.data.length<s.exactLength.value;(a||i)&&(V(n,{code:a?P.too_big:P.too_small,minimum:i?s.exactLength.value:void 0,maximum:a?s.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:s.exactLength.message}),r.dirty())}if(s.minLength!==null&&n.data.length<s.minLength.value&&(V(n,{code:P.too_small,minimum:s.minLength.value,type:"array",inclusive:!0,exact:!1,message:s.minLength.message}),r.dirty()),s.maxLength!==null&&n.data.length>s.maxLength.value&&(V(n,{code:P.too_big,maximum:s.maxLength.value,type:"array",inclusive:!0,exact:!1,message:s.maxLength.message}),r.dirty()),n.common.async)return Promise.all([...n.data].map((a,i)=>s.type._parseAsync(new Bt(n,a,n.path,i)))).then(a=>Ke.mergeArray(r,a));const o=[...n.data].map((a,i)=>s.type._parseSync(new Bt(n,a,n.path,i)));return Ke.mergeArray(r,o)}get element(){return this._def.type}min(e,n){return new Tt({...this._def,minLength:{value:e,message:G.toString(n)}})}max(e,n){return new Tt({...this._def,maxLength:{value:e,message:G.toString(n)}})}length(e,n){return new Tt({...this._def,exactLength:{value:e,message:G.toString(n)}})}nonempty(e){return this.min(1,e)}}Tt.create=(t,e)=>new Tt({type:t,minLength:null,maxLength:null,exactLength:null,typeName:J.ZodArray,...se(e)});function Qn(t){if(t instanceof Ae){const e={};for(const n in t.shape){const r=t.shape[n];e[n]=jt.create(Qn(r))}return new Ae({...t._def,shape:()=>e})}else return t instanceof Tt?new Tt({...t._def,type:Qn(t.element)}):t instanceof jt?jt.create(Qn(t.unwrap())):t instanceof gn?gn.create(Qn(t.unwrap())):t instanceof Ot?Ot.create(t.items.map(e=>Qn(e))):t}class Ae extends ie{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),n=pe.objectKeys(e);return this._cached={shape:e,keys:n}}_parse(e){if(this._getType(e)!==H.object){const l=this._getOrReturnCtx(e);return V(l,{code:P.invalid_type,expected:H.object,received:l.parsedType}),Q}const{status:r,ctx:s}=this._processInputParams(e),{shape:o,keys:a}=this._getCached(),i=[];if(!(this._def.catchall instanceof Yt&&this._def.unknownKeys==="strip"))for(const l in s.data)a.includes(l)||i.push(l);const c=[];for(const l of a){const d=o[l],p=s.data[l];c.push({key:{status:"valid",value:l},value:d._parse(new Bt(s,p,s.path,l)),alwaysSet:l in s.data})}if(this._def.catchall instanceof Yt){const l=this._def.unknownKeys;if(l==="passthrough")for(const d of i)c.push({key:{status:"valid",value:d},value:{status:"valid",value:s.data[d]}});else if(l==="strict")i.length>0&&(V(s,{code:P.unrecognized_keys,keys:i}),r.dirty());else if(l!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const l=this._def.catchall;for(const d of i){const p=s.data[d];c.push({key:{status:"valid",value:d},value:l._parse(new Bt(s,p,s.path,d)),alwaysSet:d in s.data})}}return s.common.async?Promise.resolve().then(async()=>{const l=[];for(const d of c){const p=await d.key,m=await d.value;l.push({key:p,value:m,alwaysSet:d.alwaysSet})}return l}).then(l=>Ke.mergeObjectSync(r,l)):Ke.mergeObjectSync(r,c)}get shape(){return this._def.shape()}strict(e){return G.errToObj,new Ae({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(n,r)=>{var s,o,a,i;const c=(a=(o=(s=this._def).errorMap)===null||o===void 0?void 0:o.call(s,n,r).message)!==null&&a!==void 0?a:r.defaultError;return n.code==="unrecognized_keys"?{message:(i=G.errToObj(e).message)!==null&&i!==void 0?i:c}:{message:c}}}:{}})}strip(){return new Ae({...this._def,unknownKeys:"strip"})}passthrough(){return new Ae({...this._def,unknownKeys:"passthrough"})}extend(e){return new Ae({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new Ae({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:J.ZodObject})}setKey(e,n){return this.augment({[e]:n})}catchall(e){return new Ae({...this._def,catchall:e})}pick(e){const n={};return pe.objectKeys(e).forEach(r=>{e[r]&&this.shape[r]&&(n[r]=this.shape[r])}),new Ae({...this._def,shape:()=>n})}omit(e){const n={};return pe.objectKeys(this.shape).forEach(r=>{e[r]||(n[r]=this.shape[r])}),new Ae({...this._def,shape:()=>n})}deepPartial(){return Qn(this)}partial(e){const n={};return pe.objectKeys(this.shape).forEach(r=>{const s=this.shape[r];e&&!e[r]?n[r]=s:n[r]=s.optional()}),new Ae({...this._def,shape:()=>n})}required(e){const n={};return pe.objectKeys(this.shape).forEach(r=>{if(e&&!e[r])n[r]=this.shape[r];else{let o=this.shape[r];for(;o instanceof jt;)o=o._def.innerType;n[r]=o}}),new Ae({...this._def,shape:()=>n})}keyof(){return Rl(pe.objectKeys(this.shape))}}Ae.create=(t,e)=>new Ae({shape:()=>t,unknownKeys:"strip",catchall:Yt.create(),typeName:J.ZodObject,...se(e)});Ae.strictCreate=(t,e)=>new Ae({shape:()=>t,unknownKeys:"strict",catchall:Yt.create(),typeName:J.ZodObject,...se(e)});Ae.lazycreate=(t,e)=>new Ae({shape:t,unknownKeys:"strip",catchall:Yt.create(),typeName:J.ZodObject,...se(e)});class Vr extends ie{_parse(e){const{ctx:n}=this._processInputParams(e),r=this._def.options;function s(o){for(const i of o)if(i.result.status==="valid")return i.result;for(const i of o)if(i.result.status==="dirty")return n.common.issues.push(...i.ctx.common.issues),i.result;const a=o.map(i=>new at(i.ctx.common.issues));return V(n,{code:P.invalid_union,unionErrors:a}),Q}if(n.common.async)return Promise.all(r.map(async o=>{const a={...n,common:{...n.common,issues:[]},parent:null};return{result:await o._parseAsync({data:n.data,path:n.path,parent:a}),ctx:a}})).then(s);{let o;const a=[];for(const c of r){const l={...n,common:{...n.common,issues:[]},parent:null},d=c._parseSync({data:n.data,path:n.path,parent:l});if(d.status==="valid")return d;d.status==="dirty"&&!o&&(o={result:d,ctx:l}),l.common.issues.length&&a.push(l.common.issues)}if(o)return n.common.issues.push(...o.ctx.common.issues),o.result;const i=a.map(c=>new at(c));return V(n,{code:P.invalid_union,unionErrors:i}),Q}}get options(){return this._def.options}}Vr.create=(t,e)=>new Vr({options:t,typeName:J.ZodUnion,...se(e)});const Zt=t=>t instanceof Ur?Zt(t.schema):t instanceof Et?Zt(t.innerType()):t instanceof Zr?[t.value]:t instanceof mn?t.options:t instanceof Wr?pe.objectValues(t.enum):t instanceof Gr?Zt(t._def.innerType):t instanceof Dr?[void 0]:t instanceof Fr?[null]:t instanceof jt?[void 0,...Zt(t.unwrap())]:t instanceof gn?[null,...Zt(t.unwrap())]:t instanceof Fa||t instanceof Yr?Zt(t.unwrap()):t instanceof qr?Zt(t._def.innerType):[];class co extends ie{_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==H.object)return V(n,{code:P.invalid_type,expected:H.object,received:n.parsedType}),Q;const r=this.discriminator,s=n.data[r],o=this.optionsMap.get(s);return o?n.common.async?o._parseAsync({data:n.data,path:n.path,parent:n}):o._parseSync({data:n.data,path:n.path,parent:n}):(V(n,{code:P.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[r]}),Q)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,n,r){const s=new Map;for(const o of n){const a=Zt(o.shape[e]);if(!a.length)throw new Error("A discriminator value for key `".concat(e,"` could not be extracted from all schema options"));for(const i of a){if(s.has(i))throw new Error("Discriminator property ".concat(String(e)," has duplicate value ").concat(String(i)));s.set(i,o)}}return new co({typeName:J.ZodDiscriminatedUnion,discriminator:e,options:n,optionsMap:s,...se(r)})}}function oa(t,e){const n=ln(t),r=ln(e);if(t===e)return{valid:!0,data:t};if(n===H.object&&r===H.object){const s=pe.objectKeys(e),o=pe.objectKeys(t).filter(i=>s.indexOf(i)!==-1),a={...t,...e};for(const i of o){const c=oa(t[i],e[i]);if(!c.valid)return{valid:!1};a[i]=c.data}return{valid:!0,data:a}}else if(n===H.array&&r===H.array){if(t.length!==e.length)return{valid:!1};const s=[];for(let o=0;o<t.length;o++){const a=t[o],i=e[o],c=oa(a,i);if(!c.valid)return{valid:!1};s.push(c.data)}return{valid:!0,data:s}}else return n===H.date&&r===H.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}class Hr extends ie{_parse(e){const{status:n,ctx:r}=this._processInputParams(e),s=(o,a)=>{if(ra(o)||ra(a))return Q;const i=oa(o.value,a.value);return i.valid?((sa(o)||sa(a))&&n.dirty(),{status:n.value,value:i.data}):(V(r,{code:P.invalid_intersection_types}),Q)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([o,a])=>s(o,a)):s(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}Hr.create=(t,e,n)=>new Hr({left:t,right:e,typeName:J.ZodIntersection,...se(n)});class Ot extends ie{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==H.array)return V(r,{code:P.invalid_type,expected:H.array,received:r.parsedType}),Q;if(r.data.length<this._def.items.length)return V(r,{code:P.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),Q;!this._def.rest&&r.data.length>this._def.items.length&&(V(r,{code:P.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const o=[...r.data].map((a,i)=>{const c=this._def.items[i]||this._def.rest;return c?c._parse(new Bt(r,a,r.path,i)):null}).filter(a=>!!a);return r.common.async?Promise.all(o).then(a=>Ke.mergeArray(n,a)):Ke.mergeArray(n,o)}get items(){return this._def.items}rest(e){return new Ot({...this._def,rest:e})}}Ot.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Ot({items:t,typeName:J.ZodTuple,rest:null,...se(e)})};class zr extends ie{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==H.object)return V(r,{code:P.invalid_type,expected:H.object,received:r.parsedType}),Q;const s=[],o=this._def.keyType,a=this._def.valueType;for(const i in r.data)s.push({key:o._parse(new Bt(r,i,r.path,i)),value:a._parse(new Bt(r,r.data[i],r.path,i)),alwaysSet:i in r.data});return r.common.async?Ke.mergeObjectAsync(n,s):Ke.mergeObjectSync(n,s)}get element(){return this._def.valueType}static create(e,n,r){return n instanceof ie?new zr({keyType:e,valueType:n,typeName:J.ZodRecord,...se(r)}):new zr({keyType:xt.create(),valueType:e,typeName:J.ZodRecord,...se(n)})}}class Us extends ie{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==H.map)return V(r,{code:P.invalid_type,expected:H.map,received:r.parsedType}),Q;const s=this._def.keyType,o=this._def.valueType,a=[...r.data.entries()].map(([i,c],l)=>({key:s._parse(new Bt(r,i,r.path,[l,"key"])),value:o._parse(new Bt(r,c,r.path,[l,"value"]))}));if(r.common.async){const i=new Map;return Promise.resolve().then(async()=>{for(const c of a){const l=await c.key,d=await c.value;if(l.status==="aborted"||d.status==="aborted")return Q;(l.status==="dirty"||d.status==="dirty")&&n.dirty(),i.set(l.value,d.value)}return{status:n.value,value:i}})}else{const i=new Map;for(const c of a){const l=c.key,d=c.value;if(l.status==="aborted"||d.status==="aborted")return Q;(l.status==="dirty"||d.status==="dirty")&&n.dirty(),i.set(l.value,d.value)}return{status:n.value,value:i}}}}Us.create=(t,e,n)=>new Us({valueType:e,keyType:t,typeName:J.ZodMap,...se(n)});class On extends ie{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==H.set)return V(r,{code:P.invalid_type,expected:H.set,received:r.parsedType}),Q;const s=this._def;s.minSize!==null&&r.data.size<s.minSize.value&&(V(r,{code:P.too_small,minimum:s.minSize.value,type:"set",inclusive:!0,exact:!1,message:s.minSize.message}),n.dirty()),s.maxSize!==null&&r.data.size>s.maxSize.value&&(V(r,{code:P.too_big,maximum:s.maxSize.value,type:"set",inclusive:!0,exact:!1,message:s.maxSize.message}),n.dirty());const o=this._def.valueType;function a(c){const l=new Set;for(const d of c){if(d.status==="aborted")return Q;d.status==="dirty"&&n.dirty(),l.add(d.value)}return{status:n.value,value:l}}const i=[...r.data.values()].map((c,l)=>o._parse(new Bt(r,c,r.path,l)));return r.common.async?Promise.all(i).then(c=>a(c)):a(i)}min(e,n){return new On({...this._def,minSize:{value:e,message:G.toString(n)}})}max(e,n){return new On({...this._def,maxSize:{value:e,message:G.toString(n)}})}size(e,n){return this.min(e,n).max(e,n)}nonempty(e){return this.min(1,e)}}On.create=(t,e)=>new On({valueType:t,minSize:null,maxSize:null,typeName:J.ZodSet,...se(e)});class or extends ie{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==H.function)return V(n,{code:P.invalid_type,expected:H.function,received:n.parsedType}),Q;function r(i,c){return Fs({data:i,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,Ds(),dr].filter(l=>!!l),issueData:{code:P.invalid_arguments,argumentsError:c}})}function s(i,c){return Fs({data:i,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,Ds(),dr].filter(l=>!!l),issueData:{code:P.invalid_return_type,returnTypeError:c}})}const o={errorMap:n.common.contextualErrorMap},a=n.data;if(this._def.returns instanceof fr){const i=this;return Qe(async function(...c){const l=new at([]),d=await i._def.args.parseAsync(c,o).catch(g=>{throw l.addIssue(r(c,g)),l}),p=await Reflect.apply(a,this,d);return await i._def.returns._def.type.parseAsync(p,o).catch(g=>{throw l.addIssue(s(p,g)),l})})}else{const i=this;return Qe(function(...c){const l=i._def.args.safeParse(c,o);if(!l.success)throw new at([r(c,l.error)]);const d=Reflect.apply(a,this,l.data),p=i._def.returns.safeParse(d,o);if(!p.success)throw new at([s(d,p.error)]);return p.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new or({...this._def,args:Ot.create(e).rest(Ln.create())})}returns(e){return new or({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,n,r){return new or({args:e||Ot.create([]).rest(Ln.create()),returns:n||Ln.create(),typeName:J.ZodFunction,...se(r)})}}class Ur extends ie{get schema(){return this._def.getter()}_parse(e){const{ctx:n}=this._processInputParams(e);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}Ur.create=(t,e)=>new Ur({getter:t,typeName:J.ZodLazy,...se(e)});class Zr extends ie{_parse(e){if(e.data!==this._def.value){const n=this._getOrReturnCtx(e);return V(n,{received:n.data,code:P.invalid_literal,expected:this._def.value}),Q}return{status:"valid",value:e.data}}get value(){return this._def.value}}Zr.create=(t,e)=>new Zr({value:t,typeName:J.ZodLiteral,...se(e)});function Rl(t,e){return new mn({values:t,typeName:J.ZodEnum,...se(e)})}class mn extends ie{constructor(){super(...arguments),Lr.set(this,void 0)}_parse(e){if(typeof e.data!="string"){const n=this._getOrReturnCtx(e),r=this._def.values;return V(n,{expected:pe.joinValues(r),received:n.parsedType,code:P.invalid_type}),Q}if(Vs(this,Lr)||El(this,Lr,new Set(this._def.values)),!Vs(this,Lr).has(e.data)){const n=this._getOrReturnCtx(e),r=this._def.values;return V(n,{received:n.data,code:P.invalid_enum_value,options:r}),Q}return Qe(e.data)}get options(){return this._def.values}get enum(){const e={};for(const n of this._def.values)e[n]=n;return e}get Values(){const e={};for(const n of this._def.values)e[n]=n;return e}get Enum(){const e={};for(const n of this._def.values)e[n]=n;return e}extract(e,n=this._def){return mn.create(e,{...this._def,...n})}exclude(e,n=this._def){return mn.create(this.options.filter(r=>!e.includes(r)),{...this._def,...n})}}Lr=new WeakMap;mn.create=Rl;class Wr extends ie{constructor(){super(...arguments),Pr.set(this,void 0)}_parse(e){const n=pe.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==H.string&&r.parsedType!==H.number){const s=pe.objectValues(n);return V(r,{expected:pe.joinValues(s),received:r.parsedType,code:P.invalid_type}),Q}if(Vs(this,Pr)||El(this,Pr,new Set(pe.getValidEnumValues(this._def.values))),!Vs(this,Pr).has(e.data)){const s=pe.objectValues(n);return V(r,{received:r.data,code:P.invalid_enum_value,options:s}),Q}return Qe(e.data)}get enum(){return this._def.values}}Pr=new WeakMap;Wr.create=(t,e)=>new Wr({values:t,typeName:J.ZodNativeEnum,...se(e)});class fr extends ie{unwrap(){return this._def.type}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==H.promise&&n.common.async===!1)return V(n,{code:P.invalid_type,expected:H.promise,received:n.parsedType}),Q;const r=n.parsedType===H.promise?n.data:Promise.resolve(n.data);return Qe(r.then(s=>this._def.type.parseAsync(s,{path:n.path,errorMap:n.common.contextualErrorMap})))}}fr.create=(t,e)=>new fr({type:t,typeName:J.ZodPromise,...se(e)});class Et extends ie{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===J.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:n,ctx:r}=this._processInputParams(e),s=this._def.effect||null,o={addIssue:a=>{V(r,a),a.fatal?n.abort():n.dirty()},get path(){return r.path}};if(o.addIssue=o.addIssue.bind(o),s.type==="preprocess"){const a=s.transform(r.data,o);if(r.common.async)return Promise.resolve(a).then(async i=>{if(n.value==="aborted")return Q;const c=await this._def.schema._parseAsync({data:i,path:r.path,parent:r});return c.status==="aborted"?Q:c.status==="dirty"||n.value==="dirty"?nr(c.value):c});{if(n.value==="aborted")return Q;const i=this._def.schema._parseSync({data:a,path:r.path,parent:r});return i.status==="aborted"?Q:i.status==="dirty"||n.value==="dirty"?nr(i.value):i}}if(s.type==="refinement"){const a=i=>{const c=s.refinement(i,o);if(r.common.async)return Promise.resolve(c);if(c instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return i};if(r.common.async===!1){const i=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return i.status==="aborted"?Q:(i.status==="dirty"&&n.dirty(),a(i.value),{status:n.value,value:i.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(i=>i.status==="aborted"?Q:(i.status==="dirty"&&n.dirty(),a(i.value).then(()=>({status:n.value,value:i.value}))))}if(s.type==="transform")if(r.common.async===!1){const a=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!Br(a))return a;const i=s.transform(a.value,o);if(i instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:i}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(a=>Br(a)?Promise.resolve(s.transform(a.value,o)).then(i=>({status:n.value,value:i})):a);pe.assertNever(s)}}Et.create=(t,e,n)=>new Et({schema:t,typeName:J.ZodEffects,effect:e,...se(n)});Et.createWithPreprocess=(t,e,n)=>new Et({schema:e,effect:{type:"preprocess",transform:t},typeName:J.ZodEffects,...se(n)});class jt extends ie{_parse(e){return this._getType(e)===H.undefined?Qe(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}jt.create=(t,e)=>new jt({innerType:t,typeName:J.ZodOptional,...se(e)});class gn extends ie{_parse(e){return this._getType(e)===H.null?Qe(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}gn.create=(t,e)=>new gn({innerType:t,typeName:J.ZodNullable,...se(e)});class Gr extends ie{_parse(e){const{ctx:n}=this._processInputParams(e);let r=n.data;return n.parsedType===H.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:n.path,parent:n})}removeDefault(){return this._def.innerType}}Gr.create=(t,e)=>new Gr({innerType:t,typeName:J.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...se(e)});class qr extends ie{_parse(e){const{ctx:n}=this._processInputParams(e),r={...n,common:{...n.common,issues:[]}},s=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return Or(s)?s.then(o=>({status:"valid",value:o.status==="valid"?o.value:this._def.catchValue({get error(){return new at(r.common.issues)},input:r.data})})):{status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new at(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}qr.create=(t,e)=>new qr({innerType:t,typeName:J.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...se(e)});class Zs extends ie{_parse(e){if(this._getType(e)!==H.nan){const r=this._getOrReturnCtx(e);return V(r,{code:P.invalid_type,expected:H.nan,received:r.parsedType}),Q}return{status:"valid",value:e.data}}}Zs.create=t=>new Zs({typeName:J.ZodNaN,...se(t)});const Wy=Symbol("zod_brand");class Fa extends ie{_parse(e){const{ctx:n}=this._processInputParams(e),r=n.data;return this._def.type._parse({data:r,path:n.path,parent:n})}unwrap(){return this._def.type}}class ts extends ie{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.common.async)return(async()=>{const o=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return o.status==="aborted"?Q:o.status==="dirty"?(n.dirty(),nr(o.value)):this._def.out._parseAsync({data:o.value,path:r.path,parent:r})})();{const s=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return s.status==="aborted"?Q:s.status==="dirty"?(n.dirty(),{status:"dirty",value:s.value}):this._def.out._parseSync({data:s.value,path:r.path,parent:r})}}static create(e,n){return new ts({in:e,out:n,typeName:J.ZodPipeline})}}class Yr extends ie{_parse(e){const n=this._def.innerType._parse(e),r=s=>(Br(s)&&(s.value=Object.freeze(s.value)),s);return Or(n)?n.then(s=>r(s)):r(n)}unwrap(){return this._def.innerType}}Yr.create=(t,e)=>new Yr({innerType:t,typeName:J.ZodReadonly,...se(e)});function Ll(t,e={},n){return t?ur.create().superRefine((r,s)=>{var o,a;if(!t(r)){const i=typeof e=="function"?e(r):typeof e=="string"?{message:e}:e,c=(a=(o=i.fatal)!==null&&o!==void 0?o:n)!==null&&a!==void 0?a:!0,l=typeof i=="string"?{message:i}:i;s.addIssue({code:"custom",...l,fatal:c})}}):ur.create()}const Gy={object:Ae.lazycreate};var J;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(J||(J={}));const qy=(t,e={message:"Input not instance of ".concat(t.name)})=>Ll(n=>n instanceof t,e),Pl=xt.create,Nl=pn.create,Yy=Zs.create,Ky=hn.create,jl=Mr.create,Jy=Bn.create,Xy=Hs.create,Qy=Dr.create,e_=Fr.create,t_=ur.create,n_=Ln.create,r_=Yt.create,s_=zs.create,o_=Tt.create,a_=Ae.create,i_=Ae.strictCreate,c_=Vr.create,l_=co.create,d_=Hr.create,u_=Ot.create,f_=zr.create,p_=Us.create,h_=On.create,m_=or.create,g_=Ur.create,y_=Zr.create,__=mn.create,v_=Wr.create,b_=fr.create,ec=Et.create,w_=jt.create,C_=gn.create,x_=Et.createWithPreprocess,S_=ts.create,T_=()=>Pl().optional(),E_=()=>Nl().optional(),k_=()=>jl().optional(),A_={string:t=>xt.create({...t,coerce:!0}),number:t=>pn.create({...t,coerce:!0}),boolean:t=>Mr.create({...t,coerce:!0}),bigint:t=>hn.create({...t,coerce:!0}),date:t=>Bn.create({...t,coerce:!0})},I_=Q;var I=Object.freeze({__proto__:null,defaultErrorMap:dr,setErrorMap:Iy,getErrorMap:Ds,makeIssue:Fs,EMPTY_PATH:Ry,addIssueToContext:V,ParseStatus:Ke,INVALID:Q,DIRTY:nr,OK:Qe,isAborted:ra,isDirty:sa,isValid:Br,isAsync:Or,get util(){return pe},get objectUtil(){return na},ZodParsedType:H,getParsedType:ln,ZodType:ie,datetimeRegex:Il,ZodString:xt,ZodNumber:pn,ZodBigInt:hn,ZodBoolean:Mr,ZodDate:Bn,ZodSymbol:Hs,ZodUndefined:Dr,ZodNull:Fr,ZodAny:ur,ZodUnknown:Ln,ZodNever:Yt,ZodVoid:zs,ZodArray:Tt,ZodObject:Ae,ZodUnion:Vr,ZodDiscriminatedUnion:co,ZodIntersection:Hr,ZodTuple:Ot,ZodRecord:zr,ZodMap:Us,ZodSet:On,ZodFunction:or,ZodLazy:Ur,ZodLiteral:Zr,ZodEnum:mn,ZodNativeEnum:Wr,ZodPromise:fr,ZodEffects:Et,ZodTransformer:Et,ZodOptional:jt,ZodNullable:gn,ZodDefault:Gr,ZodCatch:qr,ZodNaN:Zs,BRAND:Wy,ZodBranded:Fa,ZodPipeline:ts,ZodReadonly:Yr,custom:Ll,Schema:ie,ZodSchema:ie,late:Gy,get ZodFirstPartyTypeKind(){return J},coerce:A_,any:t_,array:o_,bigint:Ky,boolean:jl,date:Jy,discriminatedUnion:l_,effect:ec,enum:__,function:m_,instanceof:qy,intersection:d_,lazy:g_,literal:y_,map:p_,nan:Yy,nativeEnum:v_,never:r_,null:e_,nullable:C_,number:Nl,object:a_,oboolean:k_,onumber:E_,optional:w_,ostring:T_,pipeline:S_,preprocess:x_,promise:b_,record:f_,set:h_,strictObject:i_,string:Pl,symbol:Xy,transformer:ec,tuple:u_,undefined:Qy,union:c_,unknown:n_,void:s_,NEVER:I_,ZodIssueCode:P,quotelessJson:Ay,ZodError:at});function R_(t,e){return"".concat(t," field of type '").concat(e,"' is required")}function L_(t,e,n="string"){return"'".concat(t,"' field of type '").concat(e,"' must be a ").concat(n)}function pr(t,e){return"".concat(t," field of type '").concat(e,"' must be a non-empty array")}const he={Text:"text",CustomText:"customtext",HTMLContent:"htmlcontent",Media:"media",Carousel:"carousel",QuickReplies:"quickreplies",Buttons:"buttons",MultiContent:"multicontent"},Va=I.object({type:I.enum(["payload","link","call"]),payload:I.string().optional(),display_text:I.string(),phone_number:I.string().optional(),country_code:I.string().optional(),target:I.string().optional(),id:I.string().optional(),url:I.string().optional()}),P_=I.enum([he.Text,he.CustomText,he.HTMLContent,he.Media,he.Carousel,he.QuickReplies,he.Buttons,he.MultiContent]),N_=I.object({media_type:P_}),j_=I.object({media_type:I.literal(he.Text)}),$l=I.object({media_type:I.literal(he.CustomText),text_response:I.string()}),Bl=I.object({media_type:I.literal(he.HTMLContent),content:I.array(I.string({invalid_type_error:L_("content",he.HTMLContent)}),{required_error:R_("content",he.HTMLContent)}).nonempty({message:pr("content",he.HTMLContent)})}),Ol=I.object({media_type:I.literal(he.Media),media:I.object({media_type:I.enum(["image","audio","video","file"]),url:I.string(),ignore_valid:I.boolean().optional(),provider:I.literal("twilio").optional(),getContentTemporaryUrl:I.function().returns(I.promise(I.string())).optional()})}),Ml=I.object({media_type:I.literal(he.Carousel),carousel:I.object({elements:I.array(I.object({title:I.string(),text:I.string().optional(),image_url:I.string().optional(),buttons:I.array(Va).nonempty({message:pr("carousel.elements.buttons",he.Carousel)})})).nonempty({message:pr("carousel.elements",he.Carousel)})})}),Dl=I.object({media_type:I.literal(he.QuickReplies),text_response:I.string().optional(),quick_actions:I.object({elements:I.array(Va).nonempty({message:pr("quick_actions.elements",he.QuickReplies)})})}),Fl=I.object({media_type:I.literal(he.Buttons),text_response:I.string().optional(),quick_actions:I.object({elements:I.array(Va).nonempty({message:pr("quick_actions.elements",he.Buttons)})})}),$_=I.object({media_type:I.literal(he.MultiContent),content:I.array(I.union([$l,Ol,Ml,Dl,Fl,Bl])).nonempty({message:pr("content",he.MultiContent)})}),B_=I.object({alt_text:I.string(),responses:I.array(I.string()),payloads:I.array(N_)}),tc=I.object({alt_text:I.string(),responses:I.array(I.string()),payloads:I.array(I.never().or(j_))}),O_=I.object({alt_text:I.string(),responses:I.array(I.string()),payloads:I.array($l)}),M_=I.object({alt_text:I.string(),responses:I.array(I.string()),payloads:I.array(Ol)}),D_=I.object({alt_text:I.string(),responses:I.array(I.string()),payloads:I.array(Bl)}),F_=I.object({alt_text:I.string(),responses:I.array(I.string()),payloads:I.array(Ml)}),V_=I.object({alt_text:I.string(),responses:I.array(I.string()),payloads:I.array(Dl)}),H_=I.object({alt_text:I.string(),responses:I.array(I.string()),payloads:I.array(Fl)}),z_=I.object({alt_text:I.string(),responses:I.array(I.string()),payloads:I.array($_)});function U_(t){const e=ky(t,10),n=tc.safeParse(e);if(n.success)return n.data;const r=B_.safeParse(e);if(!r.success)throw r.error;let s;const o=r.data.payloads[0].media_type;switch(o){case he.Text:return tc.parse(e);case he.CustomText:return O_.parse(e);case he.HTMLContent:return D_.parse(e);case he.Media:return M_.parse(e);case he.Carousel:return F_.parse(e);case he.QuickReplies:return V_.parse(e);case he.Buttons:return H_.parse(e);case he.MultiContent:return z_.parse(e);default:throw s=o,new Error("Unsupported type: "+s)}}function Vl(t=""){try{const[e,n]=t.split("/");return{prefix:e,suffix:n}}catch(e){return{prefix:"",suffix:""}}}const Hl=["audio/mpeg","audio/mp3","image/jpeg","image/png","video/mp4","video/quicktime","application/pdf"],Z_=Hl.join(",");function hr(t){return t.map(e=>({type:"text",text:e}))}function Ha(t){return t.map(e=>{var i;const{type:n,payload:r,display_text:s,phone_number:o,url:a}=e;switch(n){case"payload":return{type:"reply",payload:r!=null?r:"",text:s};case"call":return{type:"call",payload:"tel:".concat(r!=null?r:o),text:s};case"link":return{type:"link",payload:(i=r!=null?r:a)!=null?i:"",text:s,target:"_blank"};default:console.error("Invalid button type: ",n);break}}).filter(Boolean)}function zl(t,e=""){if(t.length===0)return{lastMessage:e,previousMessages:[]};if(t.length===1)return{lastMessage:t[0],previousMessages:[]};const n=t[t.length-1],r=t.slice(0,-1);return{lastMessage:n,previousMessages:r}}function W_(t){let e;return t instanceof at?(t.issues.forEach(n=>{ut.error("".concat(n.message,": ").concat(n.path.map(r=>typeof r=="number"?"[".concat(r,"]"):r).join(".")))}),e=t.issues.map(n=>n.message).join("\n")):t instanceof Error?(e=t.message,ut.error(t)):e="Unknown error",e}function G_(t,e){const{quick_actions:n,text_response:r}=e,s=r?[r]:t,{lastMessage:o,previousMessages:a}=zl(s,"");return[...hr(a),{type:"buttons",text:o,buttons:Ha(n.elements.slice(0,jr.BUTTONS))}]}function q_(t,e){const n=e.carousel.elements.slice(0,jr.CAROUSEL_CARDS).map(r=>{const{title:s,text:o,image_url:a,buttons:i}=r;return{title:s,description:o,imageUrl:a,buttons:Ha(i.slice(0,jr.CAROUSEL_BUTTONS))}});return[...hr(t.filter(r=>r!=="")),{type:"carousel",cards:n}]}function Y_(t,e){const{media_type:n,url:r,ignore_valid:s,provider:o,getContentTemporaryUrl:a}=e.media;return[...hr(t.filter(i=>i!=="")),{type:n,url:r,ignoreValid:s,provider:o,getContentTemporaryUrl:a,smart_text:{key:"download"}}]}function K_(t,e){const{quick_actions:n,text_response:r}=e,s=r?[r]:t,{lastMessage:o,previousMessages:a}=zl(s,cr.t("yourOptions"));return[...hr(a),{type:"quick_replies",text:o,replies:Ha(n.elements.slice(0,jr.BUTTONS))}]}function J_(t){return[{type:"system",action_type:t.action_type,smart_text:t.smart_text}]}const X_=ut.getSubLogger({name:"receiver"});function Q_(t,e){const{author:n="",sid:r,index:s}=t,{responses:o,payload:a}=ev(t),i="success",c=n===e?"sent":"received",l=new Date(t.dateCreated||Date.now()).getTime(),d=l?oo(l):"",p=bl(t),m=Ma(t),g=wl(m),y=xl(t),_=Ul(o,a);return{index:s,sid:r,tid:"",rid:p,status:i,alignment:c,timestamp:l,formattedTime:d,items:_,role:m,avatar:g,participantName:y}}function Ul(t,e){let n=[];switch(e.media_type){case"text":n=hr(t);break;case"customtext":n=hy(e);break;case"htmlcontent":n=my(e);break;case"carousel":n=q_(t,e);break;case"media":n=Y_(t,e);break;case"buttons":n=G_(t,e);break;case"quickreplies":n=K_(t,e);break;case"system":n=J_(e);break;case"multicontent":n=e.content.map(r=>Ul([],r)).flat();break;case"error":n=[{type:e.media_type,error_message:e.error_message}];break;default:n=hr(t);break}return n}function ev(t){var c,l;const{type:e}=t,n=t.body,r=e==="media";let s=n?[n]:[],o={media_type:"text"};const a=t.attachedMedia;if(r&&a){const d=a[0],p=Vl(d.contentType).prefix,m=()=>d.getContentTemporaryUrl();o={media_type:"media",media:{media_type:["video","image","audio"].indexOf(p)>-1?p:"file",ignore_valid:!0,provider:"twilio",getContentTemporaryUrl:m}}}const i=t.attributes;if(i!=null&&i.is_virtual_agent&&n)try{const d=U_(JSON.parse(n));s=d.responses,o=d.payloads[0]||o}catch(d){X_.warn("Failed to parse virtual agent message=".concat(typeof d=="string"?d:d==null?void 0:d.message),d);const p=W_(d);return{responses:[],payload:{media_type:"error",error_message:p}}}return((c=i==null?void 0:i.action)==null?void 0:c.name)==="digital_interaction_assigned"?{responses:[],payload:{media_type:"system",action_type:"assign",smart_text:{key:"assignMessage",options:{name:(l=i.action.metadata)==null?void 0:l.cur_display_name}}}}:{responses:s,payload:o}}const aa="close_conversation_by_participant";function Zl(t,e){return Ta(async()=>{var r,s,o;const n=await St.getState().getCredentials(t);return n!=null&&n.error?Promise.reject(new Error("Failed to fetch TwilioCredentials reason=".concat(n.error," payload=").concat(Fe(t)))):n!=null&&n.data?t.bootstrap_type===Rs.getAccessToken?{accessToken:((r=n.data)==null?void 0:r.accessToken)||"",region:((s=n.data)==null?void 0:s.region)||""}:t.bootstrap_type===Rs.getConversationAndParticipant?{roomId:((o=n.data)==null?void 0:o.roomId)||""}:n.data:Promise.reject(new Error("Failed to fetch TwilioCredentials reason=response empty payload=".concat(Fe(t))))},{defaultRetry:e})}function tv(t){return t?Date.now()-t>=jf:!0}function nv(t=""){var i,c,l,d;const e=(c=(i=ve.getState().config)==null?void 0:i.appProps)==null?void 0:c.proxyHost,n=(d=(l=ve.getState().config)==null?void 0:l.appConfig)==null?void 0:d.languageCode,r=S.getState().layoutDirection,s=location.protocol==="https:",o=es();let a=t;if(a){const p=["ui_version=2","layout_direction=".concat(r),n?"lang=".concat(n):"",o?"touchpoint_id=".concat(o):""];e&&[["https://api.talkdeskstg.com","".concat(e).concat(In.tdGatewayUs)],["undefined","".concat(e).concat(In.tdGatewayEu)],["undefined","".concat(e).concat(In.tdGatewayCa)],["undefined","".concat(e).concat(In.tdGatewayUsFed)]].forEach(([g,y])=>{if(a.indexOf(g)>-1){const _="".concat(s?"https":"http","://").concat(y);a=a.replace(g,_),p.push("proxy_host=".concat(encodeURIComponent(_)))}}),a=a.indexOf("?")>-1?"".concat(a,"&").concat(p.filter(Boolean).join("&")):"".concat(a,"?").concat(p.filter(Boolean).join("&"))}return a}function Wl(t=""){var s;const e=(s=ve.getState().config)==null?void 0:s.appProps,n=Object.values(Lo).indexOf(t||"")>-1?t:Lo.US1,r={region:n};if(e!=null&&e.proxyHost){const o=location.protocol==="https:"?"wss":"ws";r.Twilsock={uri:"".concat(o,"://").concat(e.proxyHost).concat(n===Lo.US1?In.twilioUs1:In.twilioIe1)}}return r}async function Gl(t,e,n){return Ta(async()=>{try{const{Client:r}=await Ce(async()=>{const{Client:s}=await import("./browser-BWWtcJkb.js").then(o=>o.b);return{Client:s}},__vite__mapDeps([17,1]),import.meta.url);return new Promise((s,o)=>{const a=new r(t,e);a.once("initFailed",i=>{var c;a.removeAllListeners(),a.shutdown(),o(new Error("Failed to create twilio client reason=".concat(((c=i==null?void 0:i.error)==null?void 0:c.message)||"unknown error")))}),a.once("stateChanged",i=>{i==="initialized"&&s(a)})})}catch(r){return Promise.reject("Failed to create twilio client reason=".concat(_t(r)))}},{defaultRetry:n})}async function rv(t){const e=S.getState().createIdentity(),n=await Zl({identity:e,bootstrap_type:Rs.getAccessToken},t);return n.accessToken?(S.getState().setCredentials({region:n.region,accessToken:n.accessToken,createAccessTokenAt:Date.now()}),S.getState().credentials):Promise.reject(new Error("Failed to fetch twilio access token reason=access token empty"))}async function sv(t){var m;const{roomId:e,accessToken:n,createAccessTokenAt:r}=S.getState().credentials;let s=!1;if(e)return S.getState().credentials;await St.getState().conversationStart();const o=await St.getState().getAllConfig(),i={...(m=o==null?void 0:o.data)==null?void 0:m.context,...S.getState().formData},l={identity:S.getState().createIdentity(),custom_fields:i};s=tv(r),n&&!s&&(l.bootstrap_type=Rs.getConversationAndParticipant);const d=await Zl(l,t);if(!(d!=null&&d.roomId))return Promise.reject(new Error("Failed to fetch twilio room id reason=no found roomId"));if(!n&&!(d!=null&&d.accessToken))return Promise.reject(new Error("Failed to fetch twilio room id reason=no found accessToken"));n?S.getState().setCredentials(s?{roomId:d.roomId,accessToken:d.accessToken,createAccessTokenAt:Date.now()}:{roomId:d.roomId}):S.getState().setCredentials(d);const p=S.getState().credentials;return yt.getState().emit(Ct.conversationCreated,{identity:S.getState().identity,credentials:p}),p}function ql(t){var n;const e=t.attributes;if(!(e!=null&&e.isReachabilityMessage)&&!(((n=e==null?void 0:e.action)==null?void 0:n.name)==="digital_interaction_assigned"&&(ay(t),fy(t)))&&!(e!=null&&e.tid&&(e==null?void 0:e.tid)!==""&&Ve.getState().update(e.tid,uy(t))))return Q_(t,S.getState().identity)}async function Yl(t,e=100){try{if(!t)return Promise.reject(new Error("Failed to fetch all twilio messages reason=no found conversation"));const n=await t.getMessages(e);if(n!=null&&n.items){const r=n.items.map(s=>ql(s)).filter(Boolean);return Ve.getState().set(r),r}return Promise.reject(new Error("Failed to fetch all twilio messages sid=".concat(t.sid," reason=empty response")))}catch(n){return Promise.reject(new Error("Failed to fetch all twilio messages sid=".concat(t==null?void 0:t.sid," reason=").concat(_t(n))))}}async function Kl(t){const e=S.getState().identity;try{const r=(await t.getParticipants()).find(s=>s.identity===e);return r||Promise.reject(new Error("Failed to fetch contact person for twilio conversation participant sid=".concat(t.sid," identity=").concat(e," reason=contact person no found")))}catch(n){return Promise.reject(new Error("Failed to fetch contact person for conversation participant sid=".concat(t.sid," identity=").concat(e," reason=").concat(_t(n))))}}function Mn(t){return t&&py(t)?t:null}function nc(t){const e=Mn(t==null?void 0:t.attributes),n=(e==null?void 0:e.original_interaction_id)||"",r=(e==null?void 0:e.interaction_stage)||"";let s=(e==null?void 0:e.feedback_link)||"",o=!1;return e?(s=nv(s),!r&&s&&(o=!0),r==="END"&&s&&(o=!0),{interactionId:n,feedbackLink:s,interactionStage:r,shouldLoadFeedback:o}):{interactionId:n,feedbackLink:s,interactionStage:r,shouldLoadFeedback:o}}function ov(t){const e=Mn(t==null?void 0:t.attributes);return e?{selfClosed:(e==null?void 0:e.update_reasons)===aa,bootstrapped:!!(e!=null&&e.bootstrapped)}:{selfClosed:!1,bootstrapped:!1}}function av(t){var e;return((e=t.state)==null?void 0:e.current)==="active"}function iv({instance:t,selfClosed:e,shouldLoadFeedback:n}){return!!(!av(t)||e||n)}function cv(t){return Ta(async()=>{try{return await t.updateAttributes(Object.assign(Mn(t==null?void 0:t.attributes)||{},{bootstrapped:!0})),!0}catch(e){return Promise.reject(new Error("Failed to trigger flow for twilio participant sid=".concat(t.sid," reason=").concat(_t(e))))}},{defaultRetry:3})}async function lv(t){const e=await Kl(t);if(!e)return Promise.reject(new Error("Failed to fetch contact person participant reason=no found"));const n=await e.getUser();if(!n)return Promise.reject(new Error("Failed to fetch contact person user reason=no found"));const r=Mn(e==null?void 0:e.attributes)||{},s=Mn(n==null?void 0:n.attributes)||{};return await Promise.all([e.updateAttributes({...r,update_reasons:aa}),n.updateAttributes({...s,update_reasons:aa})]),!0}function Fo(t,e){Ve.getState().update(e,{status:"failure",resend:async()=>{S.getState().isNot("conversation")||(Ve.getState().remove(e),await Ts.sendMessage(t))}})}async function dv(t){var e,n;try{let r=Date.now(),s=Date.now();t.shouldFetchAccessToken&&(await rv(0),r=Date.now()-r,yt.getState().emit(Ct.preloadClient,{identity:S.getState().identity,credentials:S.getState().credentials}));const o=await Gl(S.getState().credentials.accessToken,Wl(S.getState().credentials.region),0);return s=Date.now()-s,(e=t==null?void 0:t.onResolve)==null||e.call(t,{fetchAccessTokenDuration:r,connectClientDuration:s}),{client:o}}catch(r){return(n=t==null?void 0:t.onReject)==null||n.call(t,r),{error:r}}}async function uv(t,e){try{return await t.peekConversationBySid(e)}catch(n){return Promise.reject(new Error("Failed to fetch twilio conversation sid=".concat(e," reason=").concat(_t(n))))}}const Kn=ut.getSubLogger({name:"TwilioClient"});class fv{constructor(e){de(this,"_retryConfiguration",{fetchProviderRoomId:2,createProviderClient:3,connectProviderClient:0});de(this,"_preloadClientPromise",null);de(this,"_providerClient",null);de(this,"_bindEventsHandlers",null);de(this,"_preloadClientData",null);this.parent=e}handleOnStateChanged(e){Kn.info("client changed state=".concat(e," conversationEnded=").concat(this.parent.conversation.isEnd)),!this.parent.conversation.isEnd&&(e==="connected"?(this.parent.status="activated",S.getState().emit("reconnect"),Yl(this.parent.conversation.current).catch(n=>Kn.warn("Failed to fetch messages after reconnect error=".concat(_t(n))))):(this.parent.status="deactivated",S.getState().emit("disconnect")))}handleOnTokenExpired(){Kn.warn("client token expired"),S.getState().isNot(Se.Error)&&(S.getState().go(Se.Error),this.parent.destroy())}listenerEvents(){if(this._providerClient&&!this._bindEventsHandlers){const e=this.handleOnStateChanged.bind(this),n=this.handleOnTokenExpired.bind(this);this._bindEventsHandlers=()=>{var r,s;(r=this._providerClient)==null||r.off("connectionStateChanged",e),(s=this._providerClient)==null||s.off("tokenExpired",n)},this._providerClient.on("connectionStateChanged",e),this._providerClient.on("tokenExpired",n)}}async preload(e){if(!S.getState().credentials.roomId){if(this._preloadClientPromise&&e==="tabEvent"){const n=await this._preloadClientPromise;if(n!=null&&n.client){await n.client.updateToken(S.getState().credentials.accessToken),Kn.debug("Success update twilio token for preload client scene=".concat(e));return}}this._preloadClientPromise||(this._preloadClientPromise=dv({shouldFetchAccessToken:e!=="tabEvent",onResolve:n=>{this._preloadClientData=n}})),await this._preloadClientPromise}}async bootstrap(e,n){var s,o;const r=Kn.startChildSpan("Bootstrap",n);try{if(this._preloadClientPromise){const l=await this._preloadClientPromise;l!=null&&l.client&&(this._providerClient=l.client),r==null||r.setAttributes({preloadFetchAccessTokenDuration:((s=this._preloadClientData)==null?void 0:s.fetchAccessTokenDuration)||0,preloadConnectClientDuration:((o=this._preloadClientData)==null?void 0:o.connectClientDuration)||0,preloadProviderConnectClientError:_t(l==null?void 0:l.error)})}const a=Date.now(),{accessToken:i,region:c}=await sv(this._retryConfiguration.fetchProviderRoomId);if(r==null||r.setAttributes({fetchTwilioRoomIdDuration:Date.now()-a}),this._providerClient)await this._providerClient.updateToken(i),Kn.debug("Success update twilio client token for connect client");else{const l=Date.now(),d=e==="pageLoaded"?this._retryConfiguration.connectProviderClient:this._retryConfiguration.createProviderClient;this._providerClient=await Gl(i,Wl(c),d),r==null||r.setAttributes({connectProviderClientDuration:Date.now()-l})}return this.listenerEvents(),r==null||r.setStatus({code:1}),r==null||r.end(),this._providerClient}catch(a){throw r==null||r.recordException(a),r==null||r.setStatus({code:2,message:_t(a)}),r==null||r.end(),a}}destroy(){var e,n,r;(e=this._bindEventsHandlers)==null||e.call(this),this._bindEventsHandlers=null,(n=this._providerClient)==null||n.removeAllListeners(),(r=this._providerClient)==null||r.shutdown(),this._providerClient=null,this._preloadClientPromise=null,this._preloadClientData=null}get current(){return this._providerClient}}const sn=ut.getSubLogger({name:"TwilioConversation"});class pv{constructor(e){de(this,"_providerConversation",null);de(this,"_contactPersonParticipant",null);de(this,"_bindEventsHandlers",null);de(this,"_isEnd",!1);this.parent=e}handleOnUpdated(e){const{conversation:n,updateReasons:r}=e,{interactionId:s,feedbackLink:o,shouldLoadFeedback:a}=nc(n),i={};!S.getState().interactionId&&s&&(i.interactionId=s),!S.getState().shouldLoadFeedback&&a&&(i.shouldLoadFeedback=a),!S.getState().feedbackLink&&o&&(i.feedbackLink=o),Object.keys(i).length>0&&S.setState(i),a&&S.getState().isNot(Se.End)&&S.getState().go(Se.End),sn.info("Received updated sid=".concat(n.sid," updateReasons=").concat(Fe(r)," attrs=").concat(Fe(n==null?void 0:n.attributes)," updatedAppState=").concat(Fe(i)))}handleOnMessageAdded(e){var r,s,o,a,i,c,l;sn.info("Received message added. sid=".concat((r=this._providerConversation)==null?void 0:r.sid," m_sid=").concat(e.sid," p_sid=").concat(e.participantSid," index=").concat(e.index," type=").concat(e.type," author=").concat(e.author," attr=").concat(Fe(Mn(e==null?void 0:e.attributes)?js(Mn(e==null?void 0:e.attributes),["raw_message","rawMessage","attachments"]):"")," create_at=").concat((s=e.dateCreated)==null?void 0:s.toISOString()," update_at=").concat((o=e.dateUpdated)==null?void 0:o.toISOString()));const n=ql(e);if(n){Ve.getState().add(n);const d=n.alignment;d&&(S.getState().hiddenScreenLoading(),(a=this.parent)!=null&&a.receivedFirstMessageSpan&&(this.parent.receivedFirstMessageSpan.setAttributes({roomId:(i=this._providerConversation)==null?void 0:i.sid,m_sid:e==null?void 0:e.sid,p_sid:(e==null?void 0:e.participantSid)||"",index:e==null?void 0:e.index,type:e==null?void 0:e.type,author:(e==null?void 0:e.author)||"",attributes:Fe(e==null?void 0:e.attributes),create_at:(c=e.dateCreated)==null?void 0:c.toISOString(),update_at:(l=e.dateUpdated)==null?void 0:l.toISOString()}),this.parent.receivedFirstMessageSpan.setStatus({code:1}),this.parent.receivedFirstMessageSpan.end(),this.parent.receivedFirstMessageSpan=null)),d&&!io(n.tid)&&Ve.getState().hideTypingMessage()}}handleOnTypingStarted(e){var r;!ul(ve.getState()).showTypingIndicatorButton||!this._contactPersonParticipant||e.sid!==this._contactPersonParticipant.sid&&Ve.getState().add(ta({role:"agent",agentName:(r=e==null?void 0:e.attributes)==null?void 0:r.participant_display_name}))}handleOnTypingEnded(e){this._contactPersonParticipant&&e.sid!==this._contactPersonParticipant.sid&&Ve.getState().hideTypingMessage()}handleOnRemoved(e){sn.info("Received conversation removed sid=".concat(e.sid)),S.getState().isNot(Se.End)&&S.getState().go(Se.End)}listenerEvents(){if(this._providerConversation&&!this._bindEventsHandlers){const e=this.handleOnUpdated.bind(this),n=this.handleOnMessageAdded.bind(this),r=this.handleOnTypingStarted.bind(this),s=this.handleOnTypingEnded.bind(this),o=this.handleOnRemoved.bind(this);this._bindEventsHandlers=()=>{var a,i,c,l,d;(a=this._providerConversation)==null||a.off("updated",e),(i=this._providerConversation)==null||i.off("messageAdded",n),(c=this._providerConversation)==null||c.off("typingStarted",r),(l=this._providerConversation)==null||l.off("typingEnded",s),(d=this._providerConversation)==null||d.off("removed",o)},this._providerConversation.on("updated",e),this._providerConversation.on("messageAdded",n),this._providerConversation.on("typingStarted",r),this._providerConversation.on("typingEnded",s),this._providerConversation.on("removed",o)}}async bootstrap(e,n){const r=this.parent.client.current,s=S.getState().credentials.roomId,o=["pageLoaded","sendMessage","submitInitialScreen"].indexOf(e)>-1;if(!r||!s)throw new Error("No found twilio client or conversation sid");const a=sn.startChildSpan("Bootstrap",n);try{const i=Date.now();this._providerConversation=await uv(r,s),this.listenerEvents(),a==null||a.setAttributes({fetchTwilioConversationDuration:Date.now()-i});const c=Date.now();this._contactPersonParticipant=await Kl(this._providerConversation),a==null||a.setAttributes({fetchContactPersonTwilioParticipantDuration:Date.now()-c});const{interactionId:l,feedbackLink:d,shouldLoadFeedback:p}=nc(this._providerConversation),{selfClosed:m,bootstrapped:g}=ov(this._contactPersonParticipant);if(S.setState({interactionId:l,feedbackLink:d,shouldLoadFeedback:p}),this._isEnd=iv({instance:this._providerConversation,selfClosed:m,shouldLoadFeedback:p}),!this._isEnd&&!g&&o){const w=Date.now();await cv(this._contactPersonParticipant),a==null||a.setAttributes({updateContactPersonParticipantDuration:Date.now()-w}),sn.debug("Success trigger flow for update contact person attr")}const y=this._isEnd?Se.End:Se.Conversation,_=Date.now();return await Yl(this._providerConversation),a==null||a.setAttributes({fetchTwilioAllMessagesDuration:Date.now()-_}),S.getState().isNot(y)&&S.getState().go(y),a==null||a.setStatus({code:1}),a==null||a.end(),!0}catch(i){throw a==null||a.recordException(i),a==null||a.setStatus({code:2,message:_t(i)}),a==null||a.end(),i}}typing(){return this._providerConversation?this._providerConversation.typing():Promise.resolve()}async end(){var n;const e=sn.startSpan("End");if(!this._providerConversation){const r="Failed to end conversation no found conversation";return e==null||e.recordException(new Error(r)),e==null||e.setStatus({code:2,message:r}),e==null||e.end(),sn.debug(r),!1}try{return await lv(this._providerConversation),this._isEnd=!0,yt.getState().emit(Ct.conversationEnded),S.getState().enableLoadFeedback(),e==null||e.setStatus({code:1}),e==null||e.end(),(n=ve.getState().config)!=null&&n.feedbackFlowId&&await Sa(1500),!0}catch(r){const s="Failed to end conversation sid=".concat(this._providerConversation.sid," error=").concat(_t(r));return e==null||e.recordException(r),e==null||e.setStatus({code:2,message:s}),e==null||e.end(),sn.debug(s),!1}}async send(e,n){if(!this._providerConversation)return Promise.reject(new Error("No found conversation"));const{payload:r,data:s}=e,o=r?{tid:n,payload:r,payload_type:"payload"}:{tid:n};await this._providerConversation.sendMessage(s,o)}destroy(){var e,n;(e=this._bindEventsHandlers)==null||e.call(this),this._bindEventsHandlers=null,(n=this._providerConversation)==null||n.removeAllListeners(),this._providerConversation=null,this._contactPersonParticipant=null,this._isEnd=!1}get current(){return this._providerConversation}get isEnd(){return this._isEnd}}const Jn=ut.getSubLogger({name:"TwilioConnection"});class hv{constructor(){de(this,"_client");de(this,"_conversation");de(this,"_status","deactivated");de(this,"_bootstrapPromise",null);de(this,"_receivedFirstMessageSpan",null);this._client=new fv(this),this._conversation=new pv(this)}handlerOnBootstrapError(e,n){const r=_t(e),s="Failed to bootstrap twilio connection sid=".concat(S.getState().credentials.roomId," error=").concat(r);S.getState().hiddenScreenLoading(),n==null||n.recordException(e),n==null||n.setStatus({code:2,message:s}),n==null||n.end(),Jn.debug(s);const o=/Twilsock: request timeout/gi.test(r);return S.getState().is(S.getState().getInitialPage())&&o||S.getState().isNot(Se.Error)&&(S.getState().go(Se.Error),yt.getState().emit(Ct.conversationEndedByError)),!1}linkReceivedFirstMessageSpanToBootstrap(e,n){var r,s;if(["sendMessage","submitInitialScreen"].indexOf(e)>-1){this.receivedFirstMessageSpan=Jn.startSpan("Received first message for ".concat(e));const o=n==null?void 0:n.spanContext(),a=(r=this.receivedFirstMessageSpan)==null?void 0:r.spanContext();o&&((s=this.receivedFirstMessageSpan)==null||s.addLink({context:o})),a&&(n==null||n.addLink({context:a}))}}async bootstrap(e){var r;const n=Jn.startSpan("Bootstrap for ".concat(e));this.linkReceivedFirstMessageSpanToBootstrap(e,n);try{return await this._client.bootstrap(e,n),await this._conversation.bootstrap(e,n),S.setState({hasInitialized:!0}),this.status="activated",n==null||n.setAttributes({roomId:(r=this._conversation.current)==null?void 0:r.sid}),n==null||n.setStatus({code:1}),n==null||n.end(),Sa(1e3).then(()=>S.getState().emit(qt.need_scroll_to_bottom)),!0}catch(s){return this.handlerOnBootstrapError(s,n)}}preloadClient(e){return this._client.preload(e)}async init(e){if(!!!S.getState().credentials.roomId&&e==="pageLoaded"){const r=S.getState().getInitialPage();return S.getState().isNot(r)&&S.getState().go(r),!1}return this._bootstrapPromise||(this._bootstrapPromise=this.bootstrap(e)),await this._bootstrapPromise}async send(e,n){try{return this._bootstrapPromise?await this._bootstrapPromise?(await this._conversation.send(e,n),Ve.getState().showTypingMessage(),S.getState().emit("send_success"),!0):(Jn.debug("Failed to send message error=connection bootstrap failed"),Fo(e,n),!1):(Jn.debug("Failed to send message error=no start connection bootstrap"),Fo(e,n),!1)}catch(r){return Jn.warn("Failed to send message error=".concat(_t(r))),S.getState().emit("send_failure",r),Fo(e,n),!1}}typing(){return this._conversation.typing()}async end(){return this._conversation.end()}destroy(){this._conversation.destroy(),this._client.destroy(),this._bootstrapPromise=null,this._status="deactivated",this.receivedFirstMessageSpan=null,Ve.getState().clear(),S.getState().reset(["hasInitialized","credentials","identity","shouldLoadFeedback","feedbackLink","feedbackStatus","formData","interactionId","chatContentScroll","initialScreenScroll"])}set status(e){this._status!==e&&(this._status=e)}get status(){return this._status}get client(){return this._client}get conversation(){return this._conversation}get receivedFirstMessageSpan(){return this._receivedFirstMessageSpan}set receivedFirstMessageSpan(e){this._receivedFirstMessageSpan=e}}const mv=new hv;class gv{constructor(){de(this,"_current",null);de(this,"_providerImps",{[Ei.twilio]:mv});this._current=Ei.twilio,this.listenerPageEvents(),this.listenerTabEvents()}listenerPageEvents(){S.getState().on("leave_conversation",()=>{S.getState().reset(["unreadMessageCount"])}),S.getState().on("enter_error",()=>{this.clear()})}listenerTabEvents(){yt.getState().on(Ct.preloadClient,e=>{const{credentials:n,identity:r}=e;S.getState().setCredentials({accessToken:n.accessToken,region:n.region,createAccessTokenAt:n.createAccessTokenAt}),S.getState().createIdentity(!0,r),this.preloadClient("tabEvent")}),yt.getState().on(Ct.conversationCreated,e=>{const{credentials:n,identity:r}=e;S.getState().setCredentials(n),S.getState().createIdentity(!0,r),S.getState().isNot(Se.Conversation)&&S.getState().go(Se.Conversation),this.init("tabEvent")}),yt.getState().on(Ct.conversationEnded,()=>{S.getState().enableLoadFeedback(),S.getState().isNot(Se.End)&&S.getState().go(Se.End)}),yt.getState().on(Ct.conversationEndedByError,()=>{S.getState().isNot(Se.Error)&&S.getState().go(Se.Error)}),yt.getState().on(Ct.resetFrame,()=>{const e=S.getState().getInitialPage();S.getState().isNot(e)&&(S.getState().go(e),this.clear())}),yt.getState().on(Ct.enableScreenLoading,e=>{S.getState().enableScreenLoading(e,!1)})}preloadClient(e){var n;if((n=ve.getState().config)!=null&&n.enableSplitTwilioBootstrap&&this.connection)return this.connection.preloadClient(e)}async init(e){return this.connection?this.connection.init(e):!1}clear(){if(this.connection)return this.connection.destroy()}async sendMessage(e){if(this.connection){if(S.getState().isNot("conversation"))return!1;S.getState().hasInitialized||this.init("sendMessage");const{data:n,type:r}=e,s=n instanceof FormData,o=$c(),a=s&&Object.values(Uf).indexOf(r)>-1;if(!s||a){const i=s?ly(o,n,r,{role:"contact"}):dy(o,n,{role:"contact"});Ve.getState().add(i)}return this.connection.send(e,o)}return!1}typing(){if(this.connection)return this.connection.typing()}async end(){return this.connection?this.connection.end():!1}get status(){return this.connection?this.connection.status:"deactivated"}get connection(){return this._current?this._providerImps[this._current]:null}}const Ts=new gv,yv=function(t,e){for(let n=t.length-1;n>=0;n--)if(e(t[n],n,t))return n;return-1};let vs=null;const _v="td-message-".concat(es()||"unknown-touchpoint-id"),Ve=vr()(Rc(Lc((t,e)=>({lastReadIndexByConversationSid:{},assigneeNamesByConversationSid:{},messages:[],add:n=>{const{messages:r,lastReadIndexByConversationSid:s}=e(),o=S.getState().credentials.roomId,{sid:a,tid:i,alignment:c,index:l}=n;if(a!==""&&r.find(g=>g.sid===a)||i!==""&&r.find(g=>g.tid===i))return;const d={lastReadIndexByConversationSid:s,messages:r},p=c==="received",m=S.getState().isFrameOpened;o&&l!==void 0&&p&&m&&(d.lastReadIndexByConversationSid[o]=l,S.getState().updateUnreadMessageCount(1)),d.messages=[...r,n],t(d)},set:n=>{const{messages:r,lastReadIndexByConversationSid:s}=e(),o=S.getState().credentials.roomId;if(o){let a=-1;const i=n.map(l=>{const{sid:d,tid:p,alignment:m,index:g}=l;if(!(d!==""&&r.find(y=>y.sid===d))&&!(p!==""&&r.find(y=>y.tid===p)))return o&&g!==void 0&&m==="received"&&S.getState().isFrameOpened&&(a=g),l}).filter(Boolean),c={lastReadIndexByConversationSid:s,messages:r};a>-1&&(c.lastReadIndexByConversationSid[o]=a),i.length&&(c.messages=[...r,...i]),t(c)}},clear:()=>{const{lastReadIndexByConversationSid:n,assigneeNamesByConversationSid:r}=e(),s=S.getState().credentials.roomId;t({messages:[],lastReadIndexByConversationSid:js(n,s),assigneeNamesByConversationSid:js(r,s)})},update:(n,r)=>{if(n==="")return!1;const s=[...e().messages],o=s.findIndex(a=>a.tid===n);return o>-1?(s[o]=Object.assign({...s[o]},r),t({messages:s}),!0):!1},batchUpdate:(n,r)=>{const s=e().messages.map(o=>n(o)?Object.assign(o,r):o);t({messages:s})},remove:n=>{if(n==="")return!1;const r=[...e().messages],s=r.findIndex(o=>o.tid===n);return s>-1?(r.splice(s,1),t({messages:r}),!0):!1},send:async n=>{await Ts.sendMessage(n)},end:async()=>await Ts.end(),updateLastReadIndex:()=>{const{messages:n,lastReadIndexByConversationSid:r}=e(),s=S.getState().credentials.roomId;if(s){const o=n.filter(i=>i.alignment==="received").flatMap(i=>i.items.map(c=>({...c,index:i.index}))),a=o[o.length-1]||{index:-1};(a==null?void 0:a.index)!==void 0&&t({lastReadIndexByConversationSid:{...r,[s]:a.index}})}},typing:async()=>{await Ts.typing()},showTypingMessage:()=>{if(!ul(ve.getState()).showTypingIndicatorButton)return;const{messages:r,add:s,hideTypingMessage:o}=e(),a=S.getState().typingMode,i=r.find(({tid:c})=>io(c));if(a==="va"){vs&&clearTimeout(vs),i&&o(),s(ta({role:"va"})),vs=setTimeout(()=>{o(),vs=null},5e3);return}a==="agent"&&i&&(o(),s(ta({role:"agent"})))},hideTypingMessage:()=>{const{remove:n}=e();cy(r=>n(r))},setAssigneeName:(n,r)=>{if(!n)return"";const s=S.getState().credentials.roomId,o=e().assigneeNamesByConversationSid;s&&(o[s]||(o[s]={}),o[s][n]=r,t({assigneeNamesByConversationSid:o}))},getAssigneeName:n=>{var o;if(!n)return"";const{assigneeNamesByConversationSid:r}=e(),s=S.getState().credentials.roomId;return((o=r[s])==null?void 0:o[n])||""}}),{name:_v,partialize:t=>({assigneeNamesByConversationSid:t.assigneeNamesByConversationSid,lastReadIndexByConversationSid:t.lastReadIndexByConversationSid})}))),vv=t=>t.messages,bv=t=>({set:t.set,add:t.add,send:t.send,clear:t.clear,update:t.update,remove:t.remove,batchUpdate:t.batchUpdate,end:t.end,updateLastReadIndex:t.updateLastReadIndex,typing:t.typing,showTypingMessage:t.showTypingMessage,hideTypingMessage:t.hideTypingMessage,getAssigneeName:t.getAssigneeName,setAssigneeName:t.setAssigneeName}),wv=t=>{const{messages:e,lastReadIndexByConversationSid:n}=t,r=S.getState().credentials.roomId,s=n[r]||-1,o=e.filter(l=>l.alignment==="received").flatMap(l=>l.items.map(d=>({...d,index:l.index}))),a=o[o.length-1],i=a!=null&&a.index?a.index:-1;if(s>=i)return 0;const c=yv(o,l=>l.index===s);return o.length-1-c},Cv=t=>t.messages.find(n=>io(n.tid))||null,xv=t=>{const{messages:e}=t;return e.length?e.reduce((r,s)=>s.alignment==="received"&&!io(s.tid)?s:r,{}).role!=="va"?"agent":"va":"agent"},OS=()=>Ve(_n(vv)),Sv=()=>Ve(_n(Cv)),za=()=>Ve(_n(bv));Ve.subscribe(wv,async t=>{await St.getState().setBadge(t)});Ve.subscribe(xv,async t=>{S.setState({typingMode:t})});const Tv=t=>({go:t.go,on:t.on,off:t.off,getInitialPage:t.getInitialPage,emit:t.emit,reset:t.reset,is:t.is,isNot:t.isNot,focusUserInputArea:t.focusUserInputArea,setIsFrameOpened:t.setIsFrameOpened,setCredentials:t.setCredentials,hasProviderCredentials:t.hasProviderCredentials,createIdentity:t.createIdentity,setFormData:t.setFormData,setLayoutDirection:t.setLayoutDirection,enableScreenLoading:t.enableScreenLoading,hiddenScreenLoading:t.hiddenScreenLoading,updateFeedbackStatus:t.updateFeedbackStatus,updateChatContentScroll:t.updateChatContentScroll,updateInitialScreenScroll:t.updateInitialScreenScroll,updateInitialScreenHeight:t.updateInitialScreenHeight,enableLoadFeedback:t.enableLoadFeedback,updateUnreadMessageCount:t.updateUnreadMessageCount}),Ev=t=>t.page,kv=t=>t.hasInitialized&&t.page==="conversation",Av=t=>(t.hasInitialized&&t.page==="conversation"||t.page==="end")&&!!t.interactionId,Iv=t=>t.shouldLoadFeedback,Rv=t=>t.feedbackLink,Lv=t=>{const e=t.feedbackStatus.status;return{...t.feedbackStatus,active:e==="SURVEY_UNSUBMITTED",hidden:e==="SURVEY_NOT_AVAILABLE",pending:e==="init",showMessage:["init","SURVEY_UNSUBMITTED"].indexOf(e)===-1}},Jl=t=>t.isFrameOpened,Xl=t=>t.layoutDirection===Nr.rtl,Pv=t=>t.showScreenLoading,Nv=t=>{const{chatContentScroll:e}=t,n=e.scrollOver!==0;return{...e,enableScroll:n,showScrollToBottom:n&&e.scrollPercent<96}},jv=t=>t.initialScreenScroll,$v=t=>t.unreadMessageCount,Dn=()=>S(_n(Tv)),MS=()=>S(Ev),Bv=()=>S(kv),Ov=()=>S(Av),DS=()=>S(Iv),FS=()=>S(Rv),Mv=()=>S(Lv),Ql=()=>S(Jl),ed=()=>S(Xl),VS=()=>S(Pv),td=()=>S(Nv),Dv=()=>S(jv),HS=()=>S($v);S.subscribe(Jl,t=>{t&&Ve.getState().updateLastReadIndex()});S.subscribe(Xl,t=>{const e=document.documentElement;t?e.setAttribute("data-layout-direction",Nr.rtl):e.removeAttribute("data-layout-direction")});var mr=(t=>(t.LEFT="left",t.RIGHT="right",t))(mr||{});const nd=E.createContext({open:!1,align:"left"}),Fv=nd.Provider,rd=()=>E.useContext(nd),Vv=({handler:t,isExecuted:e,nodes:n})=>{E.useEffect(()=>{if(!(n!=null&&n[0])||!e)return;const r=o=>n.some(a=>a===o||(a==null?void 0:a.contains(o))),s=({target:o})=>{o instanceof Node&&r(o)||t==null||t()};return document.addEventListener("click",s),window.addEventListener("blur",s),()=>{document.removeEventListener("click",s),window.removeEventListener("blur",s)}},[e,n,t])};function tt(t){return f.jsx(E.Suspense,{children:t.children})}const Hv=Re.lazy(()=>Ce(()=>import("./Arrow-6NOPDRoB.js"),__vite__mapDeps([18,1]),import.meta.url)),zv=Re.lazy(()=>Ce(()=>import("./Attachment-BomkX3uz.js"),__vite__mapDeps([19,1]),import.meta.url)),Uv=Re.lazy(()=>Ce(()=>import("./Close-BQSthrZa.js"),__vite__mapDeps([20,1]),import.meta.url)),Zv=Re.lazy(()=>Ce(()=>import("./Clear-BtASIaZA.js"),__vite__mapDeps([21,1]),import.meta.url)),Wv=Re.lazy(()=>Ce(()=>import("./Confirm-BiaOBJcr.js"),__vite__mapDeps([22,1]),import.meta.url)),Gv=Re.lazy(()=>Ce(()=>import("./Emoji-THg1m4wf.js"),__vite__mapDeps([23,1]),import.meta.url)),qv=Re.lazy(()=>Ce(()=>import("./Minimize-D_7FTTz6.js"),__vite__mapDeps([24,1]),import.meta.url)),Yv=Re.lazy(()=>Ce(()=>import("./MoreVert-Bt8riu2F.js"),__vite__mapDeps([25,1]),import.meta.url)),Kv=Re.lazy(()=>Ce(()=>import("./Retry-kADmrIr4.js"),__vite__mapDeps([26,1]),import.meta.url)),Jv=Re.lazy(()=>Ce(()=>import("./Send-B3z8J9Wo.js"),__vite__mapDeps([27,1]),import.meta.url)),Xv=Re.lazy(()=>Ce(()=>import("./Warning-DD_rkQ7v.js"),__vite__mapDeps([28,1]),import.meta.url)),Qv=Re.lazy(()=>Ce(()=>import("./Logo-Cq9VJqYi.js"),__vite__mapDeps([29,1]),import.meta.url)),eb=Re.lazy(()=>Ce(()=>import("./Download-B-fOxnU7.js"),__vite__mapDeps([30,1]),import.meta.url)),tb=Re.lazy(()=>Ce(()=>import("./Terminate-L_We6bCI.js"),__vite__mapDeps([31,1]),import.meta.url)),nb=Re.lazy(()=>Ce(()=>import("./Refresh-BDeG8WLo.js"),__vite__mapDeps([32,1]),import.meta.url)),Ua=t=>f.jsx(tt,{children:f.jsx(Hv,{...t})}),sd=()=>f.jsx(tt,{children:f.jsx(zv,{})}),od=()=>f.jsx(tt,{children:f.jsx(Uv,{})}),lo=()=>f.jsx(tt,{children:f.jsx(Zv,{})}),ad=()=>f.jsx(tt,{children:f.jsx(Wv,{})}),id=()=>f.jsx(tt,{children:f.jsx(Gv,{})}),cd=()=>f.jsx(tt,{children:f.jsx(qv,{})}),ld=()=>f.jsx(tt,{children:f.jsx(Yv,{})}),dd=()=>f.jsx(tt,{children:f.jsx(Kv,{})}),ud=()=>f.jsx(tt,{children:f.jsx(Jv,{})}),rb=()=>f.jsx(tt,{children:f.jsx(eb,{})}),fd=()=>f.jsx(tt,{children:f.jsx(tb,{})}),sb=()=>f.jsx(tt,{children:f.jsx(nb,{})}),ob=()=>f.jsx(tt,{children:f.jsx(Xv,{})}),pd=t=>f.jsx(tt,{children:f.jsx(Qv,{...t})}),ab=Object.freeze(Object.defineProperty({__proto__:null,Arrow:Ua,Attachment:sd,Clear:lo,Close:od,Confirm:ad,Download:rb,Emoji:id,Logo:pd,Minimize:cd,MoreVert:ld,Refresh:sb,Retry:dd,Send:ud,Terminate:fd,Warning:ob},Symbol.toStringTag,{value:"Module"})),un={"dropdown-wrapper":"_dropdown-wrapper_rc6w0_19","dropdown-input":"_dropdown-input_rc6w0_24","dropdown-input-placeholder":"_dropdown-input-placeholder_rc6w0_54","dropdown-input-arrow":"_dropdown-input-arrow_rc6w0_57","dropdown-popup":"_dropdown-popup_rc6w0_65","dropdown-popup-visible":"_dropdown-popup-visible_rc6w0_78","dropdown-content":"_dropdown-content_rc6w0_84","dropdown-content-item":"_dropdown-content-item_rc6w0_99"},ib=({active:t,options:e,onClickOption:n})=>{const[r]=et(),s=o=>{n==null||n(o)};return f.jsx("ul",{className:un["dropdown-content"],children:e==null?void 0:e.map((o,a)=>{var i,c;return f.jsx("li",{className:un["dropdown-content-item"],"data-disabled":!!o.disabled,"data-active":o.value===t,title:r(o.label),"aria-label":r(o.label),children:f.jsxs("button",{disabled:o.disabled,"aria-disabled":o.disabled,onClick:()=>s(o),children:[(c=(i=Object.entries(ab).find(([l])=>l.toLowerCase()===o.icon))==null?void 0:i[1])==null?void 0:c.call(i,{}),r(o.label)]})},a)})})},cb=t=>{const{forwardedRef:e,placeholder:n="Please input...",disabled:r,onClick:s,children:o}=t,{open:a}=rd();return f.jsxs("button",{ref:e,className:un["dropdown-input"],"data-focus":a,disabled:r,"aria-disabled":r,onClick:s,children:[o||f.jsx("span",{className:un["dropdown-input-placeholder"],children:n}),f.jsx(Ua,{className:un["dropdown-input-arrow"]})]})};function hd(t){let e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t))for(e=0;e<t.length;e++)t[e]&&(n=hd(t[e]))&&(r&&(r+=" "),r+=n);else for(e in t)t[e]&&(r&&(r+=" "),r+=e);return r}function Ze(...t){let e=0,n,r,s="";for(;e<t.length;)(n=t[e++])&&(r=hd(n))&&(s&&(s+=" "),s+=r);return s}const lb=({forwardedRef:t,visible:e,children:n})=>{const{align:r,top:s}=rd(),o=E.useMemo(()=>Ze(un["dropdown-popup"],{[un["dropdown-popup-visible"]]:!!e}),[e]),a=E.useMemo(()=>({top:"".concat(s!=null?s:0,"px"),left:"".concat(r===mr.LEFT?0:"auto"),right:"".concat(r===mr.RIGHT?0:"auto")}),[s,r]);return f.jsx("div",{ref:t,className:o,style:a,children:n})},db=({children:t})=>f.jsx("div",{className:un["dropdown-wrapper"],children:t}),md=t=>{const{option:e,options:n,align:r=mr.LEFT,placeholder:s="Please select...",customInput:o,children:a,onChange:i}=t,c=E.useRef(null),l=E.useRef(null),[d,p]=E.useState(!1),m=c.current,g=l.current,y=E.useMemo(()=>{var T;return(T=m==null?void 0:m.clientHeight)!=null?T:0},[m]);Vv({isExecuted:d,nodes:[m,g],handler:()=>p(!1)});const _=T=>{T.stopPropagation(),T.preventDefault(),p(L=>!L)},w=T=>{p(!1),i==null||i(T)};return f.jsx(Fv,{value:{open:d,align:r,top:y},children:f.jsxs(db,{children:[o?Re.cloneElement(o,{[typeof o.type=="function"?"forwardedRef":"ref"]:c,onClick:_}):f.jsx(cb,{placeholder:s,forwardedRef:c,onClick:_,children:e==null?void 0:e.label}),f.jsx(lb,{visible:d,forwardedRef:l,children:typeof a=="function"?a({onClick:w}):f.jsx(ib,{active:e==null?void 0:e.value,options:n,onClickOption:w})})]})})};md.whyDidYouRender=!0;const ub="_logo_3ajxb_19",fb="_customizedLogo_3ajxb_29",pb="_defaultLogo_3ajxb_37",Vo={logo:ub,customizedLogo:fb,defaultLogo:pb},hb=()=>{const{chatTitleIcon:t}=ve(bt);return f.jsx("div",{className:Vo.logo,"data-testid":"logo",children:t?f.jsx("div",{className:Vo.customizedLogo,style:{backgroundImage:"url(".concat(t,")")}}):f.jsx(pd,{className:Vo.defaultLogo})})},mb="_mask_15l67_106",gb="_start_15l67_117",yb="_circle_15l67_1",_b="_loading_15l67_1",rc={mask:mb,start:gb,"fade-in":"_fade-in_15l67_125","fade-out":"_fade-out_15l67_129",circle:yb,loading:_b,"move-x":"_move-x_15l67_1","slide-down":"_slide-down_15l67_1","slide-in":"_slide-in_15l67_1","slide-out":"_slide-out_15l67_1"};function vb(t){const{className:e,children:n,backgroundColor:r,align:s="center"}=t;return f.jsx("div",{style:{backgroundColor:r},className:Ze(rc.mask,{[rc.start]:s==="start"},e),children:n})}const bb="_wrapper_18ki2_106",wb="_dialog_18ki2_121",Cb="_close_18ki2_126",xb="_header_18ki2_146",Sb="_icon_18ki2_151",Tb="_content_18ki2_158",Eb="_title_18ki2_172",kb="_description_18ki2_175",Ab="_footer_18ki2_179",Ib="_confirm_18ki2_184",Rb="_circle_18ki2_1",Lb="_loading_18ki2_1",gt={wrapper:bb,"slide-in":"_slide-in_18ki2_113","slide-out":"_slide-out_18ki2_117",dialog:wb,close:Cb,header:xb,icon:Sb,content:Tb,title:Eb,description:kb,footer:Ab,confirm:Ib,circle:Rb,loading:Lb,"move-x":"_move-x_18ki2_1","slide-down":"_slide-down_18ki2_1","fade-in":"_fade-in_18ki2_1","fade-out":"_fade-out_18ki2_1"},gd=t=>{const{visible:e,icon:n,title:r,description:s,confirmText:o,cancelText:a,isLoading:i=!1,onConfirm:c,onCancel:l}=t,d=E.useRef(null),[p,m]=E.useState(!1);return E.useEffect(()=>{var g;if(e)(g=d.current)==null||g.focus(),m(!0);else{const y=setTimeout(()=>m(!1),200);return()=>clearTimeout(y)}},[e]),p?f.jsx(sy,{children:f.jsx(vb,{className:gt["".concat(e?"fade-in":"fade-out")],align:"start",children:f.jsx("div",{className:Ze(gt.wrapper,gt["".concat(e?"slide-in":"slide-out")]),children:f.jsxs("div",{className:gt.dialog,children:[f.jsx("button",{className:gt.close,"aria-label":a,onClick:l,children:f.jsx(od,{})}),f.jsx("div",{className:gt.header,children:f.jsx("div",{className:gt.icon,children:n})}),f.jsxs("div",{className:gt.content,children:[f.jsx("p",{className:gt.title,children:r}),f.jsx("p",{className:gt.description,children:s})]}),f.jsx("div",{className:gt.footer,children:f.jsxs("button",{ref:d,className:gt.confirm,onClick:c,disabled:i,"aria-disabled":i,"aria-label":o,children:[i?f.jsx(ao,{size:"tiny"}):null,f.jsx("span",{children:o})]})})]})})})}):null},Pb=t=>{const{visible:e,isLoading:n=!1,onConfirm:r,onCancel:s}=t,[o]=et(),{chatDialogBoxEndChat:a,chatConfirmButtonEndChat:i,chatCancelButtonEndChat:c}=ve(bt),l=E.useMemo(()=>({chatDialogBoxEndChatTitle:o("chatConfirmButtonEndChat"),chatDialogBoxEndChatDescription:a||o("chatDialogBoxEndChat"),chatConfirmButtonEndChat:i||o("chatConfirmButtonEndChat"),chatCancelButtonEndChat:c||o("chatCancelButtonEndChat")}),[o,a,i,c]);return f.jsx(gd,{visible:e,title:l.chatDialogBoxEndChatTitle,description:l.chatDialogBoxEndChatDescription,isLoading:n,onConfirm:r,onCancel:s,confirmText:l.chatConfirmButtonEndChat,cancelText:l.chatCancelButtonEndChat,icon:f.jsx(ad,{})})},Nb="_button_1rhpj_19",jb={button:Nb},Cr=t=>{const{forwardedRef:e,children:n,onClick:r,disabled:s,className:o,...a}=t,i=c=>{s||r==null||r(c)};return f.jsx("button",{ref:e,onClick:i,disabled:s,"aria-disabled":s,className:Ze(jb.button,o),...a,children:n})},$b="_header_bv5to_19",Bb="_withBoxShadow_bv5to_26",Ob="_withSeparator_bv5to_29",Mb="_left_bv5to_33",Db="_desc_bv5to_47",Fb="_title_bv5to_52",Vb="_subtitle_bv5to_62",Hb="_icon_bv5to_78",Lt={header:$b,withBoxShadow:Bb,withSeparator:Ob,left:Mb,desc:Db,title:Fb,subtitle:Vb,icon:Hb},zb=({disabled:t,onClick:e})=>f.jsx(Cr,{onClick:e,disabled:t,"aria-label":"end chat conversation",children:f.jsx("div",{className:Lt.icon,children:f.jsx(fd,{})})}),Ub=({onClick:t})=>f.jsx(Cr,{onClick:t,"aria-label":"minimize chat widget",children:f.jsx("div",{className:Lt.icon,children:f.jsx(cd,{})})}),Zb=({forwardedRef:t,onClick:e})=>f.jsx(Cr,{forwardedRef:t,onClick:e,"aria-label":"more operations",children:f.jsx("div",{className:Lt.icon,children:f.jsx(ld,{})})}),Wb=t=>{const{visible:e,isLoading:n=!1,onConfirm:r,onCancel:s}=t,[o]=et(),{chatDialogBoxRetryEndChat:a,chatConfirmButtonRetryEndChat:i,chatCancelButtonRetryEndChat:c}=ve(bt),l=E.useMemo(()=>({chatDialogBoxRetryEndChatTitle:o("chatConfirmButtonRetryEndChat"),chatDialogBoxRetryEndChatDescription:a||o("chatDialogBoxRetryEndChat"),chatConfirmButtonRetryEndChat:i||o("chatConfirmButtonRetryEndChat"),chatCancelButtonRetryEndChat:c||o("chatCancelButtonRetryEndChat")}),[o,a,i,c]);return f.jsx(gd,{visible:e,title:l.chatDialogBoxRetryEndChatTitle,description:l.chatDialogBoxRetryEndChatDescription,isLoading:n,onConfirm:r,onCancel:s,confirmText:l.chatConfirmButtonRetryEndChat,cancelText:l.chatCancelButtonRetryEndChat,icon:f.jsx(dd,{})})},Gb=()=>({disableDownloadTranscript:!Ov(),downloadTranscript:async()=>{const{interactionId:r}=S.getState(),s=await St.getState().downloadTranscript(r);s!=null&&s.error&&ut.error("Failed to download transcript for interactionId=".concat(r," error=").concat(s.error))}}),qb=[{label:"headerDownloadTranscriptButton",value:"headerDownloadTranscriptButton",icon:"download",disabled:!1},{label:"headerEndChatButton",value:"headerEndChatButton",icon:"terminate",disabled:!1}],Yb=({showEndChatButton:t,disableEndChat:e,disableDownloadTranscript:n,onDownloadTranscript:r,onEndChat:s})=>({options:E.useMemo(()=>qb.reduce((i,c)=>{switch(c.value){case"headerDownloadTranscriptButton":i.push({...c,label:c.label,disabled:n});break;case"headerEndChatButton":t&&i.push({...c,label:c.label,disabled:e});break}return i},[]),[t,e,n]),onOptionItemChange:({value:i})=>{switch(i){case"headerDownloadTranscriptButton":r==null||r();break;case"headerEndChatButton":s==null||s();break}}});function yd(){const[t,e]=E.useState(!0),{on:n,off:r}=Dn();return E.useEffect(()=>{const s=()=>{e(!1)},o=()=>{e(!0)};return n("disconnect",s),n("reconnect",o),n("leave_end",o),n("leave_error",o),()=>{r("disconnect",s),r("reconnect",o),r("leave_end",o),r("leave_error",o)}},[n,r]),t}const Kb=({endChat:t,endApp:e})=>{const[n,r]=E.useState(!1),[s,o]=E.useState(!1),[a,i]=E.useState(!1),c=Bv(),l=yd(),d=!c||n||s||!l;return{isEndingChat:a,showConfirmEndChat:()=>{d||r(!0)},confirmEndVisible:n,retryEndVisible:s,enableEndChat:c,disableEndChat:d,onEndChat:async()=>{i(!0);const w=await t();r(!1),i(!1),w?e==null||e():o(!0)},onRetryEndChat:async()=>{i(!0);const w=await t();i(!1),w&&(o(!1),e==null||e())},onCancelRetryEndChat:()=>o(!1),onCancelConfirmEndChat:()=>r(!1)}},zS=t=>{const{chatSubtitle:e,chatTitle:n,showCloseConversationButton:r,showDownloadTranscriptButton:s}=t,[o]=et(),{end:a}=za(),{go:i,is:c,isNot:l,focusUserInputArea:d}=Dn(),p=ed(),{headerVisible:m}=Dv(),{footerVisible:g}=td(),{isEndingChat:y,confirmEndVisible:_,retryEndVisible:w,disableEndChat:T,onEndChat:L,onRetryEndChat:v,onCancelRetryEndChat:C,onCancelConfirmEndChat:k,showConfirmEndChat:x}=Kb({endChat:a,endApp:()=>i("end")}),R=Sv(),{disableDownloadTranscript:M,downloadTranscript:D}=Gb(),{options:$,onOptionItemChange:A}=Yb({showEndChatButton:r,disableDownloadTranscript:M,disableEndChat:T,onDownloadTranscript:D,onEndChat:x}),U=()=>{St.getState().minimize()},K=E.useMemo(()=>{if(!g&&c(Se.Conversation)&&R){const ee=R==null?void 0:R.role,te=R==null?void 0:R.participantName;return ee&&ee==="va"?o("isThinking",{name:o(te||"")}):te?o("isTyping",{name:o(te||"")}):o("isTypingWithoutName")}return e||o("poweredByTalkdesk")},[g,e,c,o,R]);return E.useEffect(()=>{_||d&&d()},[_,d]),f.jsxs(f.Fragment,{children:[f.jsxs("div",{className:Ze(Lt.header,{[Lt.withBoxShadow]:l(Se.InitialScreen),[Lt.withSeparator]:c(Se.InitialScreen)&&!m}),children:[f.jsxs("div",{className:Lt.left,children:[f.jsx(hb,{}),f.jsxs("div",{className:Lt.desc,children:[f.jsx("p",{className:Lt.title,title:n||lr.chatTitle,children:n||lr.chatTitle}),f.jsx("p",{className:Lt.subtitle,title:K,children:K})]})]}),f.jsxs("div",{children:[f.jsx(Ub,{onClick:U}),s?f.jsx(md,{align:p?mr.LEFT:mr.RIGHT,options:$,onChange:A,customInput:f.jsx(Zb,{})}):r?f.jsx(zb,{onClick:x,disabled:T}):null]})]}),f.jsx(Pb,{visible:_,onCancel:k,onConfirm:L,isLoading:y}),f.jsx(Wb,{visible:w,onCancel:C,onConfirm:v,isLoading:y})]})};function Jb(t){const{immediate:e,className:n,children:r}=t,s=Pc({from:{opacity:0,transform:"translateY(12px)"},to:{opacity:1,transform:"translateY(0)"},config:jc.gentle,immediate:e});return f.jsx(Nc.div,{className:n,style:s,children:r})}function Xb(t){const{disable:e=!1,children:n,className:r=""}=t,s=Pc({from:{opacity:0},to:{opacity:1},config:jc.gentle,immediate:e});return f.jsx(Nc.div,{style:s,className:r,children:n})}const _d={page:Xb,message:Jb};/*!
 * OverlayScrollbars
 * Version: 2.10.0
 *
 * Copyright (c) Rene Haas | KingSora.
 * https://github.com/KingSora
 *
 * Released under the MIT license.
 */const it=(t,e)=>{const{o:n,i:r,u:s}=t;let o=n,a;const i=(d,p)=>{const m=o,g=d,y=p||(r?!r(m,g):m!==g);return(y||s)&&(o=g,a=m),[o,y,a]};return[e?d=>i(e(o,a),d):i,d=>[o,!!d,a]]},Qb=typeof window<"u"&&typeof HTMLElement<"u"&&!!window.document,ot=Qb?window:{},vd=Math.max,ew=Math.min,ia=Math.round,Ws=Math.abs,sc=Math.sign,bd=ot.cancelAnimationFrame,Za=ot.requestAnimationFrame,Gs=ot.setTimeout,ca=ot.clearTimeout,uo=t=>typeof ot[t]<"u"?ot[t]:void 0,tw=uo("MutationObserver"),oc=uo("IntersectionObserver"),qs=uo("ResizeObserver"),Es=uo("ScrollTimeline"),Wa=t=>t===void 0,fo=t=>t===null,$t=t=>typeof t=="number",ns=t=>typeof t=="string",Ga=t=>typeof t=="boolean",vt=t=>typeof t=="function",Mt=t=>Array.isArray(t),Ys=t=>typeof t=="object"&&!Mt(t)&&!fo(t),qa=t=>{const e=!!t&&t.length,n=$t(e)&&e>-1&&e%1==0;return Mt(t)||!vt(t)&&n?e>0&&Ys(t)?e-1 in t:!0:!1},Ks=t=>!!t&&t.constructor===Object,Js=t=>t instanceof HTMLElement,po=t=>t instanceof Element;function _e(t,e){if(qa(t))for(let n=0;n<t.length&&e(t[n],n,t)!==!1;n++);else t&&_e(Object.keys(t),n=>e(t[n],n,t));return t}const wd=(t,e)=>t.indexOf(e)>=0,Kr=(t,e)=>t.concat(e),Ie=(t,e,n)=>(!ns(e)&&qa(e)?Array.prototype.push.apply(t,e):t.push(e),t),vn=t=>Array.from(t||[]),Ya=t=>Mt(t)?t:!ns(t)&&qa(t)?vn(t):[t],la=t=>!!t&&!t.length,da=t=>vn(new Set(t)),dt=(t,e,n)=>{_e(t,s=>s?s.apply(void 0,e||[]):!0),!n&&(t.length=0)},Cd="paddingTop",xd="paddingRight",Sd="paddingLeft",Td="paddingBottom",Ed="marginLeft",kd="marginRight",Ad="marginBottom",Id="overflowX",Rd="overflowY",ho="width",mo="height",dn="visible",Rn="hidden",gr="scroll",nw=t=>{const e=String(t||"");return e?e[0].toUpperCase()+e.slice(1):""},go=(t,e,n,r)=>{if(t&&e){let s=!0;return _e(n,o=>{const a=t[o],i=e[o];a!==i&&(s=!1)}),s}return!1},Ld=(t,e)=>go(t,e,["w","h"]),ks=(t,e)=>go(t,e,["x","y"]),rw=(t,e)=>go(t,e,["t","r","b","l"]),Pn=()=>{},X=(t,...e)=>t.bind(0,...e),rr=t=>{let e;const n=t?Gs:Za,r=t?ca:bd;return[s=>{r(e),e=n(()=>s(),vt(t)?t():t)},()=>r(e)]},ua=(t,e)=>{const{_:n,v:r,p:s,S:o}=e||{};let a,i,c,l,d=Pn;const p=function(w){d(),ca(a),l=a=i=void 0,d=Pn,t.apply(this,w)},m=_=>o&&i?o(i,_):_,g=()=>{d!==Pn&&p(m(c)||c)},y=function(){const w=vn(arguments),T=vt(n)?n():n;if($t(T)&&T>=0){const v=vt(r)?r():r,C=$t(v)&&v>=0,k=T>0?Gs:Za,x=T>0?ca:bd,M=m(w)||w,D=p.bind(0,M);let $;d(),s&&!l?(D(),l=!0,$=k(()=>l=void 0,T)):($=k(D,T),C&&!a&&(a=Gs(g,v))),d=()=>x($),i=c=M}else p(w)};return y.m=g,y},Pd=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),kt=t=>t?Object.keys(t):[],me=(t,e,n,r,s,o,a)=>{const i=[e,n,r,s,o,a];return(typeof t!="object"||fo(t))&&!vt(t)&&(t={}),_e(i,c=>{_e(c,(l,d)=>{const p=c[d];if(t===p)return!0;const m=Mt(p);if(p&&Ks(p)){const g=t[d];let y=g;m&&!Mt(g)?y=[]:!m&&!Ks(g)&&(y={}),t[d]=me(y,p)}else t[d]=m?p.slice():p})}),t},Nd=(t,e)=>_e(me({},t),(n,r,s)=>{n===void 0?delete s[r]:n&&Ks(n)&&(s[r]=Nd(n))}),Ka=t=>!kt(t).length,jd=(t,e,n)=>vd(t,ew(e,n)),Nn=t=>da((Mt(t)?t:(t||"").split(" ")).filter(e=>e)),Ja=(t,e)=>t&&t.getAttribute(e),ac=(t,e)=>t&&t.hasAttribute(e),Wt=(t,e,n)=>{_e(Nn(e),r=>{t&&t.setAttribute(r,String(n||""))})},Rt=(t,e)=>{_e(Nn(e),n=>t&&t.removeAttribute(n))},yo=(t,e)=>{const n=Nn(Ja(t,e)),r=X(Wt,t,e),s=(o,a)=>{const i=new Set(n);return _e(Nn(o),c=>{i[a](c)}),vn(i).join(" ")};return{O:o=>r(s(o,"delete")),$:o=>r(s(o,"add")),C:o=>{const a=Nn(o);return a.reduce((i,c)=>i&&n.includes(c),a.length>0)}}},$d=(t,e,n)=>(yo(t,e).O(n),X(Xa,t,e,n)),Xa=(t,e,n)=>(yo(t,e).$(n),X($d,t,e,n)),Xs=(t,e,n,r)=>(r?Xa:$d)(t,e,n),Qa=(t,e,n)=>yo(t,e).C(n),Bd=t=>yo(t,"class"),Od=(t,e)=>{Bd(t).O(e)},ei=(t,e)=>(Bd(t).$(e),X(Od,t,e)),Md=(t,e)=>{const n=e?po(e)&&e:document;return n?vn(n.querySelectorAll(t)):[]},sw=(t,e)=>{const n=e?po(e)&&e:document;return n&&n.querySelector(t)},fa=(t,e)=>po(t)&&t.matches(e),Dd=t=>fa(t,"body"),pa=t=>t?vn(t.childNodes):[],Jr=t=>t&&t.parentElement,sr=(t,e)=>po(t)&&t.closest(e),ha=t=>document.activeElement,ow=(t,e,n)=>{const r=sr(t,e),s=t&&sw(n,r),o=sr(s,e)===r;return r&&s?r===t||s===t||o&&sr(sr(t,n),e)!==r:!1},yr=t=>{_e(Ya(t),e=>{const n=Jr(e);e&&n&&n.removeChild(e)})},ct=(t,e)=>X(yr,t&&e&&_e(Ya(e),n=>{n&&t.appendChild(n)})),ar=t=>{const e=document.createElement("div");return Wt(e,"class",t),e},Fd=t=>{const e=ar();return e.innerHTML=t.trim(),_e(pa(e),n=>yr(n))},ic=(t,e)=>t.getPropertyValue(e)||t[e]||"",Vd=t=>{const e=t||0;return isFinite(e)?e:0},bs=t=>Vd(parseFloat(t||"")),ma=t=>Math.round(t*1e4)/1e4,Hd=t=>"".concat(ma(Vd(t)),"px");function Xr(t,e){t&&e&&_e(e,(n,r)=>{try{const s=t.style,o=fo(n)||Ga(n)?"":$t(n)?Hd(n):n;r.indexOf("--")===0?s.setProperty(r,o):s[r]=o}catch(s){}})}function Kt(t,e,n){const r=ns(e);let s=r?"":{};if(t){const o=ot.getComputedStyle(t,n)||t.style;s=r?ic(o,e):vn(e).reduce((a,i)=>(a[i]=ic(o,i),a),s)}return s}const cc=(t,e,n)=>{const r=e?"".concat(e,"-"):"",s=n?"-".concat(n):"",o="".concat(r,"top").concat(s),a="".concat(r,"right").concat(s),i="".concat(r,"bottom").concat(s),c="".concat(r,"left").concat(s),l=Kt(t,[o,a,i,c]);return{t:bs(l[o]),r:bs(l[a]),b:bs(l[i]),l:bs(l[c])}},aw=(t,e)=>"translate".concat(Ys(t)?"(".concat(t.x,",").concat(t.y,")"):"Y(".concat(t,")")),iw=t=>!!(t.offsetWidth||t.offsetHeight||t.getClientRects().length),cw={w:0,h:0},_o=(t,e)=>e?{w:e["".concat(t,"Width")],h:e["".concat(t,"Height")]}:cw,lw=t=>_o("inner",t||ot),ir=X(_o,"offset"),zd=X(_o,"client"),Qs=X(_o,"scroll"),ti=t=>{const e=parseFloat(Kt(t,ho))||0,n=parseFloat(Kt(t,mo))||0;return{w:e-ia(e),h:n-ia(n)}},Ho=t=>t.getBoundingClientRect(),dw=t=>!!t&&iw(t),ga=t=>!!(t&&(t[mo]||t[ho])),Ud=(t,e)=>{const n=ga(t);return!ga(e)&&n},lc=(t,e,n,r)=>{_e(Nn(e),s=>{t&&t.removeEventListener(s,n,r)})},ke=(t,e,n,r)=>{var s;const o=(s=r&&r.H)!=null?s:!0,a=r&&r.I||!1,i=r&&r.A||!1,c={passive:o,capture:a};return X(dt,Nn(e).map(l=>{const d=i?p=>{lc(t,l,d,a),n&&n(p)}:n;return t&&t.addEventListener(l,d,c),X(lc,t,l,d,a)}))},Zd=t=>t.stopPropagation(),ya=t=>t.preventDefault(),Wd=t=>Zd(t)||ya(t),Pt=(t,e)=>{const{x:n,y:r}=$t(e)?{x:e,y:e}:e||{};$t(n)&&(t.scrollLeft=n),$t(r)&&(t.scrollTop=r)},lt=t=>({x:t.scrollLeft,y:t.scrollTop}),Gd=()=>({D:{x:0,y:0},M:{x:0,y:0}}),uw=(t,e)=>{const{D:n,M:r}=t,{w:s,h:o}=e,a=(p,m,g)=>{let y=sc(p)*g,_=sc(m)*g;if(y===_){const w=Ws(p),T=Ws(m);_=w>T?0:_,y=w<T?0:y}return y=y===_?0:y,[y+0,_+0]},[i,c]=a(n.x,r.x,s),[l,d]=a(n.y,r.y,o);return{D:{x:i,y:l},M:{x:c,y:d}}},dc=({D:t,M:e})=>{const n=(r,s)=>r===0&&r<=s;return{x:n(t.x,e.x),y:n(t.y,e.y)}},uc=({D:t,M:e},n)=>{const r=(s,o,a)=>jd(0,1,(s-a)/(s-o)||0);return{x:r(t.x,e.x,n.x),y:r(t.y,e.y,n.y)}},_a=t=>{t&&t.focus&&t.focus({preventScroll:!0})},fc=(t,e)=>{_e(Ya(e),t)},va=t=>{const e=new Map,n=(o,a)=>{if(o){const i=e.get(o);fc(c=>{i&&i[c?"delete":"clear"](c)},a)}else e.forEach(i=>{i.clear()}),e.clear()},r=(o,a)=>{if(ns(o)){const l=e.get(o)||new Set;return e.set(o,l),fc(d=>{vt(d)&&l.add(d)},a),X(n,o,a)}Ga(a)&&a&&n();const i=kt(o),c=[];return _e(i,l=>{const d=o[l];d&&Ie(c,r(l,d))}),X(dt,c)},s=(o,a)=>{_e(vn(e.get(o)),i=>{a&&!la(a)?i.apply(0,a):i()})};return r(t||{}),[r,n,s]},pc=t=>JSON.stringify(t,(e,n)=>{if(vt(n))throw 0;return n}),hc=(t,e)=>t?"".concat(e).split(".").reduce((n,r)=>n&&Pd(n,r)?n[r]:void 0,t):void 0,fw={paddingAbsolute:!1,showNativeOverlaidScrollbars:!1,update:{elementEvents:[["img","load"]],debounce:[0,33],attributes:null,ignoreMutation:null},overflow:{x:"scroll",y:"scroll"},scrollbars:{theme:"os-theme-dark",visibility:"auto",autoHide:"never",autoHideDelay:1300,autoHideSuspend:!1,dragScroll:!0,clickScroll:!1,pointers:["mouse","touch","pen"]}},qd=(t,e)=>{const n={},r=Kr(kt(e),kt(t));return _e(r,s=>{const o=t[s],a=e[s];if(Ys(o)&&Ys(a))me(n[s]={},qd(o,a)),Ka(n[s])&&delete n[s];else if(Pd(e,s)&&a!==o){let i=!0;if(Mt(o)||Mt(a))try{pc(o)===pc(a)&&(i=!1)}catch(c){}i&&(n[s]=a)}}),n},mc=(t,e,n)=>r=>[hc(t,r),n||hc(e,r)!==void 0],xr="data-overlayscrollbars",As="os-environment",ws="".concat(As,"-scrollbar-hidden"),zo="".concat(xr,"-initialize"),Is="noClipping",gc="".concat(xr,"-body"),fn=xr,pw="host",Gt="".concat(xr,"-viewport"),hw=Id,mw=Rd,gw="arrange",Yd="measuring",yw="scrolling",Kd="scrollbarHidden",_w="noContent",ba="".concat(xr,"-padding"),yc="".concat(xr,"-content"),ni="os-size-observer",vw="".concat(ni,"-appear"),bw="".concat(ni,"-listener"),ww="os-trinsic-observer",Cw="os-theme-none",ft="os-scrollbar",xw="".concat(ft,"-rtl"),Sw="".concat(ft,"-horizontal"),Tw="".concat(ft,"-vertical"),Jd="".concat(ft,"-track"),ri="".concat(ft,"-handle"),Ew="".concat(ft,"-visible"),kw="".concat(ft,"-cornerless"),_c="".concat(ft,"-interaction"),vc="".concat(ft,"-unusable"),wa="".concat(ft,"-auto-hide"),bc="".concat(wa,"-hidden"),wc="".concat(ft,"-wheel"),Aw="".concat(Jd,"-interactive"),Iw="".concat(ri,"-interactive");let Xd;const Rw=()=>Xd,Lw=t=>{Xd=t};let Uo;const Pw=()=>{const t=(C,k,x)=>{ct(document.body,C),ct(document.body,C);const R=zd(C),M=ir(C),D=ti(k);return x&&yr(C),{x:M.h-R.h+D.h,y:M.w-R.w+D.w}},e=C=>{let k=!1;const x=ei(C,ws);try{k=Kt(C,"scrollbar-width")==="none"||Kt(C,"display","::-webkit-scrollbar")==="none"}catch(R){}return x(),k},n=".".concat(As,"{scroll-behavior:auto!important;position:fixed;opacity:0;visibility:hidden;overflow:scroll;height:200px;width:200px;z-index:-1}.").concat(As," div{width:200%;height:200%;margin:10px 0}.").concat(ws,"{scrollbar-width:none!important}.").concat(ws,"::-webkit-scrollbar,.").concat(ws,"::-webkit-scrollbar-corner{appearance:none!important;display:none!important;width:0!important;height:0!important}"),s=Fd('<div class="'.concat(As,'"><div></div><style>').concat(n,"</style></div>"))[0],o=s.firstChild,a=s.lastChild,i=Rw();i&&(a.nonce=i);const[c,,l]=va(),[d,p]=it({o:t(s,o),i:ks},X(t,s,o,!0)),[m]=p(),g=e(s),y={x:m.x===0,y:m.y===0},_={elements:{host:null,padding:!g,viewport:C=>g&&Dd(C)&&C,content:!1},scrollbars:{slot:!0},cancel:{nativeScrollbarsOverlaid:!1,body:null}},w=me({},fw),T=X(me,{},w),L=X(me,{},_),v={T:m,k:y,R:g,V:!!Es,L:X(c,"r"),U:L,P:C=>me(_,C)&&L(),N:T,q:C=>me(w,C)&&T(),B:me({},_),F:me({},w)};if(Rt(s,"style"),yr(s),ke(ot,"resize",()=>{l("r",[])}),vt(ot.matchMedia)&&!g&&(!y.x||!y.y)){const C=k=>{const x=ot.matchMedia("(resolution: ".concat(ot.devicePixelRatio,"dppx)"));ke(x,"change",()=>{k(),C(k)},{A:!0})};C(()=>{const[k,x]=d();me(v.T,k),l("r",[x])})}return v},Dt=()=>(Uo||(Uo=Pw()),Uo),Qd=(t,e)=>vt(e)?e.apply(0,t):e,Nw=(t,e,n,r)=>{const s=Wa(r)?n:r;return Qd(t,s)||e.apply(0,t)},eu=(t,e,n,r)=>{const s=Wa(r)?n:r,o=Qd(t,s);return!!o&&(Js(o)?o:e.apply(0,t))},jw=(t,e)=>{const{nativeScrollbarsOverlaid:n,body:r}=e||{},{k:s,R:o,U:a}=Dt(),{nativeScrollbarsOverlaid:i,body:c}=a().cancel,l=n!=null?n:i,d=Wa(r)?c:r,p=(s.x||s.y)&&l,m=t&&(fo(d)?!o:d);return!!p||!!m},si=new WeakMap,$w=(t,e)=>{si.set(t,e)},Bw=t=>{si.delete(t)},tu=t=>si.get(t),Ow=(t,e,n)=>{let r=!1;const s=n?new WeakMap:!1,o=()=>{r=!0},a=i=>{if(s&&n){const c=n.map(l=>{const[d,p]=l||[];return[p&&d?(i||Md)(d,t):[],p]});_e(c,l=>_e(l[0],d=>{const p=l[1],m=s.get(d)||[];if(t.contains(d)&&p){const y=ke(d,p,_=>{r?(y(),s.delete(d)):e(_)});s.set(d,Ie(m,y))}else dt(m),s.delete(d)}))}};return a(),[o,a]},Cc=(t,e,n,r)=>{let s=!1;const{j:o,X:a,Y:i,W:c,J:l,G:d}=r||{},p=ua(()=>s&&n(!0),{_:33,v:99}),[m,g]=Ow(t,p,i),y=o||[],_=a||[],w=Kr(y,_),T=(v,C)=>{if(!la(C)){const k=l||Pn,x=d||Pn,R=[],M=[];let D=!1,$=!1;if(_e(C,A=>{const{attributeName:U,target:K,type:ee,oldValue:te,addedNodes:oe,removedNodes:ue}=A,fe=ee==="attributes",ce=ee==="childList",Te=t===K,O=fe&&U,F=O&&Ja(K,U||""),z=ns(F)?F:null,Z=O&&te!==z,N=wd(_,U)&&Z;if(e&&(ce||!Te)){const q=fe&&Z,W=q&&c&&fa(K,c),ae=(W?!k(K,U,te,z):!fe||q)&&!x(A,!!W,t,r);_e(oe,ge=>Ie(R,ge)),_e(ue,ge=>Ie(R,ge)),$=$||ae}!e&&Te&&Z&&!k(K,U,te,z)&&(Ie(M,U),D=D||N)}),g(A=>da(R).reduce((U,K)=>(Ie(U,Md(A,K)),fa(K,A)?Ie(U,K):U),[])),e)return!v&&$&&n(!1),[!1];if(!la(M)||D){const A=[da(M),D];return!v&&n.apply(0,A),A}}},L=new tw(X(T,!1));return[()=>(L.observe(t,{attributes:!0,attributeOldValue:!0,attributeFilter:w,subtree:e,childList:e,characterData:e}),s=!0,()=>{s&&(m(),L.disconnect(),s=!1)}),()=>{if(s)return p.m(),T(!0,L.takeRecords())}]},nu={},ru={},Mw=t=>{_e(t,e=>_e(e,(n,r)=>{nu[r]=e[r]}))},su=(t,e,n)=>kt(t).map(r=>{const{static:s,instance:o}=t[r],[a,i,c]=n||[],l=n?o:s;if(l){const d=n?l(a,i,e):l(e);return(c||ru)[r]=d}}),rs=t=>ru[t],Dw="__osOptionsValidationPlugin",Fw="__osSizeObserverPlugin",Vw=(t,e)=>{const{k:n}=e,[r,s]=t("showNativeOverlaidScrollbars");return[r&&n.x&&n.y,s]},_r=t=>t.indexOf(dn)===0,Hw=(t,e)=>{const n=(s,o,a,i)=>{const c=s===dn?Rn:s.replace("".concat(dn,"-"),""),l=_r(s),d=_r(a);return!o&&!i?Rn:l&&d?dn:l?o&&i?c:o?dn:Rn:o?c:d&&i?dn:Rn},r={x:n(e.x,t.x,e.y,t.y),y:n(e.y,t.y,e.x,t.x)};return{K:r,Z:{x:r.x===gr,y:r.y===gr}}},ou="__osScrollbarsHidingPlugin",zw="__osClickScrollPlugin",au=(t,e,n)=>{const{dt:r}=n||{},s=rs(Fw),[o]=it({o:!1,u:!0});return()=>{const a=[],c=Fd('<div class="'.concat(ni,'"><div class="').concat(bw,'"></div></div>'))[0],l=c.firstChild,d=p=>{const m=p instanceof ResizeObserverEntry;let g=!1,y=!1;if(m){const[_,,w]=o(p.contentRect),T=ga(_);y=Ud(_,w),g=!y&&!T}else y=p===!0;g||e({ft:!0,dt:y})};if(qs){const p=new qs(m=>d(m.pop()));p.observe(l),Ie(a,()=>{p.disconnect()})}else if(s){const[p,m]=s(l,d,r);Ie(a,Kr([ei(c,vw),ke(c,"animationstart",p)],m))}else return Pn;return X(dt,Ie(a,ct(t,c)))}},Uw=(t,e)=>{let n;const r=c=>c.h===0||c.isIntersecting||c.intersectionRatio>0,s=ar(ww),[o]=it({o:!1}),a=(c,l)=>{if(c){const d=o(r(c)),[,p]=d;return p&&!l&&e(d)&&[d]}},i=(c,l)=>a(l.pop(),c);return[()=>{const c=[];if(oc)n=new oc(X(i,!1),{root:t}),n.observe(s),Ie(c,()=>{n.disconnect()});else{const l=()=>{const d=ir(s);a(d)};Ie(c,au(s,l)()),l()}return X(dt,Ie(c,ct(t,s)))},()=>n&&i(!0,n.takeRecords())]},Zw=(t,e,n,r)=>{let s,o,a,i,c,l;const d="[".concat(fn,"]"),p="[".concat(Gt,"]"),m=["id","class","style","open","wrap","cols","rows"],{vt:g,ht:y,ot:_,gt:w,bt:T,nt:L,wt:v,yt:C,St:k,Ot:x}=t,R=N=>Kt(N,"direction")==="rtl",M={$t:!1,ct:R(g)},D=Dt(),$=rs(ou),[A]=it({i:Ld,o:{w:0,h:0}},()=>{const N=$&&$.tt(t,e,M,D,n).ut,W=!(v&&L)&&Qa(y,fn,Is),B=!L&&C(gw),ae=B&&lt(w),ge=ae&&x(),ye=k(Yd,W),we=B&&N&&N()[0],$e=Qs(_),ne=ti(_);return we&&we(),Pt(w,ae),ge&&ge(),W&&ye(),{w:$e.w+ne.w,h:$e.h+ne.h}}),U=ua(r,{_:()=>s,v:()=>o,S(N,q){const[W]=N,[B]=q;return[Kr(kt(W),kt(B)).reduce((ae,ge)=>(ae[ge]=W[ge]||B[ge],ae),{})]}}),K=N=>{const q=R(g);me(N,{Ct:l!==q}),me(M,{ct:q}),l=q},ee=(N,q)=>{const[W,B]=N,ae={xt:B};return me(M,{$t:W}),!q&&r(ae),ae},te=({ft:N,dt:q})=>{const B=!(N&&!q)&&D.R?U:r,ae={ft:N||q,dt:q};K(ae),B(ae)},oe=(N,q)=>{const[,W]=A(),B={Ht:W};return K(B),W&&!q&&(N?r:U)(B),B},ue=(N,q,W)=>{const B={Et:q};return K(B),q&&!W&&U(B),B},[fe,ce]=T?Uw(y,ee):[],Te=!L&&au(y,te,{dt:!0}),[O,F]=Cc(y,!1,ue,{X:m,j:m}),z=L&&qs&&new qs(N=>{const q=N[N.length-1].contentRect;te({ft:!0,dt:Ud(q,c)}),c=q}),Z=ua(()=>{const[,N]=A();r({Ht:N})},{_:222,p:!0});return[()=>{z&&z.observe(y);const N=Te&&Te(),q=fe&&fe(),W=O(),B=D.L(ae=>{ae?U({zt:ae}):Z()});return()=>{z&&z.disconnect(),N&&N(),q&&q(),i&&i(),W(),B()}},({It:N,At:q,Dt:W})=>{const B={},[ae]=N("update.ignoreMutation"),[ge,ye]=N("update.attributes"),[we,$e]=N("update.elementEvents"),[ne,Be]=N("update.debounce"),ze=$e||ye,Le=q||W,Oe=Ee=>vt(ae)&&ae(Ee);if(ze){a&&a(),i&&i();const[Ee,Pe]=Cc(T||_,!0,oe,{j:Kr(m,ge||[]),Y:we,W:d,G:(be,xe)=>{const{target:je,attributeName:He}=be;return(!xe&&He&&!L?ow(je,d,p):!1)||!!sr(je,".".concat(ft))||!!Oe(be)}});i=Ee(),a=Pe}if(Be)if(U.m(),Mt(ne)){const Ee=ne[0],Pe=ne[1];s=$t(Ee)&&Ee,o=$t(Pe)&&Pe}else $t(ne)?(s=ne,o=!1):(s=!1,o=!1);if(Le){const Ee=F(),Pe=ce&&ce(),be=a&&a();Ee&&me(B,ue(Ee[0],Ee[1],Le)),Pe&&me(B,ee(Pe[0],Le)),be&&me(B,oe(be[0],Le))}return K(B),B},M]},Ww=(t,e,n,r)=>{const s="--os-viewport-percent",o="--os-scroll-percent",a="--os-scroll-direction",{U:i}=Dt(),{scrollbars:c}=i(),{slot:l}=c,{vt:d,ht:p,ot:m,Mt:g,gt:y,wt:_,nt:w}=e,{scrollbars:T}=g?{}:t,{slot:L}=T||{},v=[],C=[],k=[],x=eu([d,p,m],()=>w&&_?d:p,l,L),R=O=>{if(Es){const F=new Es({source:y,axis:O});return{kt:Z=>{const N=Z.Tt.animate({clear:["left"],[o]:[0,1]},{timeline:F});return()=>N.cancel()}}}},M={x:R("x"),y:R("y")},D=()=>{const{Rt:O,Vt:F}=n,z=(Z,N)=>jd(0,1,Z/(Z+N)||0);return{x:z(F.x,O.x),y:z(F.y,O.y)}},$=(O,F,z)=>{const Z=z?ei:Od;_e(O,N=>{Z(N.Tt,F)})},A=(O,F)=>{_e(O,z=>{const[Z,N]=F(z);Xr(Z,N)})},U=(O,F,z)=>{const Z=Ga(z),N=Z?z:!0,q=Z?!z:!0;N&&$(C,O,F),q&&$(k,O,F)},K=()=>{const O=D(),F=z=>Z=>[Z.Tt,{[s]:ma(z)+""}];A(C,F(O.x)),A(k,F(O.y))},ee=()=>{if(!Es){const{Lt:O}=n,F=uc(O,lt(y)),z=Z=>N=>[N.Tt,{[o]:ma(Z)+""}];A(C,z(F.x)),A(k,z(F.y))}},te=()=>{const{Lt:O}=n,F=dc(O),z=Z=>N=>[N.Tt,{[a]:Z?"0":"1"}];A(C,z(F.x)),A(k,z(F.y))},oe=()=>{if(w&&!_){const{Rt:O,Lt:F}=n,z=dc(F),Z=uc(F,lt(y)),N=q=>{const{Tt:W}=q,B=Jr(W)===m&&W,ae=(ge,ye,we)=>{const $e=ye*ge;return Hd(we?$e:-$e)};return[B,B&&{transform:aw({x:ae(Z.x,O.x,z.x),y:ae(Z.y,O.y,z.y)})}]};A(C,N),A(k,N)}},ue=O=>{const F=O?"x":"y",z=O?Sw:Tw,Z=ar("".concat(ft," ").concat(z)),N=ar(Jd),q=ar(ri),W={Tt:Z,Ut:N,Pt:q},B=M[F];return Ie(O?C:k,W),Ie(v,[ct(Z,N),ct(N,q),X(yr,Z),B&&B.kt(W),r(W,U,O)]),W},fe=X(ue,!0),ce=X(ue,!1),Te=()=>(ct(x,C[0].Tt),ct(x,k[0].Tt),X(dt,v));return fe(),ce(),[{Nt:K,qt:ee,Bt:te,Ft:oe,jt:U,Xt:{Yt:C,Wt:fe,Jt:X(A,C)},Gt:{Yt:k,Wt:ce,Jt:X(A,k)}},Te]},Gw=(t,e,n,r)=>(s,o,a)=>{const{ht:i,ot:c,nt:l,gt:d,Kt:p,Ot:m}=e,{Tt:g,Ut:y,Pt:_}=s,[w,T]=rr(333),[L,v]=rr(444),C=R=>{vt(d.scrollBy)&&d.scrollBy({behavior:"smooth",left:R.x,top:R.y})},k=()=>{const R="pointerup pointercancel lostpointercapture",M="client".concat(a?"X":"Y"),D=a?ho:mo,$=a?"left":"top",A=a?"w":"h",U=a?"x":"y",K=(te,oe)=>ue=>{const{Rt:fe}=n,ce=ir(y)[A]-ir(_)[A],O=oe*ue/ce*fe[U];Pt(d,{[U]:te+O})},ee=[];return ke(y,"pointerdown",te=>{const oe=sr(te.target,".".concat(ri))===_,ue=oe?_:y,fe=t.scrollbars,ce=fe[oe?"dragScroll":"clickScroll"],{button:Te,isPrimary:O,pointerType:F}=te,{pointers:z}=fe;if(Te===0&&O&&ce&&(z||[]).includes(F)){dt(ee),v();const N=!oe&&(te.shiftKey||ce==="instant"),q=X(Ho,_),W=X(Ho,y),B=(xe,je)=>(xe||q())[$]-(je||W())[$],ae=ia(Ho(d)[D])/ir(d)[A]||1,ge=K(lt(d)[U],1/ae),ye=te[M],we=q(),$e=W(),ne=we[D],Be=B(we,$e)+ne/2,ze=ye-$e[$],Le=oe?0:ze-Be,Oe=xe=>{dt(be),ue.releasePointerCapture(xe.pointerId)},Ee=oe||N,Pe=m(),be=[ke(p,R,Oe),ke(p,"selectstart",xe=>ya(xe),{H:!1}),ke(y,R,Oe),Ee&&ke(y,"pointermove",xe=>ge(Le+(xe[M]-ye))),Ee&&(()=>{const xe=lt(d);Pe();const je=lt(d),He={x:je.x-xe.x,y:je.y-xe.y};(Ws(He.x)>3||Ws(He.y)>3)&&(m(),Pt(d,xe),C(He),L(Pe))})];if(ue.setPointerCapture(te.pointerId),N)ge(Le);else if(!oe){const xe=rs(zw);if(xe){const je=xe(ge,Le,ne,He=>{He?Pe():Ie(be,Pe)});Ie(be,je),Ie(ee,X(je,!0))}}}})};let x=!0;return X(dt,[ke(_,"pointermove pointerleave",r),ke(g,"pointerenter",()=>{o(_c,!0)}),ke(g,"pointerleave pointercancel",()=>{o(_c,!1)}),!l&&ke(g,"mousedown",()=>{const R=ha();(ac(R,Gt)||ac(R,fn)||R===document.body)&&Gs(X(_a,c),25)}),ke(g,"wheel",R=>{const{deltaX:M,deltaY:D,deltaMode:$}=R;x&&$===0&&Jr(g)===i&&C({x:M,y:D}),x=!1,o(wc,!0),w(()=>{x=!0,o(wc)}),ya(R)},{H:!1,I:!0}),ke(g,"pointerdown",X(ke,p,"click",Wd,{A:!0,I:!0,H:!1}),{I:!0}),k(),T,v])},qw=(t,e,n,r,s,o)=>{let a,i,c,l,d,p=Pn,m=0;const g=O=>O.pointerType==="mouse",[y,_]=rr(),[w,T]=rr(100),[L,v]=rr(100),[C,k]=rr(()=>m),[x,R]=Ww(t,s,r,Gw(e,s,r,O=>g(O)&&ue())),{ht:M,Qt:D,wt:$}=s,{jt:A,Nt:U,qt:K,Bt:ee,Ft:te}=x,oe=(O,F)=>{if(k(),O)A(bc);else{const z=X(A,bc,!0);m>0&&!F?C(z):z()}},ue=()=>{(c?!a:!l)&&(oe(!0),w(()=>{oe(!1)}))},fe=O=>{A(wa,O,!0),A(wa,O,!1)},ce=O=>{g(O)&&(a=c,c&&oe(!0))},Te=[k,T,v,_,()=>p(),ke(M,"pointerover",ce,{A:!0}),ke(M,"pointerenter",ce),ke(M,"pointerleave",O=>{g(O)&&(a=!1,c&&oe(!1))}),ke(M,"pointermove",O=>{g(O)&&i&&ue()}),ke(D,"scroll",O=>{y(()=>{K(),ue()}),o(O),te()})];return[()=>X(dt,Ie(Te,R())),({It:O,Dt:F,Zt:z,tn:Z})=>{const{nn:N,sn:q,en:W,cn:B}=Z||{},{Ct:ae,dt:ge}=z||{},{ct:ye}=n,{k:we}=Dt(),{K:$e,rn:ne}=r,[Be,ze]=O("showNativeOverlaidScrollbars"),[Le,Oe]=O("scrollbars.theme"),[Ee,Pe]=O("scrollbars.visibility"),[be,xe]=O("scrollbars.autoHide"),[je,He]=O("scrollbars.autoHideSuspend"),[bn]=O("scrollbars.autoHideDelay"),[Jt,Fn]=O("scrollbars.dragScroll"),[Vn,Ft]=O("scrollbars.clickScroll"),[wt,wn]=O("overflow"),Hn=ge&&!F,zn=ne.x||ne.y,nt=N||q||B||ae||F,Ue=W||Pe||wn,Sr=Be&&we.x&&we.y,Xt=(Qt,At,Un)=>{const Cn=Qt.includes(gr)&&(Ee===dn||Ee==="auto"&&At===gr);return A(Ew,Cn,Un),Cn};if(m=bn,Hn&&(je&&zn?(fe(!1),p(),L(()=>{p=ke(D,"scroll",X(fe,!0),{A:!0})})):fe(!0)),ze&&A(Cw,Sr),Oe&&(A(d),A(Le,!0),d=Le),He&&!je&&fe(!0),xe&&(i=be==="move",c=be==="leave",l=be==="never",oe(l,!0)),Fn&&A(Iw,Jt),Ft&&A(Aw,!!Vn),Ue){const Qt=Xt(wt.x,$e.x,!0),At=Xt(wt.y,$e.y,!1);A(kw,!(Qt&&At))}nt&&(K(),U(),te(),B&&ee(),A(vc,!ne.x,!0),A(vc,!ne.y,!1),A(xw,ye&&!$))},{},x]},Yw=t=>{const e=Dt(),{U:n,R:r}=e,{elements:s}=n(),{padding:o,viewport:a,content:i}=s,c=Js(t),l=c?{}:t,{elements:d}=l,{padding:p,viewport:m,content:g}=d||{},y=c?t:l.target,_=Dd(y),w=y.ownerDocument,T=w.documentElement,L=()=>w.defaultView||ot,v=X(Nw,[y]),C=X(eu,[y]),k=X(ar,""),x=X(v,k,a),R=X(C,k,i),M=ne=>{const Be=ir(ne),ze=Qs(ne),Le=Kt(ne,Id),Oe=Kt(ne,Rd);return ze.w-Be.w>0&&!_r(Le)||ze.h-Be.h>0&&!_r(Oe)},D=x(m),$=D===y,A=$&&_,U=!$&&R(g),K=!$&&D===U,ee=A?T:D,te=A?ee:y,oe=!$&&C(k,o,p),ue=!K&&U,fe=[ue,ee,oe,te].map(ne=>Js(ne)&&!Jr(ne)&&ne),ce=ne=>ne&&wd(fe,ne),Te=!ce(ee)&&M(ee)?ee:y,O=A?T:ee,z={vt:y,ht:te,ot:ee,ln:oe,bt:ue,gt:O,Qt:A?w:ee,an:_?T:Te,Kt:w,wt:_,Mt:c,nt:$,un:L,yt:ne=>Qa(ee,Gt,ne),St:(ne,Be)=>Xs(ee,Gt,ne,Be),Ot:()=>Xs(O,Gt,yw,!0)},{vt:Z,ht:N,ln:q,ot:W,bt:B}=z,ae=[()=>{Rt(N,[fn,zo]),Rt(Z,zo),_&&Rt(T,[zo,fn])}];let ge=pa([B,W,q,N,Z].find(ne=>ne&&!ce(ne)));const ye=A?Z:B||W,we=X(dt,ae);return[z,()=>{const ne=L(),Be=ha(),ze=be=>{ct(Jr(be),pa(be)),yr(be)},Le=be=>ke(be,"focusin focusout focus blur",Wd,{I:!0,H:!1}),Oe="tabindex",Ee=Ja(W,Oe),Pe=Le(Be);return Wt(N,fn,$?"":pw),Wt(q,ba,""),Wt(W,Gt,""),Wt(B,yc,""),$||(Wt(W,Oe,Ee||"-1"),_&&Wt(T,gc,"")),ct(ye,ge),ct(N,q),ct(q||N,!$&&W),ct(W,B),Ie(ae,[Pe,()=>{const be=ha(),xe=ce(W),je=xe&&be===W?Z:be,He=Le(je);Rt(q,ba),Rt(B,yc),Rt(W,Gt),_&&Rt(T,gc),Ee?Wt(W,Oe,Ee):Rt(W,Oe),ce(B)&&ze(B),xe&&ze(W),ce(q)&&ze(q),_a(je),He()}]),r&&!$&&(Xa(W,Gt,Kd),Ie(ae,X(Rt,W,Gt))),_a(!$&&_&&Be===Z&&ne.top===ne?W:Be),Pe(),ge=0,we},we]},Kw=({bt:t})=>({Zt:e,_n:n,Dt:r})=>{const{xt:s}=e||{},{$t:o}=n;t&&(s||r)&&Xr(t,{[mo]:o&&"100%"})},Jw=({ht:t,ln:e,ot:n,nt:r},s)=>{const[o,a]=it({i:rw,o:cc()},X(cc,t,"padding",""));return({It:i,Zt:c,_n:l,Dt:d})=>{let[p,m]=a(d);const{R:g}=Dt(),{ft:y,Ht:_,Ct:w}=c||{},{ct:T}=l,[L,v]=i("paddingAbsolute");(y||m||(d||_))&&([p,m]=o(d));const k=!r&&(v||w||m);if(k){const x=!L||!e&&!g,R=p.r+p.l,M=p.t+p.b,D={[kd]:x&&!T?-R:0,[Ad]:x?-M:0,[Ed]:x&&T?-R:0,top:x?-p.t:0,right:x?T?-p.r:"auto":0,left:x?T?"auto":-p.l:0,[ho]:x&&"calc(100% + ".concat(R,"px)")},$={[Cd]:x?p.t:0,[xd]:x?p.r:0,[Td]:x?p.b:0,[Sd]:x?p.l:0};Xr(e||n,D),Xr(n,$),me(s,{ln:p,dn:!x,rt:e?$:me({},D,$)})}return{fn:k}}},Xw=(t,e)=>{const n=Dt(),{ht:r,ln:s,ot:o,nt:a,Qt:i,gt:c,wt:l,St:d,un:p}=t,{R:m}=n,g=l&&a,y=X(vd,0),_={display:()=>!1,direction:F=>F!=="ltr",flexDirection:F=>F.endsWith("-reverse"),writingMode:F=>F!=="horizontal-tb"},w=kt(_),T={i:Ld,o:{w:0,h:0}},L={i:ks,o:{}},v=F=>{d(Yd,!g&&F)},C=F=>{if(!w.some(ye=>{const we=F[ye];return we&&_[ye](we)}))return{D:{x:0,y:0},M:{x:1,y:1}};v(!0);const Z=lt(c),N=d(_w,!0),q=ke(i,gr,ye=>{const we=lt(c);ye.isTrusted&&we.x===Z.x&&we.y===Z.y&&Zd(ye)},{I:!0,A:!0});Pt(c,{x:0,y:0}),N();const W=lt(c),B=Qs(c);Pt(c,{x:B.w,y:B.h});const ae=lt(c);Pt(c,{x:ae.x-W.x<1&&-B.w,y:ae.y-W.y<1&&-B.h});const ge=lt(c);return Pt(c,Z),Za(()=>q()),{D:W,M:ge}},k=(F,z)=>{const Z=ot.devicePixelRatio%1!==0?1:0,N={w:y(F.w-z.w),h:y(F.h-z.h)};return{w:N.w>Z?N.w:0,h:N.h>Z?N.h:0}},[x,R]=it(T,X(ti,o)),[M,D]=it(T,X(Qs,o)),[$,A]=it(T),[U]=it(L),[K,ee]=it(T),[te]=it(L),[oe]=it({i:(F,z)=>go(F,z,w),o:{}},()=>dw(o)?Kt(o,w):{}),[ue,fe]=it({i:(F,z)=>ks(F.D,z.D)&&ks(F.M,z.M),o:Gd()}),ce=rs(ou),Te=(F,z)=>{const Z=z?hw:mw;return"".concat(Z).concat(nw(F))},O=F=>{const z=N=>[dn,Rn,gr].map(q=>Te(q,N)),Z=z(!0).concat(z()).join(" ");d(Z),d(kt(F).map(N=>Te(F[N],N==="x")).join(" "),!0)};return({It:F,Zt:z,_n:Z,Dt:N},{fn:q})=>{const{ft:W,Ht:B,Ct:ae,dt:ge,zt:ye}=z||{},we=ce&&ce.tt(t,e,Z,n,F),{it:$e,ut:ne,_t:Be}=we||{},[ze,Le]=Vw(F,n),[Oe,Ee]=F("overflow"),Pe=_r(Oe.x),be=_r(Oe.y),xe=!0;let je=R(N),He=D(N),bn=A(N),Jt=ee(N);Le&&m&&d(Kd,!ze);{Qa(r,fn,Is)&&v(!0);const[Wn]=ne?ne():[],[en]=je=x(N),[It]=He=M(N),Gn=zd(o),qn=g&&lw(p()),Co={w:y(It.w+en.w),h:y(It.h+en.h)},ss={w:y((qn?qn.w:Gn.w+y(Gn.w-It.w))+en.w),h:y((qn?qn.h:Gn.h+y(Gn.h-It.h))+en.h)};Wn&&Wn(),Jt=K(ss),bn=$(k(Co,ss),N)}const[Fn,Vn]=Jt,[Ft,wt]=bn,[wn,Hn]=He,[zn,nt]=je,[Ue,Sr]=U({x:Ft.w>0,y:Ft.h>0}),Xt=Pe&&be&&(Ue.x||Ue.y)||Pe&&Ue.x&&!Ue.y||be&&Ue.y&&!Ue.x,Qt=q||ae||ye||nt||Hn||Vn||wt||Ee||Le||xe,At=Hw(Ue,Oe),[Un,Cn]=te(At.K),[Tr,wo]=oe(N),Zn=ae||ge||wo||Sr||N,[xn,Er]=Zn?ue(C(Tr),N):fe();return Qt&&(Cn&&O(At.K),Be&&$e&&Xr(o,Be(At,Z,$e(At,wn,zn)))),v(!1),Xs(r,fn,Is,Xt),Xs(s,ba,Is,Xt),me(e,{K:Un,Vt:{x:Fn.w,y:Fn.h},Rt:{x:Ft.w,y:Ft.h},rn:Ue,Lt:uw(xn,Ft)}),{en:Cn,nn:Vn,sn:wt,cn:Er||wt,vn:Zn}}},Qw=t=>{const[e,n,r]=Yw(t),s={ln:{t:0,r:0,b:0,l:0},dn:!1,rt:{[kd]:0,[Ad]:0,[Ed]:0,[Cd]:0,[xd]:0,[Td]:0,[Sd]:0},Vt:{x:0,y:0},Rt:{x:0,y:0},K:{x:Rn,y:Rn},rn:{x:!1,y:!1},Lt:Gd()},{vt:o,gt:a,nt:i,Ot:c}=e,{R:l,k:d}=Dt(),p=!l&&(d.x||d.y),m=[Kw(e),Jw(e,s),Xw(e,s)];return[n,g=>{const y={},w=p&&lt(a),T=w&&c();return _e(m,L=>{me(y,L(g,y)||{})}),Pt(a,w),T&&T(),!i&&Pt(o,0),y},s,e,r]},eC=(t,e,n,r,s)=>{let o=!1;const a=mc(e,{}),[i,c,l,d,p]=Qw(t),[m,g,y]=Zw(d,l,a,C=>{v({},C)}),[_,w,,T]=qw(t,e,y,l,d,s),L=C=>kt(C).some(k=>!!C[k]),v=(C,k)=>{if(n())return!1;const{pn:x,Dt:R,At:M,hn:D}=C,$=x||{},A=!!R||!o,U={It:mc(e,$,A),pn:$,Dt:A};if(D)return w(U),!1;const K=k||g(me({},U,{At:M})),ee=c(me({},U,{_n:y,Zt:K}));w(me({},U,{Zt:K,tn:ee}));const te=L(K),oe=L(ee),ue=te||oe||!Ka($)||A;return o=!0,ue&&r(C,{Zt:K,tn:ee}),ue};return[()=>{const{an:C,gt:k,Ot:x}=d,R=lt(C),M=[m(),i(),_()],D=x();return Pt(k,R),D(),X(dt,M)},v,()=>({gn:y,bn:l}),{wn:d,yn:T},p]},Nt=(t,e,n)=>{const{N:r}=Dt(),s=Js(t),o=s?t:t.target,a=tu(o);if(e&&!a){let i=!1;const c=[],l={},d=$=>{const A=Nd($),U=rs(Dw);return U?U(A,!0):A},p=me({},r(),d(e)),[m,g,y]=va(),[_,w,T]=va(n),L=($,A)=>{T($,A),y($,A)},[v,C,k,x,R]=eC(t,p,()=>i,({pn:$,Dt:A},{Zt:U,tn:K})=>{const{ft:ee,Ct:te,xt:oe,Ht:ue,Et:fe,dt:ce}=U,{nn:Te,sn:O,en:F,cn:z}=K;L("updated",[D,{updateHints:{sizeChanged:!!ee,directionChanged:!!te,heightIntrinsicChanged:!!oe,overflowEdgeChanged:!!Te,overflowAmountChanged:!!O,overflowStyleChanged:!!F,scrollCoordinatesChanged:!!z,contentMutation:!!ue,hostMutation:!!fe,appear:!!ce},changedOptions:$||{},force:!!A}])},$=>L("scroll",[D,$])),M=$=>{Bw(o),dt(c),i=!0,L("destroyed",[D,$]),g(),w()},D={options($,A){if($){const U=A?r():{},K=qd(p,me(U,d($)));Ka(K)||(me(p,K),C({pn:K}))}return me({},p)},on:_,off:($,A)=>{$&&A&&w($,A)},state(){const{gn:$,bn:A}=k(),{ct:U}=$,{Vt:K,Rt:ee,K:te,rn:oe,ln:ue,dn:fe,Lt:ce}=A;return me({},{overflowEdge:K,overflowAmount:ee,overflowStyle:te,hasOverflow:oe,scrollCoordinates:{start:ce.D,end:ce.M},padding:ue,paddingAbsolute:fe,directionRTL:U,destroyed:i})},elements(){const{vt:$,ht:A,ln:U,ot:K,bt:ee,gt:te,Qt:oe}=x.wn,{Xt:ue,Gt:fe}=x.yn,ce=O=>{const{Pt:F,Ut:z,Tt:Z}=O;return{scrollbar:Z,track:z,handle:F}},Te=O=>{const{Yt:F,Wt:z}=O,Z=ce(F[0]);return me({},Z,{clone:()=>{const N=ce(z());return C({hn:!0}),N}})};return me({},{target:$,host:A,padding:U||K,viewport:K,content:ee||K,scrollOffsetElement:te,scrollEventElement:oe,scrollbarHorizontal:Te(ue),scrollbarVertical:Te(fe)})},update:$=>C({Dt:$,At:!0}),destroy:X(M,!1),plugin:$=>l[kt($)[0]]};return Ie(c,[R]),$w(o,D),su(nu,Nt,[D,m,l]),jw(x.wn.wt,!s&&t.cancel)?(M(!0),D):(Ie(c,v()),L("initialized",[D]),D.update(),D)}return a};Nt.plugin=t=>{const e=Mt(t),n=e?t:[t],r=n.map(s=>su(s,Nt)[0]);return Mw(n),e?r:r[0]};Nt.valid=t=>{const e=t&&t.elements,n=vt(e)&&e();return Ks(n)&&!!tu(n.target)};Nt.env=()=>{const{T:t,k:e,R:n,V:r,B:s,F:o,U:a,P:i,N:c,q:l}=Dt();return me({},{scrollbarsSize:t,scrollbarsOverlaid:e,scrollbarsHiding:n,scrollTimeline:r,staticDefaultInitialization:s,staticDefaultOptions:o,getDefaultInitialization:a,setDefaultInitialization:i,getDefaultOptions:c,setDefaultOptions:l})};Nt.nonce=Lw;const tC=()=>{if(typeof window>"u"){const l=()=>{};return[l,l]}let t,e;const n=window,r=typeof n.requestIdleCallback=="function",s=n.requestAnimationFrame,o=n.cancelAnimationFrame,a=r?n.requestIdleCallback:s,i=r?n.cancelIdleCallback:o,c=()=>{i(t),o(e)};return[(l,d)=>{c(),t=a(r?()=>{c(),e=s(l)}:l,typeof d=="object"?d:{timeout:2233})},c]},nC=t=>{const{options:e,events:n,defer:r}=t||{},[s,o]=E.useMemo(tC,[]),a=E.useRef(null),i=E.useRef(r),c=E.useRef(e),l=E.useRef(n);return E.useEffect(()=>{i.current=r},[r]),E.useEffect(()=>{const{current:d}=a;c.current=e,Nt.valid(d)&&d.options(e||{},!0)},[e]),E.useEffect(()=>{const{current:d}=a;l.current=n,Nt.valid(d)&&d.on(n||{},!0)},[n]),E.useEffect(()=>()=>{var d;o(),(d=a.current)==null||d.destroy()},[]),E.useMemo(()=>[d=>{const p=a.current;if(Nt.valid(p))return;const m=i.current,g=c.current||{},y=l.current||{},_=()=>a.current=Nt(d,g,y);m?s(_,m):_()},()=>a.current],[])},rC=(t,e)=>{const{element:n="div",options:r,events:s,defer:o,children:a,...i}=t,c=n,l=E.useRef(null),d=E.useRef(null),[p,m]=nC({options:r,events:s,defer:o});return E.useEffect(()=>{const{current:g}=l,{current:y}=d;if(!g)return;const _=g;return p(n==="body"?{target:_,cancel:{body:null}}:{target:_,elements:{viewport:y,content:y}}),()=>{var w;return(w=m())==null?void 0:w.destroy()}},[p,n]),E.useImperativeHandle(e,()=>({osInstance:m,getElement:()=>l.current}),[]),Re.createElement(c,{"data-overlayscrollbars-initialize":"",ref:l,...i},n==="body"?a:Re.createElement("div",{"data-overlayscrollbars-contents":"",ref:d},a))},oi=E.forwardRef(rC);function xc(t,e,n){const r=new IntersectionObserver(s=>{const o=s[0].isIntersecting;n==null||n(o)},e);return r.observe(t),r}const iu=()=>{const t=E.useRef(null),e=E.useRef(null),n=E.useCallback(r=>{const s=t.current,o=e.current;let a,i;return s&&(a=xc(s,r.options,c=>{r.onHeader(c)})),o&&(i=xc(o,r.options,c=>{r.onFooter(c)})),()=>{a==null||a.disconnect(),i==null||i.disconnect()}},[]);return{headElRef:t,footerElRef:e,run:n}},sC=()=>{const t=E.useRef(null),{updateInitialScreenScroll:e}=Dn(),{headElRef:n,footerElRef:r,run:s}=iu();return E.useEffect(()=>{var a;const o=(a=t.current)==null?void 0:a.getElement();if(o)return s({options:{root:o},onHeader:i=>{e({headerVisible:i})},onFooter:i=>{e({footerVisible:i})}})},[s,e]),{osRef:t,headElRef:n,footerElRef:r}},oC=()=>{const t=E.useRef(null),e=E.useRef(null),n=E.useRef(null),r=E.useRef(!1),{headElRef:s,footerElRef:o,run:a}=iu(),i=Ql(),{on:c,off:l,updateChatContentScroll:d,updateUnreadMessageCount:p}=Dn(),m=E.useCallback((y=!0)=>{t.current&&(clearTimeout(t.current),t.current=null),setTimeout(()=>{var w;p(0);const _=(w=n.current)==null?void 0:w.osInstance();if(_){const{scrollOffsetElement:T}=_.elements(),L=Math.ceil(T.scrollHeight);T.scrollTo({behavior:y?"smooth":"auto",top:L})}},1e3/60)},[p]),g=E.useCallback(()=>{var R,M,D;const y=(D=(M=(R=n.current)==null?void 0:R.osInstance())==null?void 0:M.elements())==null?void 0:D.scrollOffsetElement;if(!y)return;const{scrollTop:_=0,scrollHeight:w=0,offsetHeight:T=0}=y,L=Math.floor(T),v=Math.floor(w),C=Math.floor(_),k=v-L,x=k<=0?{scrollTop:C,scrollOver:k,scrollPercent:0}:{scrollTop:C,scrollOver:k,scrollPercent:Math.ceil(C/(v-L)*100)};e.current&&(clearTimeout(e.current),e.current=null),e.current=setTimeout(()=>{d(x)},50)},[d]);return E.useEffect(()=>(c(qt.need_scroll_to_bottom,m),c(qt.send_success,m),c(qt.send_failure,m),()=>{l(qt.need_scroll_to_bottom,m),l(qt.send_success,m),l(qt.send_failure,m)}),[m,c,l]),E.useEffect(()=>{var _;const y=(_=n.current)==null?void 0:_.getElement();if(y)return a({options:{root:y},onHeader:w=>{d({headerVisible:w})},onFooter:w=>{d({footerVisible:w}),r.current=w}})},[a,d]),E.useEffect(()=>{var w;const y=(w=n.current)==null?void 0:w.getElement();if(!y)return;const _=new MutationObserver(()=>{r.current&&m()});return _.observe(y,{childList:!0,attributes:!0,subtree:!0,attributeFilter:[]}),()=>{_.disconnect()}},[m]),E.useEffect(()=>{i&&m()},[i,m]),E.useEffect(()=>()=>{t.current&&(clearTimeout(t.current),t.current=null),e.current&&(clearTimeout(e.current),e.current)},[]),{osRef:n,headElRef:s,footerElRef:o,onScroll:g}},aC="_bottomFixedArea_12mgx_6",iC="_paddingBottom_12mgx_15",Sc={bottomFixedArea:aC,paddingBottom:iC},cC=t=>{const{page:e}=t,{enableUserInput:n}=Am();return e!==Se.Conversation?null:f.jsx(oi,{className:Ze(Sc.bottomFixedArea,{[Sc.paddingBottom]:!n}),options:{scrollbars:{autoHide:"scroll"}},children:f.jsx(Fm,{})})};function lC(t){return t.flatMap(e=>e.items.map(n=>({...e,...n})))}const dC=t=>{t&&window.open(t,"_blank")},uC=ut.getSubLogger({name:"ErrorBoundary"}),fC=ut.getSubLogger({name:"GlobalErrorHandler"}),pC=ut.getSubLogger({name:"MediaSourceErrorBoundary"});function ai(t,e,n){n.error(t),e.componentStack&&n.error("Component stack: ".concat(e.componentStack))}function ii(t,e){ai(t,e,uC)}function US(t,e){ai(t,e,fC)}function cu(t){ai(t,{},pC)}function lu(t){return t.type==="system"}function ci(t,e){return e?t.alignment===e.alignment&&t.formattedTime===e.formattedTime&&t.role===e.role&&t.rid===e.rid:!1}function hC(t,e){return e===void 0||lu(e)?!0:!ci(t,e)}function mC(t,e){return e===void 0||lu(e)?!0:!ci(t,e)}function gC(){}function yC(t){var fe,ce;const{message:e,messageArray:n,index:r,onButtonClick:s}=t,{linkProtocol:o,linkTarget:a,botIconVerticalAlign:i}=ve(bt),{type:c,alignment:l,formattedTime:d,participantName:p="",avatar:m,resend:g}=e,[y]=et(),{emit:_}=Dn(),w=ed(),T={avatarVerticalAlign:i,linkProtocol:o,linkTarget:a,errorMessageText:y("invalidRichMedia"),onButtonClick:s,onMediaSourceError:cu,onMessageError:ii},L=l==="received",v=l==="sent",C=c==="typing",k=c==="system",x=c==="file",R=["file","audio","video","image"].indexOf(c)>-1,M=k||x,D=r===n.length-1,$=ci(e,n[r-1]),A=hC(e,n[r-1]),U=mC(e,n[r+1]),K=!k&&A&&L,ee=!k&&U&&!!p,te=!k&&U&&!!d,oe=E.useMemo(()=>te?d.replace(/AM/gi,y("AM")).replace(/PM/gi,y("PM")):"",[y,te,d]),ue=()=>{v&&_(qt.need_scroll_to_bottom)};return M&&((fe=e==null?void 0:e.smart_text)!=null&&fe.key)&&(e.children=y(e.smart_text.key,((ce=e.smart_text)==null?void 0:ce.options)||{})),f.jsx(_d.message,{immediate:R||k||C,isReceived:L,children:f.jsx(_l,{...e,...T,enableRTL:w,hasAvatar:K,hasName:ee,hasTimestamp:te,formattedTime:oe,avatarUrl:m==null?void 0:m.url,avatarType:m==null?void 0:m.type,participantName:y(p),isInSeries:$,isLastMessage:D,onResend:g||gC,onMediaLoadedData:ue})})}function _C(t){const{onButtonClick:e}=t,n=E.useRef(Date.now()),{messages:r}=ve(Pm),{linkProtocol:s,linkTarget:o,botIcon:a,botIconVerticalAlign:i}=ve(bt),[c]=et(),l={avatarVerticalAlign:i,linkProtocol:s,linkTarget:o,errorMessageText:c("invalidRichMedia"),onButtonClick:e,onMediaSourceError:cu,onMessageError:ii},d=E.useCallback(()=>!1,[]);return f.jsx(f.Fragment,{children:r.map((p,m)=>E.createElement(_l,{...l,key:p.key,sid:p.key,tid:p.key,avatarUrl:a,status:"success",alignment:"received",isInSeries:m>0,hasAvatar:m===0,onResend:d,timestamp:n.current,hasTimestamp:!1,formattedTime:oo(n.current),type:"text",text:p.value}))})}const vC=({messages:t})=>{const{send:e}=za(),n=yd(),r=E.useCallback(async s=>{switch(s.type){case"reply":n&&await e({data:s.text,type:s.type,payload:s.payload});break;case"call":case"link":dC(s.payload);break}},[n,e]);return f.jsxs(f.Fragment,{children:[f.jsx(_C,{onButtonClick:r}),lC(t).map((s,o,a)=>f.jsx(yC,{message:s,index:o,messageArray:a,onButtonClick:r},"".concat(s.tid||s.sid,"-").concat(o)))]})},bC="_text_1gk1d_6",wC={text:bC},CC=()=>{const t=ve(n=>n.config.options.endedChatMessage),[e]=et();return f.jsx("p",{className:wC.text,"data-qa":"chat ended",children:t||e("endedChatMessage")})},xC="_feedbackMessage_1ke5d_6",SC="_feedbackContainer_1ke5d_14",TC="_iframe_1ke5d_34",EC="_hidden_1ke5d_49",Cs={feedbackMessage:xC,feedbackContainer:SC,iframe:TC,hidden:EC},kC=({feedbackLink:t})=>{const[e]=et(),n=E.useRef(null),r=E.useRef(null),s=E.useRef(null),{showMessage:o,height:a,message:i,hidden:c,pending:l}=Mv(),{updateFeedbackStatus:d,emit:p}=Dn(),m=E.useCallback(()=>{s.current&&(clearTimeout(s.current),s.current=null)},[]),g=E.useCallback(L=>{if(m(),!L||typeof L.status!="string"||typeof L.message!="string")d({status:"error",message:"feedbackLoadFailed",height:0,reason:L});else{const{status:v,message:C,height:k=300}=L;d({status:v,message:C,height:k}),v==="SURVEY_UNSUBMITTED"&&p(qt.need_scroll_to_bottom)}},[m,d,p]),y=E.useCallback(()=>{m(),s.current=setTimeout(()=>{d({status:"error",message:"feedbackLoadFailed",height:0,reason:"timeout"})},15e3)},[m,d]),_=E.useCallback(()=>{var v;if(r.current)return!1;const L=n.current;return L?(r.current=new ll({name:"Parent",sender:L.contentWindow,topic:"feedback"}),(v=r.current)==null||v.register("feedbackStatusChange",g),!0):!1},[g]),w=E.useCallback(()=>{var L,v;(L=r.current)==null||L.unregister("feedbackStatusChange"),(v=r.current)==null||v.destroy(),r.current=null},[]),T=()=>{d({status:"error",message:"feedbackLoadFailed",height:0,reason:"iframeLoadedError"})};return E.useEffect(()=>(n.current&&(y(),_()),()=>{m(),w()}),[y,m,_,w]),E.useEffect(()=>{(c||o)&&(m(),w())},[c,o,m,w]),c?f.jsx("div",{"aria-hidden":"true",className:Cs.hidden}):o?f.jsx("p",{className:Cs.feedbackMessage,"aria-label":e(i),children:e(i)}):f.jsx("div",{className:Cs.feedbackContainer,style:{height:l||c?0:a},"data-testid":"feedback-container","aria-hidden":l||c,"aria-label":"Feedback",children:f.jsx("iframe",{ref:n,src:t,className:Cs.iframe,onError:T,title:"Feedback","data-testid":"feedback-iframe"})})},AC="_hidden_xxytr_1",IC={hidden:AC},RC=({message:t})=>t?f.jsx("div",{className:IC.hidden,role:"log","aria-atomic":"true","aria-live":"polite",children:t.items.map((e,n)=>e.type==="text"?f.jsx("p",{children:e.text},n):null)}):null,LC="_wrapper_ivzoz_14",PC="_chatContent_ivzoz_22",Tc={wrapper:LC,chatContent:PC},ZS=t=>{const{page:e,messages:n,feedbackLink:r="",shouldLoadFeedback:s}=t,{hideTypingMessage:o}=za(),{osRef:a,headElRef:i,footerElRef:c,onScroll:l}=oC(),d=e===Se.End||e===Se.Error,p=s&&r;return E.useEffect(()=>{d&&o()},[d,o]),f.jsxs("div",{className:Tc.wrapper,children:[f.jsxs(oi,{className:Tc.chatContent,events:{scroll:l},options:{scrollbars:{autoHide:"scroll"},overflow:{x:"hidden"}},ref:a,children:[f.jsx("div",{ref:i,style:{width:"100%",height:1}}),f.jsx(vC,{messages:n}),d&&f.jsx(CC,{}),p&&f.jsx(kC,{feedbackLink:r}),f.jsx("div",{ref:c,style:{width:"100%",height:1}})]}),f.jsx(cC,{page:e}),f.jsx(RC,{message:n[n.length-1]||void 0})]})};var NC="Expected a function",Ec=NaN,jC="[object Symbol]",$C=/^\s+|\s+$/g,BC=/^[-+]0x[0-9a-f]+$/i,OC=/^0b[01]+$/i,MC=/^0o[0-7]+$/i,DC=parseInt,FC=typeof Ye=="object"&&Ye&&Ye.Object===Object&&Ye,VC=typeof self=="object"&&self&&self.Object===Object&&self,HC=FC||VC||Function("return this")(),zC=Object.prototype,UC=zC.toString,ZC=Math.max,WC=Math.min,Zo=function(){return HC.Date.now()};function GC(t,e,n){var r,s,o,a,i,c,l=0,d=!1,p=!1,m=!0;if(typeof t!="function")throw new TypeError(NC);e=kc(e)||0,Ca(n)&&(d=!!n.leading,p="maxWait"in n,o=p?ZC(kc(n.maxWait)||0,e):o,m="trailing"in n?!!n.trailing:m);function g(x){var R=r,M=s;return r=s=void 0,l=x,a=t.apply(M,R),a}function y(x){return l=x,i=setTimeout(T,e),d?g(x):a}function _(x){var R=x-c,M=x-l,D=e-R;return p?WC(D,o-M):D}function w(x){var R=x-c,M=x-l;return c===void 0||R>=e||R<0||p&&M>=o}function T(){var x=Zo();if(w(x))return L(x);i=setTimeout(T,_(x))}function L(x){return i=void 0,m&&r?g(x):(r=s=void 0,a)}function v(){i!==void 0&&clearTimeout(i),l=0,r=c=s=i=void 0}function C(){return i===void 0?a:L(Zo())}function k(){var x=Zo(),R=w(x);if(r=arguments,s=this,c=x,R){if(i===void 0)return y(c);if(p)return i=setTimeout(T,e),g(c)}return i===void 0&&(i=setTimeout(T,e)),a}return k.cancel=v,k.flush=C,k}function Ca(t){var e=typeof t;return!!t&&(e=="object"||e=="function")}function qC(t){return!!t&&typeof t=="object"}function YC(t){return typeof t=="symbol"||qC(t)&&UC.call(t)==jC}function kc(t){if(typeof t=="number")return t;if(YC(t))return Ec;if(Ca(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=Ca(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=t.replace($C,"");var n=OC.test(t);return n||MC.test(t)?DC(t.slice(2),n?2:8):BC.test(t)?Ec:+t}var KC=GC;const du=eo(KC),JC="_hiddenInput_fp29e_6",XC={hiddenInput:JC},QC=t=>{const{disabled:e,onChange:n}=t,r=a=>{const i=a.target.files;if(i){for(let c=0;c<i.length;c++){if(Hl.indexOf(i[c].type)<0)return;const l=new FormData;l.append("file",i[c]);let p=Vl(i[c].type).prefix;if(i[c].type==="application/pdf"&&(p="file"),i[c].size>jr.FILE_SIZE)return;n(l,p)}s.current&&(s.current.value="")}},s=E.useRef(null),o=()=>{var a;(a=s.current)==null||a.click()};return f.jsxs(Cr,{onClick:o,disabled:e,"aria-label":"upload attachment",children:[f.jsx("input",{type:"file","aria-hidden":!0,accept:Z_,onChange:r,ref:s,tabIndex:-1,"data-testid":"file-input",className:XC.hiddenInput}),f.jsx(sd,{})]})},Wo={"emoji-picker":"_emoji-picker_q90rg_19","emoji-picker-wrapper":"_emoji-picker-wrapper_q90rg_42","emoji-picker-rtl":"_emoji-picker-rtl_q90rg_96"},ex=E.lazy(()=>Ce(()=>import("./emoji-picker-react.esm-C23qRbqr.js"),__vite__mapDeps([33,1]),import.meta.url)),tx=t=>{const{onEmojiClick:e,visible:n,onTogglePicker:r,enableRTL:s=!1,bottom:o}=t,[a]=et(),i=E.useRef(null),c=E.useMemo(()=>({searchPlaceholder:a("emojiSearchPlaceholder"),categories:[{name:a("emojiCategorySuggested"),category:"suggested"},{name:a("emojiCategorySmileysPeople"),category:"smileys_people"},{name:a("emojiCategoryAnimalsNature"),category:"animals_nature"},{name:a("emojiCategoryFoodDrink"),category:"food_drink"},{name:a("emojiCategoryTravelPlaces"),category:"travel_places"},{name:a("emojiCategoryActivities"),category:"activities"},{name:a("emojiCategoryObjects"),category:"objects"},{name:a("emojiCategorySymbols"),category:"symbols"},{name:a("emojiCategoryFlags"),category:"flags"}]}),[a]);return E.useEffect(()=>{function l(d){i.current&&!i.current.contains(d.target)&&n&&r()}return document.addEventListener("click",l,!1),()=>{document.removeEventListener("click",l,!1)}},[r,n]),f.jsx("div",{className:[Wo["emoji-picker"],s?Wo["emoji-picker-rtl"]:""].filter(Boolean).join(" "),"data-testid":"emoji-picker",ref:i,"aria-hidden":!n,"aria-label":"emoji",style:{bottom:o},children:n&&f.jsx(E.Suspense,{fallback:f.jsx(ao,{size:"medium"}),children:f.jsx(ex,{width:"100%",height:"100%",className:Wo["emoji-picker-wrapper"],previewConfig:{showPreview:!1},emojiStyle:"native",onEmojiClick:e,suggestedEmojisMode:"recent",lazyLoadEmojis:!0,autoFocusSearch:!0,searchPlaceholder:c.searchPlaceholder,categories:c.categories})})})},nx=t=>{const{visible:e,setVisible:n,enableRTL:r=!1,bottom:s,onSelect:o}=t;return f.jsx(hl,{fallback:f.jsx(f.Fragment,{}),onError:ii,children:f.jsx(tx,{visible:e,bottom:s,onTogglePicker:n,onEmojiClick:o,enableRTL:r})})},rx=({disabled:t,onClick:e})=>f.jsx(Cr,{onClick:e,disabled:t,"aria-label":"add emoji",children:f.jsx(id,{})}),sx=t=>{const{disabled:e,onClick:n}=t,r=()=>{e||n()};return f.jsx(Cr,{onClick:r,disabled:e,"aria-label":"send message",children:f.jsx(ud,{})})},ox="_withSeparator_rldhy_27",xs={"user-input-area":"_user-input-area_rldhy_19",withSeparator:ox,"textarea-container":"_textarea-container_rldhy_31","action-buttons":"_action-buttons_rldhy_67"},WS=t=>{const[e,n]=E.useState(!1),{enableEmoji:r,enableAttachments:s,send:o,typing:a,connected:i,enableRTL:c=!1,showScreenLoading:l=!1}=t,[d,p]=E.useState(""),{chatPlaceholder:m,chatAriaLabel:g}=ve(bt),[y]=et(),[_,w]=E.useState(null),T=Ql(),{footerVisible:L,enableScroll:v}=td(),C=E.useMemo(()=>({chatPlaceholder:m||y("chatPlaceholder"),chatAriaLabel:g||y("chatAriaLabel")}),[y,m,g]);E.useEffect(()=>(S.setState({userInputAreaRef:_}),T&&!l&&(_==null||_.focus()),()=>{S.setState({userInputAreaRef:null})}),[_,T,l]),E.useEffect(()=>{d.length>0&&S.getState().typingMode!=="va"&&a()},[d,a]);const k=async()=>{d.trim()&&(n(!1),_==null||_.focus(),o({data:d.trim(),type:"text"}),p(""))},x=A=>{const U=A.target.value;p(U)},R=E.useRef(du(()=>{n(A=>!A)},0)).current,M=A=>{p(U=>"".concat(U).concat(A.emoji)),_==null||_.focus()},D=async A=>{A.nativeEvent.isComposing||A.key==="Enter"&&!A.shiftKey&&(A.preventDefault(),await k())},$=(A,U)=>{o({data:A,type:U}),_==null||_.focus()};return f.jsx("div",{id:"user-input-area",className:Ze(xs["user-input-area"],{[xs.withSeparator]:!L&&v}),"data-testid":"user-input-area",children:f.jsxs("div",{className:xs["textarea-container"],children:[f.jsx(wf,{name:"text",ref:A=>w(A),placeholder:C.chatPlaceholder,maxLength:1e3,wrap:"soft",maxRows:4,onChange:x,value:d,"aria-label":C.chatAriaLabel,onKeyDown:A=>D(A),enterKeyHint:"send",disabled:!i}),f.jsxs("div",{className:xs["action-buttons"],children:[s?f.jsx(QC,{disabled:!i,onChange:$}):null,r?f.jsx(rx,{disabled:!i,onClick:R}):null,f.jsx(sx,{disabled:!i||!d.trim(),onClick:k})]}),r&&f.jsx(nx,{bottom:(_==null?void 0:_.offsetHeight)||$f,visible:e,setVisible:R,onSelect:M,enableRTL:c})]})})},ax=(t,e)=>t==null?t:Object.entries(t).reduce((n,[r,s])=>(e(r,s,t)&&(n[r.toLowerCase()]=s),n),{}),vo=t=>typeof t=="string"?t.toLocaleLowerCase():"",ix=async t=>!Bf.test(t)&&t?cr.t("customFieldEmailInvalidFormatMessage"):!0,cx=async t=>!Of.test(t)&&t?cr.t("customFieldPhoneInvalidFormatMessage"):!0,lx="_wrapper_1lklo_19",dx="_submitButton_1lklo_24",ux="_customButton_1lklo_47",Go={wrapper:lx,submitButton:dx,customButton:ux},fx="start_the_chat",px=E.forwardRef((t,e)=>{const{trigger:n,label:r,submitHandle:s}=t,o=a=>{a.preventDefault(),a.stopPropagation(),n===fx&&s()};return f.jsx("div",{className:Go.customButton,children:f.jsx("div",{className:Go.wrapper,children:f.jsx("button",{type:"button",className:Go.submitButton,ref:e,title:r,onClick:o,children:r})})})}),hx="_ErrorMessage_15cbg_6",mx={ErrorMessage:hx},bo=t=>{const{message:e}=t;return f.jsx("p",{className:mx.ErrorMessage,"data-qa":"test-error-message","data-testid":"test-error-message",children:e})},gx="_isError_1rerd_11",yx="_isRequired_1rerd_18",yn={isError:gx,isRequired:yx},_x="_customDropdown_1dhdt_19",vx="_wrapper_1dhdt_24",bx="_labelWrapper_1dhdt_32",wx="_label_1dhdt_32",Cx="_selectContainer_1dhdt_49",xx="_menu_1dhdt_53",Sx="_visible_1dhdt_68",Tx="_option_1dhdt_72",Ex="_selected_1dhdt_87",kx="_dropdown_1dhdt_92",Ax="_placeholder_1dhdt_125",Ix="_text_1dhdt_125",Rx="_input_1dhdt_138",Lx="_arrow_1dhdt_142",Px="_isActive_1dhdt_147",Xe={customDropdown:_x,wrapper:vx,labelWrapper:bx,label:wx,selectContainer:Cx,menu:xx,visible:Sx,option:Tx,selected:Ex,dropdown:kx,placeholder:Ax,text:Ix,input:Rx,arrow:Lx,isActive:Px},Nx=t=>{const{options:e,onChange:n,value:r,onBlur:s,isError:o,label:a,name:i}=t,c=E.useRef(null),l=E.useRef(null),d=E.useRef(!1),[p,m]=E.useState(!1),{customDropdownInputPlaceholder:g}=ve(bt),[y]=et(),_=y("customDropdownPlaceholder",{select:g||y("customDropdownInputPlaceholder"),label:vo(a),interpolation:{escapeValue:!1}}),w=()=>{m(!p)},T=C=>()=>{n(C.value),w()},L=E.useCallback(()=>{if(d.current){d.current=!1;return}m(!1)},[]),v=E.useCallback(()=>{d.current=!0},[]);return E.useEffect(()=>(document.addEventListener("click",L),()=>{document.removeEventListener("click",L)}),[L]),f.jsxs("div",{ref:c,className:Xe.selectContainer,onClickCapture:v,children:[f.jsxs("button",{className:Ze(Xe.dropdown,{[yn.isError]:o}),name:i,type:"button",onClick:w,onBlur:s,"aria-expanded":p,"aria-labelledby":i,children:[r?f.jsx("span",{className:Xe.text,title:r,children:r}):f.jsx("span",{className:Xe.placeholder,title:_,children:_}),f.jsx(Ua,{className:Ze(Xe.arrow,{[Xe.isActive]:p})})]}),f.jsx("ul",{className:Ze(Xe.menu,{[Xe.visible]:p}),role:"listbox","aria-labelledby":i,ref:l,children:e==null?void 0:e.map(C=>f.jsx("li",{role:"option","aria-selected":r===C.value,title:C.value,className:Ze({[Xe.selected]:r===C.value}),children:f.jsx("button",{className:Ze(Xe.option,{[Xe.selected]:r===C.value}),type:"button",onClick:T(C),children:C.value})},C.key))})]})},jx=Re.forwardRef((t,e)=>{const{name:n,label:r,onChange:s,onBlur:o,options:a,value:i,isError:c,required:l}=t,[d]=et();return f.jsx("div",{className:Xe.customDropdown,ref:e,children:f.jsxs("div",{className:Xe.wrapper,children:[f.jsx("div",{className:Xe.labelWrapper,children:f.jsxs("span",{className:Xe.label,id:n,children:[r,l?f.jsx("span",{"aria-label":"required",className:yn.isRequired,children:"*"}):null]})}),f.jsx(Nx,{label:r,options:a,onChange:s,onBlur:o,value:i,isError:c,name:n}),c&&f.jsx(bo,{message:d("customFieldRequiredFormatMessage")})]})})}),$x="_customField_1hlud_19",Bx="_wrapper_1hlud_24",Ox="_labelWrapper_1hlud_33",Mx="_label_1hlud_33",Dx="_inputWrapper_1hlud_49",Fx="_input_1hlud_49",Vx="_clear_1hlud_80",kn={customField:$x,wrapper:Bx,labelWrapper:Ox,label:Mx,inputWrapper:Dx,input:Fx,clear:Vx},Hx=Re.forwardRef((t,e)=>{const{name:n,label:r,resetField:s,onChange:o,onBlur:a,value:i,defaultValue:c,isError:l,required:d}=t,{customFieldInputPlaceholder:p,customFieldEmailInvalidFormatMessage:m}=ve(bt),[g]=et();return f.jsx("div",{className:kn.customField,children:f.jsxs("div",{className:kn.wrapper,children:[f.jsx("div",{className:kn.labelWrapper,children:f.jsxs("p",{className:kn.label,id:n,children:[r,d?f.jsx("span",{className:yn.isRequired,"aria-label":"required",children:"*"}):null]})}),f.jsxs("div",{className:kn.inputWrapper,children:[f.jsx("input",{ref:e,value:i||"",autoComplete:"off",className:Ze(kn.input,{[yn.isError]:l}),name:n,onChange:o,onBlur:a,placeholder:p?g("customFieldPlaceholder",{type:p,label:vo(r),interpolation:{escapeValue:!1}}):"","aria-labelledby":n}),i&&i!==c&&f.jsx("button",{"aria-label":"reset ".concat(r),className:kn.clear,type:"button",onClick:()=>s(n,{keepError:!0}),children:f.jsx(lo,{})})]}),l&&f.jsx(bo,{message:m||g("customFieldEmailInvalidFormatMessage")})]})})}),zx="_customField_19gzc_19",Ux="_wrapper_19gzc_24",Zx="_labelWrapper_19gzc_33",Wx="_helper_19gzc_39",Gx="_label_19gzc_33",qx="_inputWrapper_19gzc_56",Yx="_input_19gzc_56",Kx="_clear_19gzc_87",on={customField:zx,wrapper:Ux,labelWrapper:Zx,helper:Wx,label:Gx,inputWrapper:qx,input:Yx,clear:Kx},Jx=Re.forwardRef((t,e)=>{const{name:n,label:r,resetField:s,onChange:o,onBlur:a,value:i,defaultValue:c,isError:l,required:d}=t,{customFieldPhoneDescription:p,customFieldInputPlaceholder:m,customFieldPhoneInvalidFormatMessage:g}=ve(bt),[y]=et();return f.jsx("div",{className:on.customField,children:f.jsxs("div",{className:on.wrapper,children:[f.jsx("div",{className:on.labelWrapper,children:f.jsxs("div",{className:on.label,id:n,children:[r,d?f.jsx("span",{className:yn.isRequired,"aria-label":"required",children:"*"}):null,f.jsx("div",{className:on.helper,children:p||y("customFieldPhoneDescription")})]})}),f.jsxs("div",{className:on.inputWrapper,children:[f.jsx("input",{ref:e,value:i||"",autoComplete:"off",className:Ze(on.input,{[yn.isError]:l}),name:n,onChange:o,onBlur:a,placeholder:m?y("customFieldPlaceholder",{type:m,label:vo(r),interpolation:{escapeValue:!1}}):"","aria-labelledby":n}),i&&i!==c&&f.jsx("button",{"aria-label":"reset ".concat(r),className:on.clear,type:"button",onClick:()=>s(n,{keepError:!0}),children:f.jsx(lo,{})})]}),l&&f.jsx(bo,{message:g||y("customFieldPhoneInvalidFormatMessage")})]})})}),xa=t=>{const{target:e,className:n="custom-bot"}=t,{linkProtocol:r,linkTarget:s}=ve(bt);return e?f.jsx(Cf,{className:n,as:"span",options:{defaultProtocol:r||lr.linkProtocol,target:s||lr.linkTarget,rel:"noopener noreferrer"},children:e}):null},Xx="_customMessage_1bdmg_19",Qx="_avatarWrapper_1bdmg_26",eS="_avatarWrapperAlign_1bdmg_42",tS="_wrapper_1bdmg_46",nS="_messageContent_1bdmg_51",rS="_isBubble_1bdmg_69",Xn={customMessage:Xx,avatarWrapper:Qx,avatarWrapperAlign:eS,wrapper:tS,messageContent:nS,isBubble:rS},sS=Re.forwardRef((t,e)=>{const{message:n,isBubble:r}=t,{botIcon:s,botIconVerticalAlign:o}=ve(bt);return f.jsxs("div",{className:Xn.customMessage,ref:e,children:[r?f.jsx("div",{className:Ze(Xn.avatarWrapper,{[Xn.avatarWrapperAlign]:(o||lr.botIconVerticalAlign)==="top"}),children:f.jsx(pl,{url:s})}):null,f.jsx("div",{className:Xn.wrapper,children:f.jsx("div",{className:Ze(Xn.messageContent,{[Xn.isBubble]:r}),children:f.jsx(xa,{target:n})})})]})}),oS="_customField_ns1ou_19",aS="_wrapper_ns1ou_24",iS="_labelWrapper_ns1ou_33",cS="_label_ns1ou_33",lS="_inputWrapper_ns1ou_49",dS="_input_ns1ou_49",uS="_clear_ns1ou_80",An={customField:oS,wrapper:aS,labelWrapper:iS,label:cS,inputWrapper:lS,input:dS,clear:uS},fS=Re.forwardRef((t,e)=>{const{name:n,label:r,resetField:s,onChange:o,onBlur:a,value:i,defaultValue:c,isError:l,required:d}=t,{customFieldInputPlaceholder:p}=ve(bt),[m]=et();return f.jsx("div",{className:An.customField,children:f.jsxs("div",{className:An.wrapper,children:[f.jsx("div",{className:An.labelWrapper,children:f.jsxs("p",{className:An.label,id:n,children:[r,d?f.jsx("span",{className:yn.isRequired,"aria-label":"required",children:"*"}):null]})}),f.jsxs("div",{className:An.inputWrapper,children:[f.jsx("input",{ref:e,value:i||"",autoComplete:"off",className:Ze(An.input,{[yn.isError]:l}),name:n,onChange:o,onBlur:a,placeholder:p?m("customFieldPlaceholder",{type:p,label:vo(r),interpolation:{escapeValue:!1}}):"","aria-labelledby":n}),i&&i!==c&&f.jsx("button",{"aria-label":"reset ".concat(r),className:An.clear,type:"button",onClick:()=>s(n,{keepError:!0}),children:f.jsx(lo,{})})]}),l&&f.jsx(bo,{message:m("customFieldRequiredFormatMessage")})]})})}),pS="_container_1a188_19",hS="_title_1a188_27",mS="_subTitle_1a188_41",qo={container:pS,title:hS,subTitle:mS},gS=t=>{const{title:e,subTitle:n}=t;return!e&&!n?null:f.jsxs("div",{className:qo.container,children:[e&&f.jsx("p",{className:qo.title,children:f.jsx(xa,{target:e})}),n&&f.jsx("p",{className:qo.subTitle,children:f.jsx(xa,{target:n})})]})},yS="_initialScreenWrapper_xd2yg_19",_S="_initialScreen_xd2yg_19",Ac={initialScreenWrapper:yS,initialScreen:_S},vS={field_email:ix,field_number:cx},GS=E.forwardRef(function(t,e){const{controls:n,welcomeMessage:r,onSubmitInitialScreen:s,defaultValues:o,enableValidation:a,active:i,updateChatFrameHeight:c}=t,l=E.useRef(!1),{updateInitialScreenHeight:d}=Dn(),{osRef:p,headElRef:m}=sC(),{handleSubmit:g,control:y,formState:{errors:_},resetField:w}=xf({mode:"onChange",shouldFocusError:!1}),T=E.useCallback(v=>{const C=ax(v,(x,R)=>!!R),k={...o,...C};typeof s=="function"&&s(k,l.current)},[o,s]),L=v=>{v.preventDefault(),v.stopPropagation()};return E.useEffect(()=>{if(!i)return;const v=n.filter(x=>x.type==="field"||x.type==="dropdown"),C=v.reduce((x,R)=>(x[R.argument]=(o==null?void 0:o[R.argument])||void 0,x),{});v.length>0&&Object.values(C).every(x=>x!==void 0)?T(o):v.forEach(x=>w(x.argument,{defaultValue:o==null?void 0:o[x.argument]}))},[n,w,o,i,T]),E.useEffect(()=>{var k;const v=(k=p.current)==null?void 0:k.getElement();if(!v)return;const C=new MutationObserver(du(async()=>{const x=await c();d(x)},100));return C.observe(v,{childList:!0,subtree:!0,attributeFilter:["data-initial-screen-loaded"]}),()=>{C.disconnect()}},[p,c,d]),i?f.jsx(_d.page,{className:Ac.initialScreenWrapper,children:f.jsx(oi,{ref:p,className:Ac.initialScreen,options:{scrollbars:{autoHide:"scroll"},overflow:{x:"hidden"}},children:f.jsxs("div",{ref:e,children:[f.jsx("div",{ref:m,style:{width:"100%",height:1}}),f.jsx(gS,{title:r==null?void 0:r.title,subTitle:r==null?void 0:r.subtitle}),f.jsx("form",{onSubmit:L,"data-testid":"form",children:n.map(v=>{const C=(o==null?void 0:o[v.argument])||"";if(v.type==="button")return f.jsx("div",{children:f.jsx(px,{label:v.label,trigger:"start_the_chat",submitHandle:()=>{l.current=!0,g(T)()}},v.key)},v.key);if(v.type==="message")return f.jsx("div",{children:f.jsx(sS,{isBubble:v.isBubble,message:v.value},v.key)},v.key);if(v.type==="dropdown")return f.jsx("div",{children:f.jsx(Ro,{name:v==null?void 0:v.argument,control:y,rules:{required:v==null?void 0:v.required},defaultValue:C,render:({field:k})=>{var x;return f.jsx(jx,{...k,label:v.label,options:v.options||[],required:v.required,isError:((x=_[v==null?void 0:v.argument])==null?void 0:x.type)==="required"})}})},v.key);if(v.type==="field")if(a&&["field_email","field_number"].includes(v.define)){const k=v.define==="field_email"?Hx:Jx;return f.jsx("div",{children:f.jsx(Ro,{name:v==null?void 0:v.argument,control:y,rules:{required:v==null?void 0:v.required,validate:["field_email","field_number"].includes(v==null?void 0:v.define)?vS[v==null?void 0:v.define]:void 0},defaultValue:C,render:({field:x})=>{var R,M;return f.jsx(k,{...x,defaultValue:C,resetField:w,label:v.label,required:v.required,isError:((R=_[v==null?void 0:v.argument])==null?void 0:R.type)==="required"||((M=_[v==null?void 0:v.argument])==null?void 0:M.type)==="validate"})}})},v.key)}else return f.jsx("div",{children:f.jsx(Ro,{name:v==null?void 0:v.argument,control:y,rules:{required:v==null?void 0:v.required},defaultValue:C,render:({field:k})=>{var x;return f.jsx(fS,{...k,defaultValue:C,resetField:w,label:v.label,required:v.required,isError:((x=_[v==null?void 0:v.argument])==null?void 0:x.type)==="required"})}})},v.key)})})]})})}):f.jsx(f.Fragment,{})}),bS="_chat_1oxpe_6",wS="_isDisabled_1oxpe_15",CS="_loadingWrapper_1oxpe_20",qS={chat:bS,isDisabled:wS,loadingWrapper:CS};export{Hm as $,za as A,Dn as B,_d as C,ZS as D,qt as E,jS as F,Ct as G,qS as H,GS as I,zS as J,hl as K,$S as L,US as M,BS as N,yt as O,sy as P,St as Q,sb as R,ul as S,oy as T,WS as U,Cl as V,kS as W,RS as X,qi as Y,$n as Z,Ce as _,LS as a,Uf as a0,ES as a1,AS as a2,Dm as a3,Ss as a4,NS as b,Ze as c,PS as d,IS as e,Ql as f,MS as g,Oc as h,Ts as i,Se as j,ve as k,ut as l,FS as m,$c as n,Mv as o,jg as p,td as q,Am as r,Sa as s,OS as t,S as u,DS as v,VS as w,ed as x,yd as y,HS as z};
//# sourceMappingURL=overlayscrollbars-xOREQhpB.js.map
