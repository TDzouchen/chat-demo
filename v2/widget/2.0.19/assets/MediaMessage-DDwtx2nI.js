import{j as e,r as n}from"./main-vendor-DXirhFg8.js";import{a0 as m,a1 as I,a2 as E}from"./overlayscrollbars-xOREQhpB.js";import"./reporter-vendor-CC1waedv.js";/*!
* Talkdesk Confidential
*
* Copyright (C) Talkdesk Inc. 2024
*
* The source code for this program is not published or otherwise divested
* of its trade secrets, irrespective of what has been deposited with the
* U.S. Copyright Office. Unauthorized copying of this file, via any medium
* is strictly prohibited.
*/const M=()=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",children:[e.jsx("path",{d:"M11 3.99984V11.6665C11 13.1398 9.80669 14.3332 8.33335 14.3332C6.86002 14.3332 5.66669 13.1398 5.66669 11.6665V3.33317C5.66669 2.41317 6.41335 1.6665 7.33335 1.6665C8.25335 1.6665 9.00002 2.41317 9.00002 3.33317V10.3332C9.00002 10.6998 8.70002 10.9998 8.33335 10.9998C7.96669 10.9998 7.66669 10.6998 7.66669 10.3332V3.99984H6.66669V10.3332C6.66669 11.2532 7.41335 11.9998 8.33335 11.9998C9.25335 11.9998 10 11.2532 10 10.3332V3.33317C10 1.85984 8.80669 0.666504 7.33335 0.666504C5.86002 0.666504 4.66669 1.85984 4.66669 3.33317V11.6665C4.66669 13.6932 6.30669 15.3332 8.33335 15.3332C10.36 15.3332 12 13.6932 12 11.6665V3.99984H11Z",fill:"#ffffff"}),e.jsx("mask",{id:"mask0_3460_15772",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:"4",y:"0",width:"8",height:"16",children:e.jsx("path",{d:"M11 3.99984V11.6665C11 13.1398 9.80669 14.3332 8.33335 14.3332C6.86002 14.3332 5.66669 13.1398 5.66669 11.6665V3.33317C5.66669 2.41317 6.41335 1.6665 7.33335 1.6665C8.25335 1.6665 9.00002 2.41317 9.00002 3.33317V10.3332C9.00002 10.6998 8.70002 10.9998 8.33335 10.9998C7.96669 10.9998 7.66669 10.6998 7.66669 10.3332V3.99984H6.66669V10.3332C6.66669 11.2532 7.41335 11.9998 8.33335 11.9998C9.25335 11.9998 10 11.2532 10 10.3332V3.33317C10 1.85984 8.80669 0.666504 7.33335 0.666504C5.86002 0.666504 4.66669 1.85984 4.66669 3.33317V11.6665C4.66669 13.6932 6.30669 15.3332 8.33335 15.3332C10.36 15.3332 12 13.6932 12 11.6665V3.99984H11Z",fill:"white"})}),e.jsx("g",{mask:"url(#mask0_3460_15772)"})]}),A="_customImage_dge3f_11",S="_customVideo_dge3f_11",v="_customAudio_dge3f_11",F="_customFile_dge3f_45",f={customImage:A,customVideo:S,customAudio:v,customFile:F},L=a=>a.startsWith("blob:")?a:"".concat(a,"#t=0.001"),$=a=>{const{type:g,url:i,getContentTemporaryUrl:o,onError:s,onMediaLoadedData:h,children:y}=a,t=n.useRef(null),w=n.useRef(null),x=n.useRef(0),[d,V]=n.useState(i),c=n.useRef(0);n.useEffect(()=>{var r;g==="video"&&i&&i.startsWith("blob:")&&((r=t.current)==null||r.load())},[g,i]);const k=r=>{t.current&&(V(r),t.current.load(),t.current.play())},T=r=>{t.current&&(t.current.currentTime=r)},_=async r=>{var l;s&&s(new Error("failed to load media. Url: ".concat(r.currentTarget.currentSrc)));const u=(l=r.currentTarget.error)==null?void 0:l.code;if(o&&u===I){if(c.current>=E)return;c.current=c.current+1;try{const C=await o();C&&(k(C),T(x.current))}catch(C){const b=new Error("failed to fetch new media url.");s&&s(b)}}},R=async r=>{if(s&&s(new Error("failed to load image. Url: ".concat(r.currentTarget.currentSrc))),o){if(c.current>=E)return;c.current=c.current+1;try{const u=await o();u&&w.current&&V(u)}catch(u){const l=new Error("failed to fetch new image url.");s&&s(l)}}},j=()=>{t.current&&t.current.currentTime&&(x.current=t.current.currentTime)},U=async()=>{const r=o?await o():i;r&&window.open(r,"_blank")},p=()=>{h==null||h()};switch(g){case m.Audio:return e.jsxs("audio",{"data-testid":"customAudio",ref:t,className:f.customAudio,controls:!0,onError:_,onTimeUpdate:j,onLoadedData:p,children:[e.jsx("source",{src:d,type:"audio/mpeg"}),e.jsx("source",{src:d,type:"audio/ogg"}),e.jsx("track",{src:"",kind:"captions",srcLang:"en",label:"english_captions"}),"Your browser does not support the audio tag."]});case m.Video:return e.jsxs("video",{"data-testid":"customVideo",ref:t,className:f.customVideo,controls:!0,playsInline:!0,onError:_,onTimeUpdate:j,onLoadedData:p,children:[e.jsx("source",{src:L(d),type:"video/mp4"}),e.jsx("track",{src:"",kind:"captions",srcLang:"en",label:"english_captions"}),"Your browser does not support the video tag."]});case m.Image:return e.jsx("img",{src:d,ref:w,alt:"This is an img attachment",onError:R,className:f.customImage,onLoad:p});case m.File:return e.jsxs("button",{"data-testid":"customFile","aria-label":"file",className:f.customFile,onClick:U,children:[e.jsx(M,{}),e.jsx("span",{children:y})]});default:return e.jsx(e.Fragment,{})}};export{$ as default};
//# sourceMappingURL=MediaMessage-DDwtx2nI.js.map
