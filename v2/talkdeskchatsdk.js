(function(Le,mr){typeof exports=="object"&&typeof module<"u"?module.exports=mr():typeof define=="function"&&define.amd?define(mr):(Le=typeof globalThis<"u"?globalThis:Le||self,Le.TalkdeskChatSDK=mr())})(this,function(){"use strict";/*!
* Talkdesk Confidential
*
* Copyright (C) Talkdesk Inc. 2024
*
* The source code for this program is not published or otherwise divested
* of its trade secrets, irrespective of what has been deposited with the
* U.S. Copyright Office. Unauthorized copying of this file, via any medium
* is strictly prohibited.
*/function Le(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,n=Array(r);t<r;t++)n[t]=e[t];return n}function mr(e){if(Array.isArray(e))return e}function Iv(e){if(Array.isArray(e))return Le(e)}function Tv(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function fo(e,r,t,n,a,i,o){try{var s=e[i](o),c=s.value}catch(u){return void t(u)}s.done?r(c):Promise.resolve(c).then(n,a)}function V(e){return function(){var r=this,t=arguments;return new Promise(function(n,a){var i=e.apply(r,t);function o(c){fo(i,n,a,o,s,"next",c)}function s(c){fo(i,n,a,o,s,"throw",c)}o(void 0)})}}function Pv(e,r,t){return r=$r(r),Mv(e,pn()?Reflect.construct(r,t||[],$r(e).constructor):r.apply(e,t))}function br(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function Rv(e,r,t){if(pn())return Reflect.construct.apply(null,arguments);var n=[null];n.push.apply(n,r);var a=new(e.bind.apply(e,n));return t&&Sr(a,t.prototype),a}function ho(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,go(n.key),n)}}function wr(e,r,t){return r&&ho(e.prototype,r),t&&ho(e,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function A(e,r,t){return(r=go(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function $r(e){return $r=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},$r(e)}function Cv(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),r&&Sr(e,r)}function xv(e){try{return Function.toString.call(e).indexOf("[native code]")!==-1}catch{return typeof e=="function"}}function pn(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(pn=function(){return!!e})()}function _v(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Lv(e,r){var t=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(t!=null){var n,a,i,o,s=[],c=!0,u=!1;try{if(i=(t=t.call(e)).next,r===0){if(Object(t)!==t)return;c=!1}else for(;!(c=(n=i.call(t)).done)&&(s.push(n.value),s.length!==r);c=!0);}catch(v){u=!0,a=v}finally{try{if(!c&&t.return!=null&&(o=t.return(),Object(o)!==o))return}finally{if(u)throw a}}return s}}function Av(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function jv(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function po(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),t.push.apply(t,n)}return t}function M(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?po(Object(t),!0).forEach(function(n){A(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):po(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}function Nv(e,r){if(e==null)return{};var t,n,a=kv(e,r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)t=i[n],r.includes(t)||{}.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}function kv(e,r){if(e==null)return{};var t={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(r.includes(n))continue;t[n]=e[n]}return t}function Mv(e,r){if(r&&(typeof r=="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Tv(e)}function R(){R=function(){return r};var e,r={},t=Object.prototype,n=t.hasOwnProperty,a=Object.defineProperty||function(p,h,y){p[h]=y.value},i=typeof Symbol=="function"?Symbol:{},o=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function u(p,h,y){return Object.defineProperty(p,h,{value:y,enumerable:!0,configurable:!0,writable:!0}),p[h]}try{u({},"")}catch{u=function(h,y,E){return h[y]=E}}function v(p,h,y,E){var b=h&&h.prototype instanceof S?h:S,C=Object.create(b.prototype),T=new ze(E||[]);return a(C,"_invoke",{value:gr(p,y,T)}),C}function l(p,h,y){try{return{type:"normal",arg:p.call(h,y)}}catch(E){return{type:"throw",arg:E}}}r.wrap=v;var f="suspendedStart",d="suspendedYield",m="executing",w="completed",g={};function S(){}function $(){}function I(){}var L={};u(L,o,function(){return this});var fe=Object.getPrototypeOf,B=fe&&fe(fe(we([])));B&&B!==t&&n.call(B,o)&&(L=B);var O=I.prototype=S.prototype=Object.create(L);function k(p){["next","throw","return"].forEach(function(h){u(p,h,function(y){return this._invoke(h,y)})})}function oe(p,h){function y(b,C,T,q){var Q=l(p[b],p,C);if(Q.type!=="throw"){var yr=Q.arg,Qr=yr.value;return Qr&&typeof Qr=="object"&&n.call(Qr,"__await")?h.resolve(Qr.__await).then(function(We){y("next",We,T,q)},function(We){y("throw",We,T,q)}):h.resolve(Qr).then(function(We){yr.value=We,T(yr)},function(We){return y("throw",We,T,q)})}q(Q.arg)}var E;a(this,"_invoke",{value:function(b,C){function T(){return new h(function(q,Q){y(b,C,q,Q)})}return E=E?E.then(T,T):T()}})}function gr(p,h,y){var E=f;return function(b,C){if(E===m)throw Error("Generator is already running");if(E===w){if(b==="throw")throw C;return{value:e,done:!0}}for(y.method=b,y.arg=C;;){var T=y.delegate;if(T){var q=se(T,y);if(q){if(q===g)continue;return q}}if(y.method==="next")y.sent=y._sent=y.arg;else if(y.method==="throw"){if(E===f)throw E=w,y.arg;y.dispatchException(y.arg)}else y.method==="return"&&y.abrupt("return",y.arg);E=m;var Q=l(p,h,y);if(Q.type==="normal"){if(E=y.done?w:d,Q.arg===g)continue;return{value:Q.arg,done:y.done}}Q.type==="throw"&&(E=w,y.method="throw",y.arg=Q.arg)}}}function se(p,h){var y=h.method,E=p.iterator[y];if(E===e)return h.delegate=null,y==="throw"&&p.iterator.return&&(h.method="return",h.arg=e,se(p,h),h.method==="throw")||y!=="return"&&(h.method="throw",h.arg=new TypeError("The iterator does not provide a '"+y+"' method")),g;var b=l(E,p.iterator,h.arg);if(b.type==="throw")return h.method="throw",h.arg=b.arg,h.delegate=null,g;var C=b.arg;return C?C.done?(h[p.resultName]=C.value,h.next=p.nextLoc,h.method!=="return"&&(h.method="next",h.arg=e),h.delegate=null,g):C:(h.method="throw",h.arg=new TypeError("iterator result is not an object"),h.delegate=null,g)}function hn(p){var h={tryLoc:p[0]};1 in p&&(h.catchLoc=p[1]),2 in p&&(h.finallyLoc=p[2],h.afterLoc=p[3]),this.tryEntries.push(h)}function He(p){var h=p.completion||{};h.type="normal",delete h.arg,p.completion=h}function ze(p){this.tryEntries=[{tryLoc:"root"}],p.forEach(hn,this),this.reset(!0)}function we(p){if(p||p===""){var h=p[o];if(h)return h.call(p);if(typeof p.next=="function")return p;if(!isNaN(p.length)){var y=-1,E=function b(){for(;++y<p.length;)if(n.call(p,y))return b.value=p[y],b.done=!1,b;return b.value=e,b.done=!0,b};return E.next=E}}throw new TypeError(typeof p+" is not iterable")}return $.prototype=I,a(O,"constructor",{value:I,configurable:!0}),a(I,"constructor",{value:$,configurable:!0}),$.displayName=u(I,c,"GeneratorFunction"),r.isGeneratorFunction=function(p){var h=typeof p=="function"&&p.constructor;return!!h&&(h===$||(h.displayName||h.name)==="GeneratorFunction")},r.mark=function(p){return Object.setPrototypeOf?Object.setPrototypeOf(p,I):(p.__proto__=I,u(p,c,"GeneratorFunction")),p.prototype=Object.create(O),p},r.awrap=function(p){return{__await:p}},k(oe.prototype),u(oe.prototype,s,function(){return this}),r.AsyncIterator=oe,r.async=function(p,h,y,E,b){b===void 0&&(b=Promise);var C=new oe(v(p,h,y,E),b);return r.isGeneratorFunction(h)?C:C.next().then(function(T){return T.done?T.value:C.next()})},k(O),u(O,c,"Generator"),u(O,o,function(){return this}),u(O,"toString",function(){return"[object Generator]"}),r.keys=function(p){var h=Object(p),y=[];for(var E in h)y.push(E);return y.reverse(),function b(){for(;y.length;){var C=y.pop();if(C in h)return b.value=C,b.done=!1,b}return b.done=!0,b}},r.values=we,ze.prototype={constructor:ze,reset:function(p){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(He),!p)for(var h in this)h.charAt(0)==="t"&&n.call(this,h)&&!isNaN(+h.slice(1))&&(this[h]=e)},stop:function(){this.done=!0;var p=this.tryEntries[0].completion;if(p.type==="throw")throw p.arg;return this.rval},dispatchException:function(p){if(this.done)throw p;var h=this;function y(Q,yr){return C.type="throw",C.arg=p,h.next=Q,yr&&(h.method="next",h.arg=e),!!yr}for(var E=this.tryEntries.length-1;E>=0;--E){var b=this.tryEntries[E],C=b.completion;if(b.tryLoc==="root")return y("end");if(b.tryLoc<=this.prev){var T=n.call(b,"catchLoc"),q=n.call(b,"finallyLoc");if(T&&q){if(this.prev<b.catchLoc)return y(b.catchLoc,!0);if(this.prev<b.finallyLoc)return y(b.finallyLoc)}else if(T){if(this.prev<b.catchLoc)return y(b.catchLoc,!0)}else{if(!q)throw Error("try statement without catch or finally");if(this.prev<b.finallyLoc)return y(b.finallyLoc)}}}},abrupt:function(p,h){for(var y=this.tryEntries.length-1;y>=0;--y){var E=this.tryEntries[y];if(E.tryLoc<=this.prev&&n.call(E,"finallyLoc")&&this.prev<E.finallyLoc){var b=E;break}}b&&(p==="break"||p==="continue")&&b.tryLoc<=h&&h<=b.finallyLoc&&(b=null);var C=b?b.completion:{};return C.type=p,C.arg=h,b?(this.method="next",this.next=b.finallyLoc,g):this.complete(C)},complete:function(p,h){if(p.type==="throw")throw p.arg;return p.type==="break"||p.type==="continue"?this.next=p.arg:p.type==="return"?(this.rval=this.arg=p.arg,this.method="return",this.next="end"):p.type==="normal"&&h&&(this.next=h),g},finish:function(p){for(var h=this.tryEntries.length-1;h>=0;--h){var y=this.tryEntries[h];if(y.finallyLoc===p)return this.complete(y.completion,y.afterLoc),He(y),g}},catch:function(p){for(var h=this.tryEntries.length-1;h>=0;--h){var y=this.tryEntries[h];if(y.tryLoc===p){var E=y.completion;if(E.type==="throw"){var b=E.arg;He(y)}return b}}throw Error("illegal catch attempt")},delegateYield:function(p,h,y){return this.delegate={iterator:we(p),resultName:h,nextLoc:y},this.method==="next"&&(this.arg=e),g}},r}function Sr(e,r){return Sr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,n){return t.__proto__=n,t},Sr(e,r)}function gn(e,r){return mr(e)||Lv(e,r)||yo(e,r)||Av()}function Uv(e){return Iv(e)||_v(e)||yo(e)||jv()}function Bv(e,r){if(typeof e!="object"||!e)return e;var t=e[Symbol.toPrimitive];if(t!==void 0){var n=t.call(e,r||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}function go(e){var r=Bv(e,"string");return typeof r=="symbol"?r:r+""}function yo(e,r){if(e){if(typeof e=="string")return Le(e,r);var t={}.toString.call(e).slice(8,-1);return t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set"?Array.from(e):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?Le(e,r):void 0}}function yn(e){var r=typeof Map=="function"?new Map:void 0;return yn=function(t){if(t===null||!xv(t))return t;if(typeof t!="function")throw new TypeError("Super expression must either be null or a function");if(r!==void 0){if(r.has(t))return r.get(t);r.set(t,n)}function n(){return Rv(t,arguments,$r(this).constructor)}return n.prototype=Object.create(t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),Sr(n,t)},yn(e)}var Zr=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Dv(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Er=function(e){return e&&e.Math===Math&&e},j=Er(typeof globalThis=="object"&&globalThis)||Er(typeof window=="object"&&window)||Er(typeof self=="object"&&self)||Er(typeof Zr=="object"&&Zr)||Er(typeof Zr=="object"&&Zr)||function(){return this}()||Function("return this")(),mo={exports:{}},Fv=!1,bo=j,Gv=Object.defineProperty,mn=function(e,r){try{Gv(bo,e,{value:r,configurable:!0,writable:!0})}catch{bo[e]=r}return r},Hv=j,zv=mn,wo="__core-js_shared__",$o=mo.exports=Hv[wo]||zv(wo,{});($o.versions||($o.versions=[])).push({version:"3.38.0",mode:"global",copyright:"© 2014-2024 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.38.0/LICENSE",source:"https://github.com/zloirock/core-js"});var bn=mo.exports,So=bn,wn=function(e,r){return So[e]||(So[e]=r||{})},P=function(e){try{return!!e()}catch{return!0}},Wv=P,et=!Wv(function(){var e=(function(){}).bind();return typeof e!="function"||e.hasOwnProperty("prototype")}),Eo=et,Oo=Function.prototype,$n=Oo.call,Kv=Eo&&Oo.bind.bind($n,$n),_=Eo?Kv:function(e){return function(){return $n.apply(e,arguments)}},Ae=function(e){return e==null},qv=Ae,Vv=TypeError,Ke=function(e){if(qv(e))throw new Vv("Can't call method on "+e);return e},Yv=Ke,Xv=Object,$e=function(e){return Xv(Yv(e))},Jv=_,Qv=$e,Zv=Jv({}.hasOwnProperty),Y=Object.hasOwn||function(r,t){return Zv(Qv(r),t)},ef=_,rf=0,tf=Math.random(),nf=ef(1 .toString),Sn=function(e){return"Symbol("+(e===void 0?"":e)+")_"+nf(++rf+tf,36)},af=j,Io=af.navigator,To=Io&&Io.userAgent,Or=To?String(To):"",Po=j,En=Or,Ro=Po.process,Co=Po.Deno,xo=Ro&&Ro.versions||Co&&Co.version,_o=xo&&xo.v8,ue,rt;_o&&(ue=_o.split("."),rt=ue[0]>0&&ue[0]<4?1:+(ue[0]+ue[1])),!rt&&En&&(ue=En.match(/Edge\/(\d+)/),(!ue||ue[1]>=74)&&(ue=En.match(/Chrome\/(\d+)/),ue&&(rt=+ue[1])));var tt=rt,Lo=tt,of=P,sf=j,uf=sf.String,Ao=!!Object.getOwnPropertySymbols&&!of(function(){var e=Symbol("symbol detection");return!uf(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&Lo&&Lo<41}),cf=Ao,jo=cf&&!Symbol.sham&&typeof Symbol.iterator=="symbol",lf=j,vf=wn,No=Y,ff=Sn,df=Ao,hf=jo,qe=lf.Symbol,On=vf("wks"),pf=hf?qe.for||qe:qe&&qe.withoutSetter||ff,U=function(e){return No(On,e)||(On[e]=df&&No(qe,e)?qe[e]:pf("Symbol."+e)),On[e]},gf=U,yf=gf("toStringTag"),ko={};ko[yf]="z";var In=String(ko)==="[object z]",Tn=typeof document=="object"&&document.all,N=typeof Tn>"u"&&Tn!==void 0?function(e){return typeof e=="function"||e===Tn}:function(e){return typeof e=="function"},ce={},mf=P,G=!mf(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!==7}),bf=N,H=function(e){return typeof e=="object"?e!==null:bf(e)},wf=j,Mo=H,Pn=wf.document,$f=Mo(Pn)&&Mo(Pn.createElement),nt=function(e){return $f?Pn.createElement(e):{}},Sf=G,Ef=P,Of=nt,Uo=!Sf&&!Ef(function(){return Object.defineProperty(Of("div"),"a",{get:function(){return 7}}).a!==7}),If=G,Tf=P,Bo=If&&Tf(function(){return Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype!==42}),Pf=H,Rf=String,Cf=TypeError,z=function(e){if(Pf(e))return e;throw new Cf(Rf(e)+" is not an object")},xf=et,at=Function.prototype.call,F=xf?at.bind(at):function(){return at.apply(at,arguments)},Rn=j,_f=N,Lf=function(e){return _f(e)?e:void 0},je=function(e,r){return arguments.length<2?Lf(Rn[e]):Rn[e]&&Rn[e][r]},Af=_,it=Af({}.isPrototypeOf),jf=je,Nf=N,kf=it,Mf=jo,Uf=Object,Do=Mf?function(e){return typeof e=="symbol"}:function(e){var r=jf("Symbol");return Nf(r)&&kf(r.prototype,Uf(e))},Bf=String,ot=function(e){try{return Bf(e)}catch{return"Object"}},Df=N,Ff=ot,Gf=TypeError,Se=function(e){if(Df(e))return e;throw new Gf(Ff(e)+" is not a function")},Hf=Se,zf=Ae,st=function(e,r){var t=e[r];return zf(t)?void 0:Hf(t)},Cn=F,xn=N,_n=H,Wf=TypeError,Kf=function(e,r){var t,n;if(r==="string"&&xn(t=e.toString)&&!_n(n=Cn(t,e))||xn(t=e.valueOf)&&!_n(n=Cn(t,e))||r!=="string"&&xn(t=e.toString)&&!_n(n=Cn(t,e)))return n;throw new Wf("Can't convert object to primitive value")},qf=F,Fo=H,Go=Do,Vf=st,Yf=Kf,Xf=U,Jf=TypeError,Qf=Xf("toPrimitive"),Zf=function(e,r){if(!Fo(e)||Go(e))return e;var t=Vf(e,Qf),n;if(t){if(r===void 0&&(r="default"),n=qf(t,e,r),!Fo(n)||Go(n))return n;throw new Jf("Can't convert object to primitive value")}return r===void 0&&(r="number"),Yf(e,r)},ed=Zf,rd=Do,Ho=function(e){var r=ed(e,"string");return rd(r)?r:r+""},td=G,nd=Uo,ad=Bo,ut=z,zo=Ho,id=TypeError,Ln=Object.defineProperty,od=Object.getOwnPropertyDescriptor,An="enumerable",jn="configurable",Nn="writable";ce.f=td?ad?function(r,t,n){if(ut(r),t=zo(t),ut(n),typeof r=="function"&&t==="prototype"&&"value"in n&&Nn in n&&!n[Nn]){var a=od(r,t);a&&a[Nn]&&(r[t]=n.value,n={configurable:jn in n?n[jn]:a[jn],enumerable:An in n?n[An]:a[An],writable:!1})}return Ln(r,t,n)}:Ln:function(r,t,n){if(ut(r),t=zo(t),ut(n),nd)try{return Ln(r,t,n)}catch{}if("get"in n||"set"in n)throw new id("Accessors not supported");return"value"in n&&(r[t]=n.value),r};var Wo={exports:{}},kn=G,sd=Y,Ko=Function.prototype,ud=kn&&Object.getOwnPropertyDescriptor,Mn=sd(Ko,"name"),cd=Mn&&(function(){}).name==="something",ld=Mn&&(!kn||kn&&ud(Ko,"name").configurable),ct={EXISTS:Mn,PROPER:cd,CONFIGURABLE:ld},vd=_,fd=N,Un=bn,dd=vd(Function.toString);fd(Un.inspectSource)||(Un.inspectSource=function(e){return dd(e)});var Bn=Un.inspectSource,hd=j,pd=N,qo=hd.WeakMap,gd=pd(qo)&&/native code/.test(String(qo)),Ir=function(e,r){return{enumerable:!(e&1),configurable:!(e&2),writable:!(e&4),value:r}},yd=G,md=ce,bd=Ir,Ve=yd?function(e,r,t){return md.f(e,r,bd(1,t))}:function(e,r,t){return e[r]=t,e},wd=wn,$d=Sn,Vo=wd("keys"),Dn=function(e){return Vo[e]||(Vo[e]=$d(e))},lt={},Sd=gd,Yo=j,Ed=H,Od=Ve,Fn=Y,Gn=bn,Id=Dn,Td=lt,Xo="Object already initialized",Hn=Yo.TypeError,Pd=Yo.WeakMap,vt,Tr,ft,Rd=function(e){return ft(e)?Tr(e):vt(e,{})},Cd=function(e){return function(r){var t;if(!Ed(r)||(t=Tr(r)).type!==e)throw new Hn("Incompatible receiver, "+e+" required");return t}};if(Sd||Gn.state){var de=Gn.state||(Gn.state=new Pd);de.get=de.get,de.has=de.has,de.set=de.set,vt=function(e,r){if(de.has(e))throw new Hn(Xo);return r.facade=e,de.set(e,r),r},Tr=function(e){return de.get(e)||{}},ft=function(e){return de.has(e)}}else{var Ye=Id("state");Td[Ye]=!0,vt=function(e,r){if(Fn(e,Ye))throw new Hn(Xo);return r.facade=e,Od(e,Ye,r),r},Tr=function(e){return Fn(e,Ye)?e[Ye]:{}},ft=function(e){return Fn(e,Ye)}}var Ee={set:vt,get:Tr,has:ft,enforce:Rd,getterFor:Cd},zn=_,xd=P,_d=N,dt=Y,Wn=G,Ld=ct.CONFIGURABLE,Ad=Bn,Jo=Ee,jd=Jo.enforce,Nd=Jo.get,Qo=String,ht=Object.defineProperty,kd=zn("".slice),Md=zn("".replace),Ud=zn([].join),Bd=Wn&&!xd(function(){return ht(function(){},"length",{value:8}).length!==8}),Dd=String(String).split("String"),Fd=Wo.exports=function(e,r,t){kd(Qo(r),0,7)==="Symbol("&&(r="["+Md(Qo(r),/^Symbol\(([^)]*)\).*$/,"$1")+"]"),t&&t.getter&&(r="get "+r),t&&t.setter&&(r="set "+r),(!dt(e,"name")||Ld&&e.name!==r)&&(Wn?ht(e,"name",{value:r,configurable:!0}):e.name=r),Bd&&t&&dt(t,"arity")&&e.length!==t.arity&&ht(e,"length",{value:t.arity});try{t&&dt(t,"constructor")&&t.constructor?Wn&&ht(e,"prototype",{writable:!1}):e.prototype&&(e.prototype=void 0)}catch{}var n=jd(e);return dt(n,"source")||(n.source=Ud(Dd,typeof r=="string"?r:"")),e};Function.prototype.toString=Fd(function(){return _d(this)&&Nd(this).source||Ad(this)},"toString");var Zo=Wo.exports,Gd=N,Hd=ce,zd=Zo,Wd=mn,Z=function(e,r,t,n){n||(n={});var a=n.enumerable,i=n.name!==void 0?n.name:r;if(Gd(t)&&zd(t,i,n),n.global)a?e[r]=t:Wd(r,t);else{try{n.unsafe?e[r]&&(a=!0):delete e[r]}catch{}a?e[r]=t:Hd.f(e,r,{value:t,enumerable:!1,configurable:!n.nonConfigurable,writable:!n.nonWritable})}return e},es=_,Kd=es({}.toString),qd=es("".slice),Oe=function(e){return qd(Kd(e),8,-1)},Vd=In,Yd=N,pt=Oe,Xd=U,Jd=Xd("toStringTag"),Qd=Object,Zd=pt(function(){return arguments}())==="Arguments",eh=function(e,r){try{return e[r]}catch{}},Pr=Vd?pt:function(e){var r,t,n;return e===void 0?"Undefined":e===null?"Null":typeof(t=eh(r=Qd(e),Jd))=="string"?t:Zd?pt(r):(n=pt(r))==="Object"&&Yd(r.callee)?"Arguments":n},rh=In,th=Pr,nh=rh?{}.toString:function(){return"[object "+th(this)+"]"},ah=In,ih=Z,oh=nh;ah||ih(Object.prototype,"toString",oh,{unsafe:!0});var Kn={},gt={},rs={}.propertyIsEnumerable,ts=Object.getOwnPropertyDescriptor,sh=ts&&!rs.call({1:2},1);gt.f=sh?function(r){var t=ts(this,r);return!!t&&t.enumerable}:rs;var uh=_,ch=P,lh=Oe,qn=Object,vh=uh("".split),yt=ch(function(){return!qn("z").propertyIsEnumerable(0)})?function(e){return lh(e)==="String"?vh(e,""):qn(e)}:qn,fh=yt,dh=Ke,ge=function(e){return fh(dh(e))},hh=G,ph=F,gh=gt,yh=Ir,mh=ge,bh=Ho,wh=Y,$h=Uo,ns=Object.getOwnPropertyDescriptor;Kn.f=hh?ns:function(r,t){if(r=mh(r),t=bh(t),$h)try{return ns(r,t)}catch{}if(wh(r,t))return yh(!ph(gh.f,r,t),r[t])};var mt={},Sh=Math.ceil,Eh=Math.floor,Oh=Math.trunc||function(r){var t=+r;return(t>0?Eh:Sh)(t)},Ih=Oh,bt=function(e){var r=+e;return r!==r||r===0?0:Ih(r)},Th=bt,Ph=Math.max,Rh=Math.min,as=function(e,r){var t=Th(e);return t<0?Ph(t+r,0):Rh(t,r)},Ch=bt,xh=Math.min,is=function(e){var r=Ch(e);return r>0?xh(r,9007199254740991):0},_h=is,Xe=function(e){return _h(e.length)},Lh=ge,Ah=as,jh=Xe,os=function(e){return function(r,t,n){var a=Lh(r),i=jh(a);if(i===0)return!e&&-1;var o=Ah(n,i),s;if(e&&t!==t){for(;i>o;)if(s=a[o++],s!==s)return!0}else for(;i>o;o++)if((e||o in a)&&a[o]===t)return e||o||0;return!e&&-1}},Nh={includes:os(!0),indexOf:os(!1)},kh=_,Vn=Y,Mh=ge,Uh=Nh.indexOf,Bh=lt,ss=kh([].push),us=function(e,r){var t=Mh(e),n=0,a=[],i;for(i in t)!Vn(Bh,i)&&Vn(t,i)&&ss(a,i);for(;r.length>n;)Vn(t,i=r[n++])&&(~Uh(a,i)||ss(a,i));return a},Yn=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],Dh=us,Fh=Yn,Gh=Fh.concat("length","prototype");mt.f=Object.getOwnPropertyNames||function(r){return Dh(r,Gh)};var Xn={};Xn.f=Object.getOwnPropertySymbols;var Hh=je,zh=_,Wh=mt,Kh=Xn,qh=z,Vh=zh([].concat),Yh=Hh("Reflect","ownKeys")||function(r){var t=Wh.f(qh(r)),n=Kh.f;return n?Vh(t,n(r)):t},cs=Y,Xh=Yh,Jh=Kn,Qh=ce,Zh=function(e,r,t){for(var n=Xh(r),a=Qh.f,i=Jh.f,o=0;o<n.length;o++){var s=n[o];!cs(e,s)&&!(t&&cs(t,s))&&a(e,s,i(r,s))}},ep=P,rp=N,tp=/#|\.prototype\./,Rr=function(e,r){var t=ap[np(e)];return t===op?!0:t===ip?!1:rp(r)?ep(r):!!r},np=Rr.normalize=function(e){return String(e).replace(tp,".").toLowerCase()},ap=Rr.data={},ip=Rr.NATIVE="N",op=Rr.POLYFILL="P",Jn=Rr,wt=j,sp=Kn.f,up=Ve,cp=Z,lp=mn,vp=Zh,fp=Jn,D=function(e,r){var t=e.target,n=e.global,a=e.stat,i,o,s,c,u,v;if(n?o=wt:a?o=wt[t]||lp(t,{}):o=wt[t]&&wt[t].prototype,o)for(s in r){if(u=r[s],e.dontCallGetSet?(v=sp(o,s),c=v&&v.value):c=o[s],i=fp(n?s:t+(a?".":"#")+s,e.forced),!i&&c!==void 0){if(typeof u==typeof c)continue;vp(u,c)}(e.sham||c&&c.sham)&&up(u,"sham",!0),cp(o,s,u,e)}},Cr=j,dp=Or,hp=Oe,$t=function(e){return dp.slice(0,e.length)===e},ls=function(){return $t("Bun/")?"BUN":$t("Cloudflare-Workers")?"CLOUDFLARE":$t("Deno/")?"DENO":$t("Node.js/")?"NODE":Cr.Bun&&typeof Bun.version=="string"?"BUN":Cr.Deno&&typeof Deno.version=="object"?"DENO":hp(Cr.process)==="process"?"NODE":Cr.window&&Cr.document?"BROWSER":"REST"}(),pp=ls,Qn=pp==="NODE",gp=_,yp=Se,mp=function(e,r,t){try{return gp(yp(Object.getOwnPropertyDescriptor(e,r)[t]))}catch{}},bp=H,wp=function(e){return bp(e)||e===null},$p=wp,Sp=String,Ep=TypeError,Op=function(e){if($p(e))return e;throw new Ep("Can't set "+Sp(e)+" as a prototype")},Ip=mp,Tp=H,Pp=Ke,Rp=Op,Zn=Object.setPrototypeOf||("__proto__"in{}?function(){var e=!1,r={},t;try{t=Ip(Object.prototype,"__proto__","set"),t(r,[]),e=r instanceof Array}catch{}return function(a,i){return Pp(a),Rp(i),Tp(a)&&(e?t(a,i):a.__proto__=i),a}}():void 0),Cp=ce.f,xp=Y,_p=U,vs=_p("toStringTag"),Ne=function(e,r,t){e&&!t&&(e=e.prototype),e&&!xp(e,vs)&&Cp(e,vs,{configurable:!0,value:r})},fs=Zo,Lp=ce,St=function(e,r,t){return t.get&&fs(t.get,r,{getter:!0}),t.set&&fs(t.set,r,{setter:!0}),Lp.f(e,r,t)},Ap=je,jp=St,Np=U,kp=G,ds=Np("species"),hs=function(e){var r=Ap(e);kp&&r&&!r[ds]&&jp(r,ds,{configurable:!0,get:function(){return this}})},Mp=it,Up=TypeError,xr=function(e,r){if(Mp(r,e))return e;throw new Up("Incorrect invocation")},Bp=_,Dp=P,ps=N,Fp=Pr,Gp=je,Hp=Bn,gs=function(){},ys=Gp("Reflect","construct"),ea=/^\s*(?:class|function)\b/,zp=Bp(ea.exec),Wp=!ea.test(gs),_r=function(r){if(!ps(r))return!1;try{return ys(gs,[],r),!0}catch{return!1}},ms=function(r){if(!ps(r))return!1;switch(Fp(r)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return Wp||!!zp(ea,Hp(r))}catch{return!0}};ms.sham=!0;var Et=!ys||Dp(function(){var e;return _r(_r.call)||!_r(Object)||!_r(function(){e=!0})||e})?ms:_r,Kp=Et,qp=ot,Vp=TypeError,Yp=function(e){if(Kp(e))return e;throw new Vp(qp(e)+" is not a constructor")},bs=z,Xp=Yp,Jp=Ae,Qp=U,Zp=Qp("species"),eg=function(e,r){var t=bs(e).constructor,n;return t===void 0||Jp(n=bs(t)[Zp])?r:Xp(n)},rg=et,ws=Function.prototype,$s=ws.apply,Ss=ws.call,Es=typeof Reflect=="object"&&Reflect.apply||(rg?Ss.bind($s):function(){return Ss.apply($s,arguments)}),tg=Oe,ng=_,ag=function(e){if(tg(e)==="Function")return ng(e)},Os=ag,ig=Se,og=et,sg=Os(Os.bind),Ie=function(e,r){return ig(e),r===void 0?e:og?sg(e,r):function(){return e.apply(r,arguments)}},ug=je,Is=ug("document","documentElement"),cg=_,Lr=cg([].slice),lg=TypeError,ra=function(e,r){if(e<r)throw new lg("Not enough arguments");return e},vg=Or,Ts=/(?:ipad|iphone|ipod).*applewebkit/i.test(vg),J=j,fg=Es,dg=Ie,Ps=N,hg=Y,Rs=P,Cs=Is,pg=Lr,xs=nt,gg=ra,yg=Ts,mg=Qn,ta=J.setImmediate,na=J.clearImmediate,bg=J.process,aa=J.Dispatch,wg=J.Function,_s=J.MessageChannel,$g=J.String,ia=0,Ar={},Ls="onreadystatechange",jr,ke,oa,sa;Rs(function(){jr=J.location});var ua=function(e){if(hg(Ar,e)){var r=Ar[e];delete Ar[e],r()}},ca=function(e){return function(){ua(e)}},As=function(e){ua(e.data)},js=function(e){J.postMessage($g(e),jr.protocol+"//"+jr.host)};(!ta||!na)&&(ta=function(r){gg(arguments.length,1);var t=Ps(r)?r:wg(r),n=pg(arguments,1);return Ar[++ia]=function(){fg(t,void 0,n)},ke(ia),ia},na=function(r){delete Ar[r]},mg?ke=function(e){bg.nextTick(ca(e))}:aa&&aa.now?ke=function(e){aa.now(ca(e))}:_s&&!yg?(oa=new _s,sa=oa.port2,oa.port1.onmessage=As,ke=dg(sa.postMessage,sa)):J.addEventListener&&Ps(J.postMessage)&&!J.importScripts&&jr&&jr.protocol!=="file:"&&!Rs(js)?(ke=js,J.addEventListener("message",As,!1)):Ls in xs("script")?ke=function(e){Cs.appendChild(xs("script"))[Ls]=function(){Cs.removeChild(this),ua(e)}}:ke=function(e){setTimeout(ca(e),0)});var Ns={set:ta,clear:na},ks=j,Sg=G,Eg=Object.getOwnPropertyDescriptor,Ms=function(e){if(!Sg)return ks[e];var r=Eg(ks,e);return r&&r.value},Us=function(){this.head=null,this.tail=null};Us.prototype={add:function(e){var r={item:e,next:null},t=this.tail;t?t.next=r:this.head=r,this.tail=r},get:function(){var e=this.head;if(e){var r=this.head=e.next;return r===null&&(this.tail=null),e.item}}};var Bs=Us,Og=Or,Ig=/ipad|iphone|ipod/i.test(Og)&&typeof Pebble<"u",Tg=Or,Pg=/web0s(?!.*chrome)/i.test(Tg),Je=j,Rg=Ms,Ds=Ie,la=Ns.set,Cg=Bs,xg=Ts,_g=Ig,Lg=Pg,va=Qn,Fs=Je.MutationObserver||Je.WebKitMutationObserver,Gs=Je.document,Hs=Je.process,Ot=Je.Promise,fa=Rg("queueMicrotask"),Qe,da,ha,It,zs;if(!fa){var Tt=new Cg,Pt=function(){var e,r;for(va&&(e=Hs.domain)&&e.exit();r=Tt.get();)try{r()}catch(t){throw Tt.head&&Qe(),t}e&&e.enter()};!xg&&!va&&!Lg&&Fs&&Gs?(da=!0,ha=Gs.createTextNode(""),new Fs(Pt).observe(ha,{characterData:!0}),Qe=function(){ha.data=da=!da}):!_g&&Ot&&Ot.resolve?(It=Ot.resolve(void 0),It.constructor=Ot,zs=Ds(It.then,It),Qe=function(){zs(Pt)}):va?Qe=function(){Hs.nextTick(Pt)}:(la=Ds(la,Je),Qe=function(){la(Pt)}),fa=function(e){Tt.head||Qe(),Tt.add(e)}}var Ag=fa,jg=function(e,r){try{arguments.length===1?console.error(e):console.error(e,r)}catch{}},pa=function(e){try{return{error:!1,value:e()}}catch(r){return{error:!0,value:r}}},Ng=j,Rt=Ng.Promise,kg=j,Nr=Rt,Mg=N,Ug=Jn,Bg=Bn,Dg=U,Ws=ls,ga=tt;Nr&&Nr.prototype;var Fg=Dg("species"),ya=!1,Ks=Mg(kg.PromiseRejectionEvent),Gg=Ug("Promise",function(){var e=Bg(Nr),r=e!==String(Nr);if(!r&&ga===66)return!0;if(!ga||ga<51||!/native code/.test(e)){var t=new Nr(function(i){i(1)}),n=function(i){i(function(){},function(){})},a=t.constructor={};if(a[Fg]=n,ya=t.then(function(){})instanceof n,!ya)return!0}return!r&&(Ws==="BROWSER"||Ws==="DENO")&&!Ks}),kr={CONSTRUCTOR:Gg,REJECTION_EVENT:Ks,SUBCLASSING:ya},Ze={},qs=Se,Hg=TypeError,zg=function(e){var r,t;this.promise=new e(function(n,a){if(r!==void 0||t!==void 0)throw new Hg("Bad Promise constructor");r=n,t=a}),this.resolve=qs(r),this.reject=qs(t)};Ze.f=function(e){return new zg(e)};var Wg=D,Ct=Qn,Te=j,er=F,Vs=Z,Ys=Zn,Kg=Ne,qg=hs,Vg=Se,xt=N,Yg=H,Xg=xr,Jg=eg,Xs=Ns.set,ma=Ag,Qg=jg,Zg=pa,e0=Bs,Js=Ee,_t=Rt,ba=kr,Qs=Ze,Lt="Promise",Zs=ba.CONSTRUCTOR,r0=ba.REJECTION_EVENT,t0=ba.SUBCLASSING,wa=Js.getterFor(Lt),n0=Js.set,rr=_t&&_t.prototype,Me=_t,At=rr,eu=Te.TypeError,$a=Te.document,Sa=Te.process,Ea=Qs.f,a0=Ea,i0=!!($a&&$a.createEvent&&Te.dispatchEvent),ru="unhandledrejection",o0="rejectionhandled",tu=0,nu=1,s0=2,Oa=1,au=2,jt,iu,u0,ou,su=function(e){var r;return Yg(e)&&xt(r=e.then)?r:!1},uu=function(e,r){var t=r.value,n=r.state===nu,a=n?e.ok:e.fail,i=e.resolve,o=e.reject,s=e.domain,c,u,v;try{a?(n||(r.rejection===au&&l0(r),r.rejection=Oa),a===!0?c=t:(s&&s.enter(),c=a(t),s&&(s.exit(),v=!0)),c===e.promise?o(new eu("Promise-chain cycle")):(u=su(c))?er(u,c,i,o):i(c)):o(t)}catch(l){s&&!v&&s.exit(),o(l)}},cu=function(e,r){e.notified||(e.notified=!0,ma(function(){for(var t=e.reactions,n;n=t.get();)uu(n,e);e.notified=!1,r&&!e.rejection&&c0(e)}))},lu=function(e,r,t){var n,a;i0?(n=$a.createEvent("Event"),n.promise=r,n.reason=t,n.initEvent(e,!1,!0),Te.dispatchEvent(n)):n={promise:r,reason:t},!r0&&(a=Te["on"+e])?a(n):e===ru&&Qg("Unhandled promise rejection",t)},c0=function(e){er(Xs,Te,function(){var r=e.facade,t=e.value,n=vu(e),a;if(n&&(a=Zg(function(){Ct?Sa.emit("unhandledRejection",t,r):lu(ru,r,t)}),e.rejection=Ct||vu(e)?au:Oa,a.error))throw a.value})},vu=function(e){return e.rejection!==Oa&&!e.parent},l0=function(e){er(Xs,Te,function(){var r=e.facade;Ct?Sa.emit("rejectionHandled",r):lu(o0,r,e.value)})},tr=function(e,r,t){return function(n){e(r,n,t)}},nr=function(e,r,t){e.done||(e.done=!0,t&&(e=t),e.value=r,e.state=s0,cu(e,!0))},Ia=function(e,r,t){if(!e.done){e.done=!0,t&&(e=t);try{if(e.facade===r)throw new eu("Promise can't be resolved itself");var n=su(r);n?ma(function(){var a={done:!1};try{er(n,r,tr(Ia,a,e),tr(nr,a,e))}catch(i){nr(a,i,e)}}):(e.value=r,e.state=nu,cu(e,!1))}catch(a){nr({done:!1},a,e)}}};if(Zs&&(Me=function(r){Xg(this,At),Vg(r),er(jt,this);var t=wa(this);try{r(tr(Ia,t),tr(nr,t))}catch(n){nr(t,n)}},At=Me.prototype,jt=function(r){n0(this,{type:Lt,done:!1,notified:!1,parent:!1,reactions:new e0,rejection:!1,state:tu,value:void 0})},jt.prototype=Vs(At,"then",function(r,t){var n=wa(this),a=Ea(Jg(this,Me));return n.parent=!0,a.ok=xt(r)?r:!0,a.fail=xt(t)&&t,a.domain=Ct?Sa.domain:void 0,n.state===tu?n.reactions.add(a):ma(function(){uu(a,n)}),a.promise}),iu=function(){var e=new jt,r=wa(e);this.promise=e,this.resolve=tr(Ia,r),this.reject=tr(nr,r)},Qs.f=Ea=function(e){return e===Me||e===u0?new iu(e):a0(e)},xt(_t)&&rr!==Object.prototype)){ou=rr.then,t0||Vs(rr,"then",function(r,t){var n=this;return new Me(function(a,i){er(ou,n,a,i)}).then(r,t)},{unsafe:!0});try{delete rr.constructor}catch{}Ys&&Ys(rr,At)}Wg({global:!0,constructor:!0,wrap:!0,forced:Zs},{Promise:Me}),Kg(Me,Lt,!1),qg(Lt);var Mr={},v0=U,f0=Mr,d0=v0("iterator"),h0=Array.prototype,fu=function(e){return e!==void 0&&(f0.Array===e||h0[d0]===e)},p0=Pr,du=st,g0=Ae,y0=Mr,m0=U,b0=m0("iterator"),Nt=function(e){if(!g0(e))return du(e,b0)||du(e,"@@iterator")||y0[p0(e)]},w0=F,$0=Se,S0=z,E0=ot,O0=Nt,I0=TypeError,Ta=function(e,r){var t=arguments.length<2?O0(e):r;if($0(t))return S0(w0(t,e));throw new I0(E0(e)+" is not iterable")},T0=F,hu=z,P0=st,pu=function(e,r,t){var n,a;hu(e);try{if(n=P0(e,"return"),!n){if(r==="throw")throw t;return t}n=T0(n,e)}catch(i){a=!0,n=i}if(r==="throw")throw t;if(a)throw n;return hu(n),t},R0=Ie,C0=F,x0=z,_0=ot,L0=fu,A0=Xe,gu=it,j0=Ta,N0=Nt,yu=pu,k0=TypeError,kt=function(e,r){this.stopped=e,this.result=r},mu=kt.prototype,Mt=function(e,r,t){var n=t&&t.that,a=!!(t&&t.AS_ENTRIES),i=!!(t&&t.IS_RECORD),o=!!(t&&t.IS_ITERATOR),s=!!(t&&t.INTERRUPTED),c=R0(r,n),u,v,l,f,d,m,w,g=function($){return u&&yu(u,"normal",$),new kt(!0,$)},S=function($){return a?(x0($),s?c($[0],$[1],g):c($[0],$[1])):s?c($,g):c($)};if(i)u=e.iterator;else if(o)u=e;else{if(v=N0(e),!v)throw new k0(_0(e)+" is not iterable");if(L0(v)){for(l=0,f=A0(e);f>l;l++)if(d=S(e[l]),d&&gu(mu,d))return d;return new kt(!1)}u=j0(e,v)}for(m=i?e.next:u.next;!(w=C0(m,u)).done;){try{d=S(w.value)}catch($){yu(u,"throw",$)}if(typeof d=="object"&&d&&gu(mu,d))return d}return new kt(!1)},M0=U,bu=M0("iterator"),wu=!1;try{var U0=0,$u={next:function(){return{done:!!U0++}},return:function(){wu=!0}};$u[bu]=function(){return this},Array.from($u,function(){throw 2})}catch{}var Su=function(e,r){try{if(!r&&!wu)return!1}catch{return!1}var t=!1;try{var n={};n[bu]=function(){return{next:function(){return{done:t=!0}}}},e(n)}catch{}return t},B0=Rt,D0=Su,F0=kr.CONSTRUCTOR,Eu=F0||!D0(function(e){B0.all(e).then(void 0,function(){})}),G0=D,H0=F,z0=Se,W0=Ze,K0=pa,q0=Mt,V0=Eu;G0({target:"Promise",stat:!0,forced:V0},{all:function(r){var t=this,n=W0.f(t),a=n.resolve,i=n.reject,o=K0(function(){var s=z0(t.resolve),c=[],u=0,v=1;q0(r,function(l){var f=u++,d=!1;v++,H0(s,t,l).then(function(m){d||(d=!0,c[f]=m,--v||a(c))},i)}),--v||a(c)});return o.error&&i(o.value),n.promise}});var Y0=D,X0=kr.CONSTRUCTOR,Pa=Rt,J0=je,Q0=N,Z0=Z,Ou=Pa&&Pa.prototype;if(Y0({target:"Promise",proto:!0,forced:X0,real:!0},{catch:function(e){return this.then(void 0,e)}}),Q0(Pa)){var Iu=J0("Promise").prototype.catch;Ou.catch!==Iu&&Z0(Ou,"catch",Iu,{unsafe:!0})}var ey=D,ry=F,ty=Se,ny=Ze,ay=pa,iy=Mt,oy=Eu;ey({target:"Promise",stat:!0,forced:oy},{race:function(r){var t=this,n=ny.f(t),a=n.reject,i=ay(function(){var o=ty(t.resolve);iy(r,function(s){ry(o,t,s).then(n.resolve,a)})});return i.error&&a(i.value),n.promise}});var sy=D,uy=Ze,cy=kr.CONSTRUCTOR;sy({target:"Promise",stat:!0,forced:cy},{reject:function(r){var t=uy.f(this),n=t.reject;return n(r),t.promise}});var ly=z,vy=H,fy=Ze,dy=function(e,r){if(ly(e),vy(r)&&r.constructor===e)return r;var t=fy.f(e),n=t.resolve;return n(r),t.promise},hy=D,py=je,gy=kr.CONSTRUCTOR,yy=dy;py("Promise"),hy({target:"Promise",stat:!0,forced:gy},{resolve:function(r){return yy(this,r)}});var my=Pr,by=String,Pe=function(e){if(my(e)==="Symbol")throw new TypeError("Cannot convert a Symbol value to a string");return by(e)},Tu=`	
\v\f\r                　\u2028\u2029\uFEFF`,wy=_,$y=Ke,Sy=Pe,Ra=Tu,Pu=wy("".replace),Ey=RegExp("^["+Ra+"]+"),Oy=RegExp("(^|[^"+Ra+"])["+Ra+"]+$"),Ca=function(e){return function(r){var t=Sy($y(r));return e&1&&(t=Pu(t,Ey,"")),e&2&&(t=Pu(t,Oy,"$1")),t}},Iy={start:Ca(1),end:Ca(2),trim:Ca(3)},Ty=ct.PROPER,Py=P,Ru=Tu,Cu="​᠎",Ry=function(e){return Py(function(){return!!Ru[e]()||Cu[e]()!==Cu||Ty&&Ru[e].name!==e})},Cy=D,xy=Iy.trim,_y=Ry;Cy({target:"String",proto:!0,forced:_y("trim")},{trim:function(){return xy(this)}});var Ur={tdGatewayUs:"/tdgateway/us",tdGatewayEu:"/tdgateway/eu",tdGatewayCa:"/tdgateway/ca",tdGatewayUsFed:"/tdgateway/usfed",tdChatSdk:"/tdchatsdk",tdReporter:"/tdreporter",twilioUs1:"/tdsocketprovider/us1/v3/wsconnect",twilioIe1:"/tdsocketprovider/ie1/v3/wsconnect",twilioMcsUs1:"/tdmcsprovider/us1",twilioMcsIe1:"/tdmcsprovider/ie1",twilioMediaUs1:"/tdmediaprovider/us1",twilioMediaIe1:"/tdmediaprovider/ie1"},Ly=z,xu=function(){var e=Ly(this),r="";return e.hasIndices&&(r+="d"),e.global&&(r+="g"),e.ignoreCase&&(r+="i"),e.multiline&&(r+="m"),e.dotAll&&(r+="s"),e.unicode&&(r+="u"),e.unicodeSets&&(r+="v"),e.sticky&&(r+="y"),r},xa=P,Ay=j,_a=Ay.RegExp,La=xa(function(){var e=_a("a","y");return e.lastIndex=2,e.exec("abcd")!==null}),jy=La||xa(function(){return!_a("a","y").sticky}),Ny=La||xa(function(){var e=_a("^r","gy");return e.lastIndex=2,e.exec("str")!==null}),ky={BROKEN_CARET:Ny,MISSED_STICKY:jy,UNSUPPORTED_Y:La},_u={},My=us,Uy=Yn,Ut=Object.keys||function(r){return My(r,Uy)},By=G,Dy=Bo,Fy=ce,Gy=z,Hy=ge,zy=Ut;_u.f=By&&!Dy?Object.defineProperties:function(r,t){Gy(r);for(var n=Hy(t),a=zy(t),i=a.length,o=0,s;i>o;)Fy.f(r,s=a[o++],n[s]);return r};var Wy=z,Ky=_u,Lu=Yn,qy=lt,Vy=Is,Yy=nt,Xy=Dn,Au=">",ju="<",Aa="prototype",ja="script",Nu=Xy("IE_PROTO"),Na=function(){},ku=function(e){return ju+ja+Au+e+ju+"/"+ja+Au},Mu=function(e){e.write(ku("")),e.close();var r=e.parentWindow.Object;return e=null,r},Jy=function(){var e=Yy("iframe"),r="java"+ja+":",t;return e.style.display="none",Vy.appendChild(e),e.src=String(r),t=e.contentWindow.document,t.open(),t.write(ku("document.F=Object")),t.close(),t.F},Bt,Dt=function(){try{Bt=new ActiveXObject("htmlfile")}catch{}Dt=typeof document<"u"?document.domain&&Bt?Mu(Bt):Jy():Mu(Bt);for(var e=Lu.length;e--;)delete Dt[Aa][Lu[e]];return Dt()};qy[Nu]=!0;var Br=Object.create||function(r,t){var n;return r!==null?(Na[Aa]=Wy(r),n=new Na,Na[Aa]=null,n[Nu]=r):n=Dt(),t===void 0?n:Ky.f(n,t)},Qy=P,Zy=j,em=Zy.RegExp,rm=Qy(function(){var e=em(".","s");return!(e.dotAll&&e.test(`
`)&&e.flags==="s")}),tm=P,nm=j,am=nm.RegExp,im=tm(function(){var e=am("(?<a>b)","g");return e.exec("b").groups.a!=="b"||"b".replace(e,"$<a>c")!=="bc"}),ar=F,Ft=_,om=Pe,sm=xu,um=ky,cm=wn,lm=Br,vm=Ee.get,fm=rm,dm=im,hm=cm("native-string-replace",String.prototype.replace),Gt=RegExp.prototype.exec,ka=Gt,pm=Ft("".charAt),gm=Ft("".indexOf),ym=Ft("".replace),Ma=Ft("".slice),Ua=function(){var e=/a/,r=/b*/g;return ar(Gt,e,"a"),ar(Gt,r,"a"),e.lastIndex!==0||r.lastIndex!==0}(),Uu=um.BROKEN_CARET,Ba=/()??/.exec("")[1]!==void 0,mm=Ua||Ba||Uu||fm||dm;mm&&(ka=function(r){var t=this,n=vm(t),a=om(r),i=n.raw,o,s,c,u,v,l,f;if(i)return i.lastIndex=t.lastIndex,o=ar(ka,i,a),t.lastIndex=i.lastIndex,o;var d=n.groups,m=Uu&&t.sticky,w=ar(sm,t),g=t.source,S=0,$=a;if(m&&(w=ym(w,"y",""),gm(w,"g")===-1&&(w+="g"),$=Ma(a,t.lastIndex),t.lastIndex>0&&(!t.multiline||t.multiline&&pm(a,t.lastIndex-1)!==`
`)&&(g="(?: "+g+")",$=" "+$,S++),s=new RegExp("^(?:"+g+")",w)),Ba&&(s=new RegExp("^"+g+"$(?!\\s)",w)),Ua&&(c=t.lastIndex),u=ar(Gt,m?s:t,$),m?u?(u.input=Ma(u.input,S),u[0]=Ma(u[0],S),u.index=t.lastIndex,t.lastIndex+=u[0].length):t.lastIndex=0:Ua&&u&&(t.lastIndex=t.global?u.index+u[0].length:c),Ba&&u&&u.length>1&&ar(hm,u[0],s,function(){for(v=1;v<arguments.length-2;v++)arguments[v]===void 0&&(u[v]=void 0)}),u&&d)for(u.groups=l=lm(null),v=0;v<d.length;v++)f=d[v],l[f[0]]=u[f[1]];return u});var Da=ka,bm=D,Bu=Da;bm({target:"RegExp",proto:!0,forced:/./.exec!==Bu},{exec:Bu});function wm(e,r){return!e||!r?!1:e.contains?e.contains(r):e.childNodes?Array.prototype.indexOf.call(e.childNodes,r)!==-1:!1}var $m=P,Du=function(e,r){var t=[][e];return!!t&&$m(function(){t.call(null,r||function(){return 1},1)})},Sm=D,Em=_,Om=yt,Im=ge,Tm=Du,Pm=Em([].join),Rm=Om!==Object,Cm=Rm||!Tm("join",",");Sm({target:"Array",proto:!0,forced:Cm},{join:function(r){return Pm(Im(this),r===void 0?",":r)}});var xm=Oe,Fa=Array.isArray||function(r){return xm(r)==="Array"},Fu=Fa,_m=Et,Lm=H,Am=U,jm=Am("species"),Gu=Array,Nm=function(e){var r;return Fu(e)&&(r=e.constructor,_m(r)&&(r===Gu||Fu(r.prototype))?r=void 0:Lm(r)&&(r=r[jm],r===null&&(r=void 0))),r===void 0?Gu:r},km=Nm,Hu=function(e,r){return new(km(e))(r===0?0:r)},Mm=Ie,Um=_,Bm=yt,Dm=$e,Fm=Xe,Gm=Hu,zu=Um([].push),Re=function(e){var r=e===1,t=e===2,n=e===3,a=e===4,i=e===6,o=e===7,s=e===5||i;return function(c,u,v,l){for(var f=Dm(c),d=Bm(f),m=Fm(d),w=Mm(u,v),g=0,S=l||Gm,$=r?S(c,m):t||o?S(c,0):void 0,I,L;m>g;g++)if((s||g in d)&&(I=d[g],L=w(I,g,f),e))if(r)$[g]=L;else if(L)switch(e){case 3:return!0;case 5:return I;case 6:return g;case 2:zu($,I)}else switch(e){case 4:return!1;case 7:zu($,I)}return i?-1:n||a?a:$}},Ga={forEach:Re(0),map:Re(1),filter:Re(2),some:Re(3),every:Re(4),find:Re(5),findIndex:Re(6),filterReject:Re(7)},Hm=P,zm=U,Wm=tt,Km=zm("species"),Ht=function(e){return Wm>=51||!Hm(function(){var r=[],t=r.constructor={};return t[Km]=function(){return{foo:1}},r[e](Boolean).foo!==1})},qm=D,Vm=Ga.map,Ym=Ht,Xm=Ym("map");qm({target:"Array",proto:!0,forced:!Xm},{map:function(r){return Vm(this,r,arguments.length>1?arguments[1]:void 0)}});var Jm=D,Qm=$e,Wu=Ut,Zm=P,e1=Zm(function(){Wu(1)});Jm({target:"Object",stat:!0,forced:e1},{keys:function(r){return Wu(Qm(r))}});function r1(e){var r=e.charCodeAt(0);return r>=65&&r<=90}function Ku(e){var r=Uv(e).map(function(t,n){return r1(t)?n===0?t.toLowerCase():"-"+t.toLowerCase():t}).join("");return"--".concat(r)}function t1(e,r){var t=Object.keys(r);return t.length?t.reduce(function(n,a){return a.indexOf("-")>-1||a.indexOf("_")>-1?n:(e.style.setProperty(Ku(a),r[a]),M(M({},n),{},A({},Ku(a),r[a])))},{}):{}}function qu(e,r){var t;if(typeof e=="string"?t=e.indexOf("#")>-1?document.querySelector(e):document.getElementById(e):t=e,t)return t1(t,r)}function n1(e){var r=document.createElement("style");return r.id=e,r}function Ha(e,r){return r.querySelector("#".concat(e))}function a1(e,r){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:document.head,n=Ha(r,t);if(n)return n.innerHTML=e,function(){var i=Ha(r,t);i&&t.removeChild(i)};var a=n1(r);return a.innerHTML=e,t.appendChild(a),function(){var i=Ha(r,t);i&&t.removeChild(i)}}function i1(e,r,t){try{return JSON.parse(e)}catch{return r}}var o1=function(){function e(r){var t=this,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};br(this,e),A(this,"_moving",!1),A(this,"_moved",!1),A(this,"_initialXY",[0,0]),A(this,"_startXY",[0,0]),A(this,"_boundaryValue",5),A(this,"_rb",null),A(this,"_isPC",!0),this.current=r,this.options=n,this.onMoveStart=this.onMoveStart.bind(this),this.onMoving=this.onMoving.bind(this),this.onMoveEnd=this.onMoveEnd.bind(this),this.removeDocumentListeners=this.removeDocumentListeners.bind(this),this.current.addEventListener("mousedown",this.onMoveStart),this.current.addEventListener("touchstart",this.onMoveStart),this._rb=new ResizeObserver(function(){t.reset()}),this._rb.observe(document.body)}return wr(e,[{key:"getEventInfo",value:function(t){return t.touches?(this._isPC=!1,{clientXY:[t.touches[0].clientX,t.touches[0].clientY]}):(this._isPC=!0,{clientXY:[t.clientX,t.clientY]})}},{key:"onMoveStart",value:function(t){t.stopPropagation(),t.preventDefault(),this._initialXY=[this.current.offsetLeft,this.current.offsetTop],this._startXY=this.getEventInfo(t).clientXY,this._moved=!1,this.addDocumentListeners()}},{key:"onMoving",value:function(t){var n,a;t.stopPropagation(),t.preventDefault();var i=this.getEventInfo(t),o=i.clientXY,s=gn(o,2),c=s[0],u=s[1],v=c-this._startXY[0],l=u-this._startXY[1];Math.abs(v)<this._boundaryValue&&Math.abs(l)<this._boundaryValue||(this._moved||(this._moved=!0),this._moving=!0,this.current.style.left=Math.min(Math.max(0,this._initialXY[0]+v),window.innerWidth-this.current.offsetWidth)+"px",this.current.style.top=Math.min(Math.max(0,this._initialXY[1]+l),window.innerHeight-this.current.offsetHeight)+"px",(n=this.options)===null||n===void 0||(a=n.onChange)===null||a===void 0||a.call(n,"moving"))}},{key:"onMoveEnd",value:function(t){if(t.stopPropagation(),t.preventDefault(),this._moving){var n,a;(n=this.options)===null||n===void 0||(a=n.onChange)===null||a===void 0||a.call(n,"moveEnded")}if(!this._moved){var i,o;(i=this.options)===null||i===void 0||(o=i.onClick)===null||o===void 0||o.call(i)}this._moved=!1,this.removeDocumentListeners()}},{key:"addDocumentListeners",value:function(){document.addEventListener("mousemove",this.onMoving,{passive:!1}),document.addEventListener("mouseup",this.onMoveEnd,{passive:!1}),this.current.addEventListener("touchmove",this.onMoving,{passive:!1}),this.current.addEventListener("touchend",this.onMoveEnd,{passive:!1})}},{key:"removeDocumentListeners",value:function(){document.removeEventListener("mousemove",this.onMoving),document.removeEventListener("mouseup",this.onMoveEnd),this.current.removeEventListener("touchmove",this.onMoveEnd),this.current.removeEventListener("touchend",this.onMoveEnd)}},{key:"reset",value:function(){this._isPC&&(this.current.style.top="",this.current.style.left="")}},{key:"destroy",value:function(){var t;this.current.removeEventListener("mousedown",this.onMoveStart),this.current.removeEventListener("touchstart",this.onMoveStart),this.removeDocumentListeners(),(t=this._rb)===null||t===void 0||t.disconnect(),this._rb=null}}])}(),Vu={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},s1=nt,za=s1("span").classList,Yu=za&&za.constructor&&za.constructor.prototype,Xu=Yu===Object.prototype?void 0:Yu,u1=Ga.forEach,c1=Du,l1=c1("forEach"),v1=l1?[].forEach:function(r){return u1(this,r,arguments.length>1?arguments[1]:void 0)},Ju=j,Qu=Vu,f1=Xu,Wa=v1,d1=Ve,Zu=function(e){if(e&&e.forEach!==Wa)try{d1(e,"forEach",Wa)}catch{e.forEach=Wa}};for(var Ka in Qu)Qu[Ka]&&Zu(Ju[Ka]&&Ju[Ka].prototype);Zu(f1);function h1(e,r){var t=M({},e);return Object.keys(t).forEach(function(n){(e[n]===void 0||e[n]===null)&&delete t[n],r!=null&&r.removeEmptyString&&e[n]===""&&delete t[n]}),t}function p1(e){return new Promise(function(r){e<=0?r(!0):setTimeout(function(){return r(!0)},e)})}function g1(e){return Math.min(2e3*e,3e4)}function y1(e){return qa.apply(this,arguments)}function qa(){return qa=V(R().mark(function e(r){var t,n,a,i,o,s,c,u,v=arguments;return R().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:if(t=v.length>1&&v[1]!==void 0?v[1]:{},n=t.defaultRetry,a=n===void 0?5:n,i=t.retryDelay,o=i===void 0?g1:i,s=t.onError,!(a<=0)){f.next=6;break}return f.next=5,r();case 5:return f.abrupt("return",f.sent);case 6:return c=0,u=function(){var d=V(R().mark(function m(){return R().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.prev=0,g.next=3,r();case 3:return g.abrupt("return",g.sent);case 6:if(g.prev=6,g.t0=g.catch(0),s==null||s(g.t0,c),c!==a){g.next=11;break}throw g.t0;case 11:return c+=1,g.next=14,p1(typeof o=="function"?o(c):o);case 14:return g.next=16,u();case 16:return g.abrupt("return",g.sent);case 17:case"end":return g.stop()}},m,null,[[0,6]])}));return function(){return d.apply(this,arguments)}}(),f.abrupt("return",u());case 9:case"end":return f.stop()}},e)})),qa.apply(this,arguments)}var X={Topic:"WidgetCommunication",Methods:{Maximize:"Maximize",Minimize:"Minimize",GetAllConfig:"GetAllConfig",GetCredentials:"GetCredentials",GetTdAccessToken:"GetTdAccessToken",SetBadge:"SetBadge",FrameOpened:"FrameOpened",DownloadTranscript:"DownloadTranscript",UpdatePreviewConfig:"UpdatePreviewConfig",PreviewReady:"PreviewReady",ConversationStart:"ConversationStart",FrameReady:"FrameReady",FrameResize:"FrameResize",UpdateAppConfigs:"UpdateAppConfigs",UpdateContext:"UpdateContext"}},Va={exports:{}},ir=typeof Reflect=="object"?Reflect:null,ec=ir&&typeof ir.apply=="function"?ir.apply:function(r,t,n){return Function.prototype.apply.call(r,t,n)},zt;ir&&typeof ir.ownKeys=="function"?zt=ir.ownKeys:Object.getOwnPropertySymbols?zt=function(r){return Object.getOwnPropertyNames(r).concat(Object.getOwnPropertySymbols(r))}:zt=function(r){return Object.getOwnPropertyNames(r)};function m1(e){console&&console.warn&&console.warn(e)}var rc=Number.isNaN||function(r){return r!==r};function x(){x.init.call(this)}Va.exports=x,Va.exports.once=S1,x.EventEmitter=x,x.prototype._events=void 0,x.prototype._eventsCount=0,x.prototype._maxListeners=void 0;var tc=10;function Wt(e){if(typeof e!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}Object.defineProperty(x,"defaultMaxListeners",{enumerable:!0,get:function(){return tc},set:function(e){if(typeof e!="number"||e<0||rc(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");tc=e}}),x.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},x.prototype.setMaxListeners=function(r){if(typeof r!="number"||r<0||rc(r))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+r+".");return this._maxListeners=r,this};function nc(e){return e._maxListeners===void 0?x.defaultMaxListeners:e._maxListeners}x.prototype.getMaxListeners=function(){return nc(this)},x.prototype.emit=function(r){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var a=r==="error",i=this._events;if(i!==void 0)a=a&&i.error===void 0;else if(!a)return!1;if(a){var o;if(t.length>0&&(o=t[0]),o instanceof Error)throw o;var s=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw s.context=o,s}var c=i[r];if(c===void 0)return!1;if(typeof c=="function")ec(c,this,t);else for(var u=c.length,v=uc(c,u),n=0;n<u;++n)ec(v[n],this,t);return!0};function ac(e,r,t,n){var a,i,o;if(Wt(t),i=e._events,i===void 0?(i=e._events=Object.create(null),e._eventsCount=0):(i.newListener!==void 0&&(e.emit("newListener",r,t.listener?t.listener:t),i=e._events),o=i[r]),o===void 0)o=i[r]=t,++e._eventsCount;else if(typeof o=="function"?o=i[r]=n?[t,o]:[o,t]:n?o.unshift(t):o.push(t),a=nc(e),a>0&&o.length>a&&!o.warned){o.warned=!0;var s=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(r)+" listeners added. Use emitter.setMaxListeners() to increase limit");s.name="MaxListenersExceededWarning",s.emitter=e,s.type=r,s.count=o.length,m1(s)}return e}x.prototype.addListener=function(r,t){return ac(this,r,t,!1)},x.prototype.on=x.prototype.addListener,x.prototype.prependListener=function(r,t){return ac(this,r,t,!0)};function b1(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function ic(e,r,t){var n={fired:!1,wrapFn:void 0,target:e,type:r,listener:t},a=b1.bind(n);return a.listener=t,n.wrapFn=a,a}x.prototype.once=function(r,t){return Wt(t),this.on(r,ic(this,r,t)),this},x.prototype.prependOnceListener=function(r,t){return Wt(t),this.prependListener(r,ic(this,r,t)),this},x.prototype.removeListener=function(r,t){var n,a,i,o,s;if(Wt(t),a=this._events,a===void 0)return this;if(n=a[r],n===void 0)return this;if(n===t||n.listener===t)--this._eventsCount===0?this._events=Object.create(null):(delete a[r],a.removeListener&&this.emit("removeListener",r,n.listener||t));else if(typeof n!="function"){for(i=-1,o=n.length-1;o>=0;o--)if(n[o]===t||n[o].listener===t){s=n[o].listener,i=o;break}if(i<0)return this;i===0?n.shift():w1(n,i),n.length===1&&(a[r]=n[0]),a.removeListener!==void 0&&this.emit("removeListener",r,s||t)}return this},x.prototype.off=x.prototype.removeListener,x.prototype.removeAllListeners=function(r){var t,n,a;if(n=this._events,n===void 0)return this;if(n.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):n[r]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete n[r]),this;if(arguments.length===0){var i=Object.keys(n),o;for(a=0;a<i.length;++a)o=i[a],o!=="removeListener"&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(t=n[r],typeof t=="function")this.removeListener(r,t);else if(t!==void 0)for(a=t.length-1;a>=0;a--)this.removeListener(r,t[a]);return this};function oc(e,r,t){var n=e._events;if(n===void 0)return[];var a=n[r];return a===void 0?[]:typeof a=="function"?t?[a.listener||a]:[a]:t?$1(a):uc(a,a.length)}x.prototype.listeners=function(r){return oc(this,r,!0)},x.prototype.rawListeners=function(r){return oc(this,r,!1)},x.listenerCount=function(e,r){return typeof e.listenerCount=="function"?e.listenerCount(r):sc.call(e,r)},x.prototype.listenerCount=sc;function sc(e){var r=this._events;if(r!==void 0){var t=r[e];if(typeof t=="function")return 1;if(t!==void 0)return t.length}return 0}x.prototype.eventNames=function(){return this._eventsCount>0?zt(this._events):[]};function uc(e,r){for(var t=new Array(r),n=0;n<r;++n)t[n]=e[n];return t}function w1(e,r){for(;r+1<e.length;r++)e[r]=e[r+1];e.pop()}function $1(e){for(var r=new Array(e.length),t=0;t<r.length;++t)r[t]=e[t].listener||e[t];return r}function S1(e,r){return new Promise(function(t,n){function a(o){e.removeListener(r,i),n(o)}function i(){typeof e.removeListener=="function"&&e.removeListener("error",a),t([].slice.call(arguments))}cc(e,r,i,{once:!0}),r!=="error"&&E1(e,a,{once:!0})})}function E1(e,r,t){typeof e.on=="function"&&cc(e,"error",r,t)}function cc(e,r,t,n){if(typeof e.on=="function")n.once?e.once(r,t):e.on(r,t);else if(typeof e.addEventListener=="function")e.addEventListener(r,function a(i){n.once&&e.removeEventListener(r,a),t(i)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e)}var O1=Va.exports;const I1=Dv(O1);var Kt=function(){return Kt=Object.assign||function(r){for(var t,n=1,a=arguments.length;n<a;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i])}return r},Kt.apply(this,arguments)};function lc(e,r,t,n){function a(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function s(v){try{u(n.next(v))}catch(l){o(l)}}function c(v){try{u(n.throw(v))}catch(l){o(l)}}function u(v){v.done?i(v.value):a(v.value).then(s,c)}u((n=n.apply(e,[])).next())})}function vc(e,r){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,a,i,o;return o={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function s(u){return function(v){return c([u,v])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,u[0]&&(t=0)),t;)try{if(n=1,a&&(i=u[0]&2?a.return:u[0]?a.throw||((i=a.return)&&i.call(a),0):a.next)&&!(i=i.call(a,u[1])).done)return i;switch(a=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,a=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){t.label=u[1];break}if(u[0]===6&&t.label<i[1]){t.label=i[1],i=u;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(u);break}i[2]&&t.ops.pop(),t.trys.pop();continue}u=r.call(e,t)}catch(v){u=[6,v],a=0}finally{n=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}typeof SuppressedError=="function"&&SuppressedError;var T1=function(){function e(r){this.options=r,this._traceId=0,this._methods=new Map,this._emitter=new I1,this._handlerOnMessageByBound=this.handlerOnMessage.bind(this),this.createService(),this.getListener().addEventListener("message",this._handlerOnMessageByBound,!1)}return e.jsonParseData=function(r,t){try{return JSON.parse(r)}catch{return t}},e.jsonStringifyData=function(r){try{return JSON.stringify(r)}catch{return""}},e.runHandler=function(r){return lc(this,void 0,void 0,function(){var t,n;return vc(this,function(a){switch(a.label){case 0:return a.trys.push([0,2,,3]),[4,r()];case 1:return t=a.sent(),[2,{data:t,error:null}];case 2:return n=a.sent(),[2,{error:typeof n=="string"?n:n.message}];case 3:return[2]}})})},e.prototype.destroy=function(){this._emitter.removeAllListeners(),this._methods.clear(),this.getListener().removeEventListener("message",this._handlerOnMessageByBound,!1)},e.prototype.register=function(r,t){this._methods.set(r,t),this.log("Register ".concat(r),this._methods)},e.prototype.unregister=function(r){this._methods.delete(r),this.log("Unregister ".concat(r),this._methods)},e.prototype.trigger=function(r){for(var t=this,n=[],a=1;a<arguments.length;a++)n[a-1]=arguments[a];return new Promise(function(i){var o=t.createId();t.sendMessage({id:o,method:r,payload:n,type:"request"}),t.log("Trigger ".concat(r," | ").concat(o),n),t._emitter.once("response_".concat(o),function(s){i(s.payload),t.log("Receive ".concat(r," | ").concat(o),e.jsonStringifyData(s))})})},e.prototype.createId=function(){return"".concat(this.options.name,"_").concat(this._traceId++)},e.prototype.createService=function(){var r=this;this._emitter.on(this.options.topic,function(t){return lc(r,void 0,void 0,function(){var n,a,i,o,s;return vc(this,function(c){switch(c.label){case 0:return n=t.id,a=t.payload,i=t.method,o=this._methods.get(i),o?[4,e.runHandler(function(){return o.apply(void 0,a)})]:[3,2];case 1:return s=c.sent(),this.sendMessage({id:n,method:i,payload:s,type:"response"}),[3,3];case 2:this.sendMessage({id:n,method:i,payload:{error:"No found method in service"},type:"response"}),c.label=3;case 3:return[2]}})})})},e.prototype.sendMessage=function(r){var t=this.options,n=t.sender,a=t.origin,i=t.topic,o=e.jsonStringifyData(Kt(Kt({},r),{topic:i}));if(!n.postMessage)throw new Error("The sender no found postMessage method please check the sender option");o&&n.postMessage(o,a||"*")},e.prototype.handlerOnMessage=function(r){var t=r.data;if(t){var n=e.jsonParseData(t,null);if(!(!n||n.topic!==this.options.topic)){var a=n.id,i=n.type;i==="request"&&this._emitter.emit(this.options.topic,n),i==="response"&&this._emitter.emit("response_".concat(a),n)}}},e.prototype.getListener=function(){return this.options.listener||window},e.prototype.log=function(r){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var a=this.options,i=a.debug,o=a.name;if(i){var s=new Date().toISOString(),c="[RPC] [".concat(s,"] [").concat(o,"] ").concat(r);console.groupCollapsed(c),t!=null&&t.length&&console.info.apply(console,t),console.groupEnd()}},Object.defineProperty(e.prototype,"methods",{get:function(){return this._methods},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"emitter",{get:function(){return this._emitter},enumerable:!1,configurable:!0}),e}(),P1=TypeError,R1=9007199254740991,C1=function(e){if(e>R1)throw P1("Maximum allowed index exceeded");return e},x1=G,_1=ce,L1=Ir,Ya=function(e,r,t){x1?_1.f(e,r,L1(0,t)):e[r]=t},A1=D,j1=P,N1=Fa,k1=H,M1=$e,U1=Xe,fc=C1,dc=Ya,B1=Hu,D1=Ht,F1=U,G1=tt,hc=F1("isConcatSpreadable"),H1=G1>=51||!j1(function(){var e=[];return e[hc]=!1,e.concat()[0]!==e}),z1=function(e){if(!k1(e))return!1;var r=e[hc];return r!==void 0?!!r:N1(e)},W1=!H1||!D1("concat");A1({target:"Array",proto:!0,arity:1,forced:W1},{concat:function(r){var t=M1(this),n=B1(t,0),a=0,i,o,s,c,u;for(i=-1,s=arguments.length;i<s;i++)if(u=i===-1?t:arguments[i],z1(u))for(c=U1(u),fc(a+c),o=0;o<c;o++,a++)o in u&&dc(n,a,u[o]);else fc(a+1),dc(n,a++,u);return n.length=a,n}});var K1=D,pc=Fa,q1=Et,V1=H,gc=as,Y1=Xe,X1=ge,J1=Ya,Q1=U,Z1=Ht,eb=Lr,rb=Z1("slice"),tb=Q1("species"),Xa=Array,nb=Math.max;K1({target:"Array",proto:!0,forced:!rb},{slice:function(r,t){var n=X1(this),a=Y1(n),i=gc(r,a),o=gc(t===void 0?a:t,a),s,c,u;if(pc(n)&&(s=n.constructor,q1(s)&&(s===Xa||pc(s.prototype))?s=void 0:V1(s)&&(s=s[tb],s===null&&(s=void 0)),s===Xa||s===void 0))return eb(n,i,o);for(c=new(s===void 0?Xa:s)(nb(o-i,0)),u=0;i<o;i++,u++)i in n&&J1(c,u,n[i]);return c.length=u,c}});var ab=P,ib=!ab(function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype}),ob=Y,sb=N,ub=$e,cb=Dn,lb=ib,yc=cb("IE_PROTO"),Ja=Object,vb=Ja.prototype,Qa=lb?Ja.getPrototypeOf:function(e){var r=ub(e);if(ob(r,yc))return r[yc];var t=r.constructor;return sb(t)&&r instanceof t?t.prototype:r instanceof Ja?vb:null},mc=G,fb=P,bc=_,db=Qa,hb=Ut,pb=ge,gb=gt.f,wc=bc(gb),yb=bc([].push),mb=mc&&fb(function(){var e=Object.create(null);return e[2]=2,!wc(e,2)}),$c=function(e){return function(r){for(var t=pb(r),n=hb(t),a=mb&&db(t)===null,i=n.length,o=0,s=[],c;i>o;)c=n[o++],(!mc||(a?c in t:wc(t,c)))&&yb(s,e?[c,t[c]]:t[c]);return s}},bb={entries:$c(!0),values:$c(!1)},wb=D,$b=bb.entries;wb({target:"Object",stat:!0},{entries:function(r){return $b(r)}});var Sc=F,Ec=Z,Sb=Da,Oc=P,Ic=U,Eb=Ve,Ob=Ic("species"),Za=RegExp.prototype,Ib=function(e,r,t,n){var a=Ic(e),i=!Oc(function(){var u={};return u[a]=function(){return 7},""[e](u)!==7}),o=i&&!Oc(function(){var u=!1,v=/a/;return e==="split"&&(v={},v.constructor={},v.constructor[Ob]=function(){return v},v.flags="",v[a]=/./[a]),v.exec=function(){return u=!0,null},v[a](""),!u});if(!i||!o||t){var s=/./[a],c=r(a,""[e],function(u,v,l,f,d){var m=v.exec;return m===Sb||m===Za.exec?i&&!d?{done:!0,value:Sc(s,v,l,f)}:{done:!0,value:Sc(u,l,v,f)}:{done:!1}});Ec(String.prototype,e,c[0]),Ec(Za,a,c[1])}n&&Eb(Za[a],"sham",!0)},ei=_,Tb=bt,Pb=Pe,Rb=Ke,Cb=ei("".charAt),Tc=ei("".charCodeAt),xb=ei("".slice),Pc=function(e){return function(r,t){var n=Pb(Rb(r)),a=Tb(t),i=n.length,o,s;return a<0||a>=i?e?"":void 0:(o=Tc(n,a),o<55296||o>56319||a+1===i||(s=Tc(n,a+1))<56320||s>57343?e?Cb(n,a):o:e?xb(n,a,a+2):(o-55296<<10)+(s-56320)+65536)}},ri={codeAt:Pc(!1),charAt:Pc(!0)},_b=ri.charAt,Lb=function(e,r,t){return r+(t?_b(e,r).length:1)},ti=_,Ab=$e,jb=Math.floor,ni=ti("".charAt),Nb=ti("".replace),ai=ti("".slice),kb=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,Mb=/\$([$&'`]|\d{1,2})/g,Ub=function(e,r,t,n,a,i){var o=t+e.length,s=n.length,c=Mb;return a!==void 0&&(a=Ab(a),c=kb),Nb(i,c,function(u,v){var l;switch(ni(v,0)){case"$":return"$";case"&":return e;case"`":return ai(r,0,t);case"'":return ai(r,o);case"<":l=a[ai(v,1,-1)];break;default:var f=+v;if(f===0)return u;if(f>s){var d=jb(f/10);return d===0?u:d<=s?n[d-1]===void 0?ni(v,1):n[d-1]+ni(v,1):u}l=n[f-1]}return l===void 0?"":l})},Rc=F,Bb=z,Db=N,Fb=Oe,Gb=Da,Hb=TypeError,zb=function(e,r){var t=e.exec;if(Db(t)){var n=Rc(t,e,r);return n!==null&&Bb(n),n}if(Fb(e)==="RegExp")return Rc(Gb,e,r);throw new Hb("RegExp#exec called on incompatible receiver")},Wb=Es,Cc=F,qt=_,Kb=Ib,qb=P,Vb=z,Yb=N,Xb=Ae,Jb=bt,Qb=is,or=Pe,Zb=Ke,ew=Lb,rw=st,tw=Ub,nw=zb,aw=U,ii=aw("replace"),iw=Math.max,ow=Math.min,sw=qt([].concat),oi=qt([].push),xc=qt("".indexOf),_c=qt("".slice),uw=function(e){return e===void 0?e:String(e)},cw=function(){return"a".replace(/./,"$0")==="$0"}(),Lc=function(){return/./[ii]?/./[ii]("a","$0")==="":!1}(),lw=!qb(function(){var e=/./;return e.exec=function(){var r=[];return r.groups={a:"7"},r},"".replace(e,"$<a>")!=="7"});Kb("replace",function(e,r,t){var n=Lc?"$":"$0";return[function(i,o){var s=Zb(this),c=Xb(i)?void 0:rw(i,ii);return c?Cc(c,i,s,o):Cc(r,or(s),i,o)},function(a,i){var o=Vb(this),s=or(a);if(typeof i=="string"&&xc(i,n)===-1&&xc(i,"$<")===-1){var c=t(r,o,s,i);if(c.done)return c.value}var u=Yb(i);u||(i=or(i));var v=o.global,l;v&&(l=o.unicode,o.lastIndex=0);for(var f=[],d;d=nw(o,s),!(d===null||(oi(f,d),!v));){var m=or(d[0]);m===""&&(o.lastIndex=ew(s,Qb(o.lastIndex),l))}for(var w="",g=0,S=0;S<f.length;S++){d=f[S];for(var $=or(d[0]),I=iw(ow(Jb(d.index),s.length),0),L=[],fe,B=1;B<d.length;B++)oi(L,uw(d[B]));var O=d.groups;if(u){var k=sw([$],L,I,s);O!==void 0&&oi(k,O),fe=or(Wb(i,void 0,k))}else fe=tw($,s,I,L,O,i);I>=g&&(w+=_c(s,g,I)+fe,g=I+$.length)}return w+_c(s,g)}]},!lw||!cw||Lc);var vw=function(){function e(){br(this,e),A(this,"appConfig",{}),A(this,"touchpoint",null),A(this,"appProps",null),A(this,"context",{}),A(this,"participantName","")}return wr(e,[{key:"setAppConfig",value:function(t){var n,a=(t==null?void 0:t.styles)||{};return this.appConfig=M(M(M({},this.appConfig),t),{},{styles:Object.keys(a).length?M(M({},(n=this.appConfig)===null||n===void 0?void 0:n.styles),a):{}}),this.appConfig}},{key:"setTouchpoint",value:function(t){this.touchpoint=t}},{key:"setParticipantName",value:function(t){this.participantName=t}},{key:"setAppProps",value:function(t){this.appProps=t}},{key:"getAllConfig",value:function(){return{appConfig:this.appConfig,touchpoint:this.touchpoint,context:this.context,appProps:this.appProps,participantName:this.participantName,injectorWindowHref:window.location.href,injectorWindowHostname:window.location.hostname}}},{key:"setContextParam",value:function(t){this.context=t}},{key:"clearAll",value:function(){this.appConfig={},this.touchpoint=null,this.context={},this.participantName=""}}])}();const Ce=new vw;var fw=A(A(A(A({},"td-us-1","https://api.talkdeskstg.com"),"td-eu-1","undefined"),"td-ca-1","undefined"),"td-usfed-1","undefined"),dw=A(A(A(A({},"td-us-1",Ur.tdGatewayUs),"td-eu-1",Ur.tdGatewayEu),"td-ca-1",Ur.tdGatewayCa),"td-usfed-1",Ur.tdGatewayUsFed);function hw(e,r){return r?"//".concat(r).concat(dw[e]):fw[e]}var Ac=function(e){return e.TEXT="TEXT",e.JSON="JSON",e.BLOB="BLOB",e.ARRAY_BUFFER="ARRAY_BUFFER",e}(Ac||{}),si=function(e){return e.GET="GET",e.POST="POST",e}(si||{}),pw={"Content-Type":"application/json"},gw=function(e){function r(t,n){var a;return br(this,r),a=Pv(this,r,[t]),A(a,"code",void 0),A(a,"response",void 0),a.code=n.code,a.response=n.response,a}return Cv(r,e),wr(r)}(yn(Error));function jc(e){var r={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(t){return r[t]})}function yw(e){return Object.entries(e).reduce(function(r,t){var n=gn(t,2),a=n[0],i=n[1];return r.push("".concat(jc(a),"=").concat(jc(i))),r},[]).join("&")}function mw(e){return e>=200&&e<300}function bw(e){var r=Ce.getAllConfig(),t=r.appProps,n=hw(t==null?void 0:t.region,t==null?void 0:t.proxyHost);return e?n+e:n}function ww(e){var r=e.url,t=e.params,n=bw(r);if(t){var a=yw(t),i=n.indexOf("#");i!==-1&&(n=n.slice(0,i)),n+=(n.indexOf("?")===-1?"?":"&")+a}return n}function $w(e){var r=e.data;return r?JSON.stringify(r):void 0}function Sw(e){var r=e.token,t=M({},pw);return r&&(t.Authorization="Bearer ".concat(r)),t}function Ew(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=e.responseType||"JSON",t=e.method||"GET",n=ww(e),a=$w(e),i=Sw(e);return{url:n,method:t,body:a,headers:i,responseType:r}}function Ow(e){return ui.apply(this,arguments)}function ui(){return ui=V(R().mark(function e(r){var t,n,a=arguments;return R().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:t=a.length>1&&a[1]!==void 0?a[1]:"JSON",o.t0=t,o.next=o.t0==="TEXT"?4:o.t0==="JSON"?8:o.t0==="BLOB"?12:o.t0==="ARRAY_BUFFER"?16:20;break;case 4:return o.next=6,r.text();case 6:return n=o.sent,o.abrupt("break",21);case 8:return o.next=10,r.json();case 10:return n=o.sent,o.abrupt("break",21);case 12:return o.next=14,r.blob();case 14:return n=o.sent,o.abrupt("break",21);case 16:return o.next=18,r.arrayBuffer();case 18:return n=o.sent,o.abrupt("break",21);case 20:return o.abrupt("break",21);case 21:if(!(r.ok&&mw(r.status))){o.next=23;break}return o.abrupt("return",n);case 23:return o.abrupt("return",Promise.reject(new gw("Failed to http status error ".concat(r.status),{code:r.status,response:r})));case 24:case"end":return o.stop()}},e)})),ui.apply(this,arguments)}var Nc=function(){function e(){br(this,e)}return wr(e,[{key:"request",value:function(){var r=V(R().mark(function n(a){var i,o=arguments;return R().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return i=o.length>1&&o[1]!==void 0?o[1]:{},typeof a=="string"?i.url=a:i=a,c.abrupt("return",e._request(i));case 3:case"end":return c.stop()}},n)}));function t(n){return r.apply(this,arguments)}return t}()},{key:"get",value:function(){var r=V(R().mark(function n(a){var i,o=arguments;return R().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return i=o.length>1&&o[1]!==void 0?o[1]:{},c.next=3,this.request(a,M(M({},i),{},{method:si.GET}));case 3:return c.abrupt("return",c.sent);case 4:case"end":return c.stop()}},n,this)}));function t(n){return r.apply(this,arguments)}return t}()},{key:"post",value:function(){var r=V(R().mark(function n(a,i){var o,s=arguments;return R().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return o=s.length>2&&s[2]!==void 0?s[2]:{},u.next=3,this.request(a,M(M({},o),{},{method:si.POST,data:i}));case 3:return u.abrupt("return",u.sent);case 4:case"end":return u.stop()}},n,this)}));function t(n,a){return r.apply(this,arguments)}return t}()}],[{key:"create",value:function(){return e.http?e.http:new e}},{key:"_request",value:function(){var r=V(R().mark(function n(a){var i,o,s,c,u,v,l;return R().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return i=Ew(a),o=i.url,s=i.method,c=i.body,u=i.headers,v=i.responseType,d.next=3,fetch(o,{method:s,body:c,headers:u});case 3:return l=d.sent,d.abrupt("return",Ow(l,v));case 5:case"end":return d.stop()}},n)}));function t(n){return r.apply(this,arguments)}return t}()}])}();A(Nc,"http",void 0);var Vt=Nc.create();function Iw(e){return ci.apply(this,arguments)}function ci(){return ci=V(R().mark(function e(r){var t,n,a;return R().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return t="/pas/livechat-auth",o.next=3,Vt.post(t,{app_id:r});case 3:return n=o.sent,a=n.td_access_token,o.abrupt("return",a);case 6:case"end":return o.stop()}},e)})),ci.apply(this,arguments)}function Tw(e){return li.apply(this,arguments)}function li(){return li=V(R().mark(function e(r){var t,n,a,i,o;return R().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return t="/2019-11/pas/livechats",c.next=3,Vt.post(t,M(M({},r),{},{page_url:window.location.href}));case 3:return n=c.sent,a=n.access_token,i=n.conversation_sid,o=n.region,c.abrupt("return",{accessToken:a,roomId:i,region:o});case 8:case"end":return c.stop()}},e)})),li.apply(this,arguments)}function Pw(e){return vi.apply(this,arguments)}function vi(){return vi=V(R().mark(function e(r){return R().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,y1(V(R().mark(function a(){var i;return R().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,Vt.get("/2019-11/pas/livechats",{params:{touchpoint_value:r}});case 2:return i=s.sent,s.abrupt("return",{active:i.active,config:i.config,account_id:i.account_id,release_version:i.release_version,enable_split_twilio_bootstrap:!!(i!=null&&i.enable_split_twilio_bootstrap),feedback_flow_id:(i==null?void 0:i.feedback_flow_id)||""});case 4:case"end":return s.stop()}},a)})),{defaultRetry:2});case 3:return n.abrupt("return",n.sent);case 6:return n.prev=6,n.t0=n.catch(0),console.error("Failed to fetch td chat touchpoint",n.t0),n.abrupt("return",null);case 10:case"end":return n.stop()}},e,null,[[0,6]])})),vi.apply(this,arguments)}var Rw=U,Cw=Br,xw=ce.f,fi=Rw("unscopables"),di=Array.prototype;di[fi]===void 0&&xw(di,fi,{configurable:!0,value:Cw(null)});var _w=function(e){di[fi][e]=!0},Lw=P,Aw=N,jw=H,kc=Qa,Nw=Z,kw=U,hi=kw("iterator"),Mc=!1,Ue,pi,gi;[].keys&&(gi=[].keys(),"next"in gi?(pi=kc(kc(gi)),pi!==Object.prototype&&(Ue=pi)):Mc=!0);var Mw=!jw(Ue)||Lw(function(){var e={};return Ue[hi].call(e)!==e});Mw&&(Ue={}),Aw(Ue[hi])||Nw(Ue,hi,function(){return this});var Uc={IteratorPrototype:Ue,BUGGY_SAFARI_ITERATORS:Mc},Uw=Uc.IteratorPrototype,Bw=Br,Dw=Ir,Fw=Ne,Gw=Mr,Hw=function(){return this},Bc=function(e,r,t,n){var a=r+" Iterator";return e.prototype=Bw(Uw,{next:Dw(+!n,t)}),Fw(e,a,!1),Gw[a]=Hw,e},zw=D,Ww=F,Dc=ct,Kw=N,qw=Bc,Fc=Qa,Gc=Zn,Vw=Ne,Yw=Ve,yi=Z,Xw=U,Jw=Mr,Hc=Uc,Qw=Dc.PROPER,Zw=Dc.CONFIGURABLE,zc=Hc.IteratorPrototype,Yt=Hc.BUGGY_SAFARI_ITERATORS,Dr=Xw("iterator"),Wc="keys",Fr="values",Kc="entries",e$=function(){return this},mi=function(e,r,t,n,a,i,o){qw(t,r,n);var s=function(S){if(S===a&&f)return f;if(!Yt&&S&&S in v)return v[S];switch(S){case Wc:return function(){return new t(this,S)};case Fr:return function(){return new t(this,S)};case Kc:return function(){return new t(this,S)}}return function(){return new t(this)}},c=r+" Iterator",u=!1,v=e.prototype,l=v[Dr]||v["@@iterator"]||a&&v[a],f=!Yt&&l||s(a),d=r==="Array"&&v.entries||l,m,w,g;if(d&&(m=Fc(d.call(new e)),m!==Object.prototype&&m.next&&(Fc(m)!==zc&&(Gc?Gc(m,zc):Kw(m[Dr])||yi(m,Dr,e$)),Vw(m,c,!0))),Qw&&a===Fr&&l&&l.name!==Fr&&(Zw?Yw(v,"name",Fr):(u=!0,f=function(){return Ww(l,this)})),a)if(w={values:s(Fr),keys:i?f:s(Wc),entries:s(Kc)},o)for(g in w)(Yt||u||!(g in v))&&yi(v,g,w[g]);else zw({target:r,proto:!0,forced:Yt||u},w);return v[Dr]!==f&&yi(v,Dr,f,{name:a}),Jw[r]=f,w},Xt=function(e,r){return{value:e,done:r}},r$=ge,bi=_w,qc=Mr,Vc=Ee,t$=ce.f,n$=mi,Jt=Xt,a$=G,Yc="Array Iterator",i$=Vc.set,o$=Vc.getterFor(Yc),s$=n$(Array,"Array",function(e,r){i$(this,{type:Yc,target:r$(e),index:0,kind:r})},function(){var e=o$(this),r=e.target,t=e.index++;if(!r||t>=r.length)return e.target=void 0,Jt(void 0,!0);switch(e.kind){case"keys":return Jt(t,!1);case"values":return Jt(r[t],!1)}return Jt([t,r[t]],!1)},"values"),Xc=qc.Arguments=qc.Array;if(bi("keys"),bi("values"),bi("entries"),a$&&Xc.name!=="values")try{t$(Xc,"name",{value:"values"})}catch{}var u$=ri.charAt,c$=Pe,Jc=Ee,l$=mi,Qc=Xt,Zc="String Iterator",v$=Jc.set,f$=Jc.getterFor(Zc);l$(String,"String",function(e){v$(this,{type:Zc,string:c$(e),index:0})},function(){var r=f$(this),t=r.string,n=r.index,a;return n>=t.length?Qc(void 0,!0):(a=u$(t,n),r.index+=a.length,Qc(a,!1))});var el=j,rl=Vu,d$=Xu,Gr=s$,tl=Ve,h$=Ne,p$=U,wi=p$("iterator"),$i=Gr.values,nl=function(e,r){if(e){if(e[wi]!==$i)try{tl(e,wi,$i)}catch{e[wi]=$i}if(h$(e,r,!0),rl[r]){for(var t in Gr)if(e[t]!==Gr[t])try{tl(e,t,Gr[t])}catch{e[t]=Gr[t]}}}};for(var Si in rl)nl(el[Si]&&el[Si].prototype,Si);nl(d$,"DOMTokenList");var g$=P,y$=U,m$=G,al=Fv,b$=y$("iterator"),il=!g$(function(){var e=new URL("b?a=1&b=2&c=3","https://a"),r=e.searchParams,t=new URLSearchParams("a=1&a=2&b=3"),n="";return e.pathname="c%20d",r.forEach(function(a,i){r.delete("b"),n+=i+a}),t.delete("a",2),t.delete("b",void 0),al&&(!e.toJSON||!t.has("a",1)||t.has("a",2)||!t.has("a",void 0)||t.has("b"))||!r.size&&(al||!m$)||!r.sort||e.href!=="https://a/c%20d?a=1&c=3"||r.get("c")!=="3"||String(new URLSearchParams("?a=1"))!=="a=1"||!r[b$]||new URL("https://a@b").username!=="a"||new URLSearchParams(new URLSearchParams("a=b")).get("a")!=="b"||new URL("https://тест").host!=="xn--e1aybc"||new URL("https://a#б").hash!=="#%D0%B1"||n!=="a1c3"||new URL("https://x",void 0).host!=="x"}),ol=G,w$=_,$$=F,S$=P,Ei=Ut,E$=Xn,O$=gt,I$=$e,T$=yt,sr=Object.assign,sl=Object.defineProperty,P$=w$([].concat),R$=!sr||S$(function(){if(ol&&sr({b:1},sr(sl({},"a",{enumerable:!0,get:function(){sl(this,"b",{value:3,enumerable:!1})}}),{b:2})).b!==1)return!0;var e={},r={},t=Symbol("assign detection"),n="abcdefghijklmnopqrst";return e[t]=7,n.split("").forEach(function(a){r[a]=a}),sr({},e)[t]!==7||Ei(sr({},r)).join("")!==n})?function(r,t){for(var n=I$(r),a=arguments.length,i=1,o=E$.f,s=O$.f;a>i;)for(var c=T$(arguments[i++]),u=o?P$(Ei(c),o(c)):Ei(c),v=u.length,l=0,f;v>l;)f=u[l++],(!ol||$$(s,c,f))&&(n[f]=c[f]);return n}:sr,C$=z,x$=pu,_$=function(e,r,t,n){try{return n?r(C$(t)[0],t[1]):r(t)}catch(a){x$(e,"throw",a)}},L$=Ie,A$=F,j$=$e,N$=_$,k$=fu,M$=Et,U$=Xe,ul=Ya,B$=Ta,D$=Nt,cl=Array,F$=function(r){var t=j$(r),n=M$(this),a=arguments.length,i=a>1?arguments[1]:void 0,o=i!==void 0;o&&(i=L$(i,a>2?arguments[2]:void 0));var s=D$(t),c=0,u,v,l,f,d,m;if(s&&!(this===cl&&k$(s)))for(v=n?new this:[],f=B$(t,s),d=f.next;!(l=A$(d,f)).done;c++)m=o?N$(f,i,[l.value,c],!0):l.value,ul(v,c,m);else for(u=U$(t),v=n?new this(u):cl(u);u>c;c++)m=o?i(t[c],c):t[c],ul(v,c,m);return v.length=c,v},Be=_,Oi=2147483647,Hr=36,ll=1,Ii=26,G$=38,H$=700,z$=72,W$=128,K$="-",q$=/[^\0-\u007E]/,vl=/[.\u3002\uFF0E\uFF61]/g,fl="Overflow: input needs wider integers to process",Ti=Hr-ll,dl=RangeError,V$=Be(vl.exec),ur=Math.floor,Pi=String.fromCharCode,hl=Be("".charCodeAt),pl=Be([].join),xe=Be([].push),Y$=Be("".replace),X$=Be("".split),J$=Be("".toLowerCase),Q$=function(e){for(var r=[],t=0,n=e.length;t<n;){var a=hl(e,t++);if(a>=55296&&a<=56319&&t<n){var i=hl(e,t++);(i&64512)===56320?xe(r,((a&1023)<<10)+(i&1023)+65536):(xe(r,a),t--)}else xe(r,a)}return r},gl=function(e){return e+22+75*(e<26)},Z$=function(e,r,t){var n=0;for(e=t?ur(e/H$):e>>1,e+=ur(e/r);e>Ti*Ii>>1;)e=ur(e/Ti),n+=Hr;return ur(n+(Ti+1)*e/(e+G$))},eS=function(e){var r=[];e=Q$(e);var t=e.length,n=W$,a=0,i=z$,o,s;for(o=0;o<e.length;o++)s=e[o],s<128&&xe(r,Pi(s));var c=r.length,u=c;for(c&&xe(r,K$);u<t;){var v=Oi;for(o=0;o<e.length;o++)s=e[o],s>=n&&s<v&&(v=s);var l=u+1;if(v-n>ur((Oi-a)/l))throw new dl(fl);for(a+=(v-n)*l,n=v,o=0;o<e.length;o++){if(s=e[o],s<n&&++a>Oi)throw new dl(fl);if(s===n){for(var f=a,d=Hr;;){var m=d<=i?ll:d>=i+Ii?Ii:d-i;if(f<m)break;var w=f-m,g=Hr-m;xe(r,Pi(gl(m+w%g))),f=ur(w/g),d+=Hr}xe(r,Pi(gl(f))),i=Z$(a,l,u===c),a=0,u++}}a++,n++}return pl(r,"")},rS=function(e){var r=[],t=X$(Y$(J$(e),vl,"."),"."),n,a;for(n=0;n<t.length;n++)a=t[n],xe(r,V$(q$,a)?"xn--"+eS(a):a);return pl(r,".")},tS=Z,yl=function(e,r,t){for(var n in r)tS(e,n,r[n],t);return e},ml=Lr,nS=Math.floor,Ri=function(e,r){var t=e.length;if(t<8)for(var n=1,a,i;n<t;){for(i=n,a=e[n];i&&r(e[i-1],a)>0;)e[i]=e[--i];i!==n++&&(e[i]=a)}else for(var o=nS(t/2),s=Ri(ml(e,0,o),r),c=Ri(ml(e,o),r),u=s.length,v=c.length,l=0,f=0;l<u||f<v;)e[l+f]=l<u&&f<v?r(s[l],c[f])<=0?s[l++]:c[f++]:l<u?s[l++]:c[f++];return e},aS=Ri,Ci=D,Qt=j,xi=Ms,Zt=F,he=_,zr=G,bl=il,wl=Z,iS=St,oS=yl,sS=Ne,uS=Bc,_i=Ee,$l=xr,Li=N,cS=Y,lS=Ie,vS=Pr,fS=z,Sl=H,W=Pe,dS=Br,El=Ir,Ol=Ta,hS=Nt,en=Xt,cr=ra,pS=U,gS=aS,yS=pS("iterator"),lr="URLSearchParams",Il=lr+"Iterator",Tl=_i.set,ee=_i.getterFor(lr),mS=_i.getterFor(Il),Pl=xi("fetch"),rn=xi("Request"),Wr=xi("Headers"),Ai=rn&&rn.prototype,Rl=Wr&&Wr.prototype,bS=Qt.RegExp,wS=Qt.TypeError,Cl=Qt.decodeURIComponent,$S=Qt.encodeURIComponent,SS=he("".charAt),xl=he([].join),De=he([].push),ji=he("".replace),ES=he([].shift),_l=he([].splice),Ll=he("".split),OS=he("".slice),IS=/\+/g,Al=Array(4),TS=function(e){return Al[e-1]||(Al[e-1]=bS("((?:%[\\da-f]{2}){"+e+"})","gi"))},PS=function(e){try{return Cl(e)}catch{return e}},jl=function(e){var r=ji(e,IS," "),t=4;try{return Cl(r)}catch{for(;t;)r=ji(r,TS(t--),PS);return r}},RS=/[!'()~]|%20/g,CS={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},xS=function(e){return CS[e]},Nl=function(e){return ji($S(e),RS,xS)},Ni=uS(function(r,t){Tl(this,{type:Il,target:ee(r).entries,index:0,kind:t})},lr,function(){var r=mS(this),t=r.target,n=r.index++;if(!t||n>=t.length)return r.target=void 0,en(void 0,!0);var a=t[n];switch(r.kind){case"keys":return en(a.key,!1);case"values":return en(a.value,!1)}return en([a.key,a.value],!1)},!0),kl=function(e){this.entries=[],this.url=null,e!==void 0&&(Sl(e)?this.parseObject(e):this.parseQuery(typeof e=="string"?SS(e,0)==="?"?OS(e,1):e:W(e)))};kl.prototype={type:lr,bindURL:function(e){this.url=e,this.update()},parseObject:function(e){var r=this.entries,t=hS(e),n,a,i,o,s,c,u;if(t)for(n=Ol(e,t),a=n.next;!(i=Zt(a,n)).done;){if(o=Ol(fS(i.value)),s=o.next,(c=Zt(s,o)).done||(u=Zt(s,o)).done||!Zt(s,o).done)throw new wS("Expected sequence with length 2");De(r,{key:W(c.value),value:W(u.value)})}else for(var v in e)cS(e,v)&&De(r,{key:v,value:W(e[v])})},parseQuery:function(e){if(e)for(var r=this.entries,t=Ll(e,"&"),n=0,a,i;n<t.length;)a=t[n++],a.length&&(i=Ll(a,"="),De(r,{key:jl(ES(i)),value:jl(xl(i,"="))}))},serialize:function(){for(var e=this.entries,r=[],t=0,n;t<e.length;)n=e[t++],De(r,Nl(n.key)+"="+Nl(n.value));return xl(r,"&")},update:function(){this.entries.length=0,this.parseQuery(this.url.query)},updateURL:function(){this.url&&this.url.update()}};var tn=function(){$l(this,vr);var r=arguments.length>0?arguments[0]:void 0,t=Tl(this,new kl(r));zr||(this.size=t.entries.length)},vr=tn.prototype;if(oS(vr,{append:function(r,t){var n=ee(this);cr(arguments.length,2),De(n.entries,{key:W(r),value:W(t)}),zr||this.length++,n.updateURL()},delete:function(e){for(var r=ee(this),t=cr(arguments.length,1),n=r.entries,a=W(e),i=t<2?void 0:arguments[1],o=i===void 0?i:W(i),s=0;s<n.length;){var c=n[s];if(c.key===a&&(o===void 0||c.value===o)){if(_l(n,s,1),o!==void 0)break}else s++}zr||(this.size=n.length),r.updateURL()},get:function(r){var t=ee(this).entries;cr(arguments.length,1);for(var n=W(r),a=0;a<t.length;a++)if(t[a].key===n)return t[a].value;return null},getAll:function(r){var t=ee(this).entries;cr(arguments.length,1);for(var n=W(r),a=[],i=0;i<t.length;i++)t[i].key===n&&De(a,t[i].value);return a},has:function(r){for(var t=ee(this).entries,n=cr(arguments.length,1),a=W(r),i=n<2?void 0:arguments[1],o=i===void 0?i:W(i),s=0;s<t.length;){var c=t[s++];if(c.key===a&&(o===void 0||c.value===o))return!0}return!1},set:function(r,t){var n=ee(this);cr(arguments.length,1);for(var a=n.entries,i=!1,o=W(r),s=W(t),c=0,u;c<a.length;c++)u=a[c],u.key===o&&(i?_l(a,c--,1):(i=!0,u.value=s));i||De(a,{key:o,value:s}),zr||(this.size=a.length),n.updateURL()},sort:function(){var r=ee(this);gS(r.entries,function(t,n){return t.key>n.key?1:-1}),r.updateURL()},forEach:function(r){for(var t=ee(this).entries,n=lS(r,arguments.length>1?arguments[1]:void 0),a=0,i;a<t.length;)i=t[a++],n(i.value,i.key,this)},keys:function(){return new Ni(this,"keys")},values:function(){return new Ni(this,"values")},entries:function(){return new Ni(this,"entries")}},{enumerable:!0}),wl(vr,yS,vr.entries,{name:"entries"}),wl(vr,"toString",function(){return ee(this).serialize()},{enumerable:!0}),zr&&iS(vr,"size",{get:function(){return ee(this).entries.length},configurable:!0,enumerable:!0}),sS(tn,lr),Ci({global:!0,constructor:!0,forced:!bl},{URLSearchParams:tn}),!bl&&Li(Wr)){var _S=he(Rl.has),LS=he(Rl.set),Ml=function(e){if(Sl(e)){var r=e.body,t;if(vS(r)===lr)return t=e.headers?new Wr(e.headers):new Wr,_S(t,"content-type")||LS(t,"content-type","application/x-www-form-urlencoded;charset=UTF-8"),dS(e,{body:El(0,W(r)),headers:El(0,t)})}return e};if(Li(Pl)&&Ci({global:!0,enumerable:!0,dontCallGetSet:!0,forced:!0},{fetch:function(r){return Pl(r,arguments.length>1?Ml(arguments[1]):{})}}),Li(rn)){var ki=function(r){return $l(this,Ai),new rn(r,arguments.length>1?Ml(arguments[1]):{})};Ai.constructor=ki,ki.prototype=Ai,Ci({global:!0,constructor:!0,dontCallGetSet:!0,forced:!0},{Request:ki})}}var AS={URLSearchParams:tn,getState:ee},jS=D,Mi=G,NS=il,Ui=j,Ul=Ie,re=_,nn=Z,te=St,kS=xr,Bi=Y,Di=R$,fr=F$,le=Lr,MS=ri.codeAt,US=rS,ye=Pe,BS=Ne,DS=ra,Bl=AS,Dl=Ee,FS=Dl.set,an=Dl.getterFor("URL"),GS=Bl.URLSearchParams,HS=Bl.getState,Kr=Ui.URL,Fi=Ui.TypeError,on=Ui.parseInt,zS=Math.floor,Fl=Math.pow,ne=re("".charAt),ve=re(/./.exec),qr=re([].join),WS=re(1 .toString),KS=re([].pop),dr=re([].push),Gi=re("".replace),qS=re([].shift),VS=re("".split),Vr=re("".slice),sn=re("".toLowerCase),YS=re([].unshift),XS="Invalid authority",Hi="Invalid scheme",Fe="Invalid host",Gl="Invalid port",Hl=/[a-z]/i,JS=/[\d+-.a-z]/i,zi=/\d/,QS=/^0x/i,ZS=/^[0-7]+$/,e2=/^\d+$/,zl=/^[\da-f]+$/i,r2=/[\0\t\n\r #%/:<>?@[\\\]^|]/,t2=/[\0\t\n\r #/:<>?@[\\\]^|]/,n2=/^[\u0000-\u0020]+/,a2=/(^|[^\u0000-\u0020])[\u0000-\u0020]+$/,i2=/[\t\n\r]/g,ae,o2=function(e){var r=VS(e,"."),t,n,a,i,o,s,c;if(r.length&&r[r.length-1]===""&&r.length--,t=r.length,t>4)return e;for(n=[],a=0;a<t;a++){if(i=r[a],i==="")return e;if(o=10,i.length>1&&ne(i,0)==="0"&&(o=ve(QS,i)?16:8,i=Vr(i,o===8?1:2)),i==="")s=0;else{if(!ve(o===10?e2:o===8?ZS:zl,i))return e;s=on(i,o)}dr(n,s)}for(a=0;a<t;a++)if(s=n[a],a===t-1){if(s>=Fl(256,5-t))return null}else if(s>255)return null;for(c=KS(n),a=0;a<n.length;a++)c+=n[a]*Fl(256,3-a);return c},s2=function(e){var r=[0,0,0,0,0,0,0,0],t=0,n=null,a=0,i,o,s,c,u,v,l,f=function(){return ne(e,a)};if(f()===":"){if(ne(e,1)!==":")return;a+=2,t++,n=t}for(;f();){if(t===8)return;if(f()===":"){if(n!==null)return;a++,t++,n=t;continue}for(i=o=0;o<4&&ve(zl,f());)i=i*16+on(f(),16),a++,o++;if(f()==="."){if(o===0||(a-=o,t>6))return;for(s=0;f();){if(c=null,s>0)if(f()==="."&&s<4)a++;else return;if(!ve(zi,f()))return;for(;ve(zi,f());){if(u=on(f(),10),c===null)c=u;else{if(c===0)return;c=c*10+u}if(c>255)return;a++}r[t]=r[t]*256+c,s++,(s===2||s===4)&&t++}if(s!==4)return;break}else if(f()===":"){if(a++,!f())return}else if(f())return;r[t++]=i}if(n!==null)for(v=t-n,t=7;t!==0&&v>0;)l=r[t],r[t--]=r[n+v-1],r[n+--v]=l;else if(t!==8)return;return r},u2=function(e){for(var r=null,t=1,n=null,a=0,i=0;i<8;i++)e[i]!==0?(a>t&&(r=n,t=a),n=null,a=0):(n===null&&(n=i),++a);return a>t?n:r},Yr=function(e){var r,t,n,a;if(typeof e=="number"){for(r=[],t=0;t<4;t++)YS(r,e%256),e=zS(e/256);return qr(r,".")}if(typeof e=="object"){for(r="",n=u2(e),t=0;t<8;t++)a&&e[t]===0||(a&&(a=!1),n===t?(r+=t?":":"::",a=!0):(r+=WS(e[t],16),t<7&&(r+=":")));return"["+r+"]"}return e},un={},Wl=Di({},un,{" ":1,'"':1,"<":1,">":1,"`":1}),Kl=Di({},Wl,{"#":1,"?":1,"{":1,"}":1}),Wi=Di({},Kl,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),_e=function(e,r){var t=MS(e,0);return t>32&&t<127&&!Bi(r,e)?e:encodeURIComponent(e)},cn={ftp:21,file:null,http:80,https:443,ws:80,wss:443},Xr=function(e,r){var t;return e.length===2&&ve(Hl,ne(e,0))&&((t=ne(e,1))===":"||!r&&t==="|")},ql=function(e){var r;return e.length>1&&Xr(Vr(e,0,2))&&(e.length===2||(r=ne(e,2))==="/"||r==="\\"||r==="?"||r==="#")},c2=function(e){return e==="."||sn(e)==="%2e"},l2=function(e){return e=sn(e),e===".."||e==="%2e."||e===".%2e"||e==="%2e%2e"},Ki={},Vl={},qi={},Yl={},Xl={},Vi={},Jl={},Ql={},ln={},vn={},Yi={},Xi={},Ji={},Qi={},Zl={},Zi={},hr={},pe={},ev={},Ge={},me={},eo=function(e,r,t){var n=ye(e),a,i,o;if(r){if(i=this.parse(n),i)throw new Fi(i);this.searchParams=null}else{if(t!==void 0&&(a=new eo(t,!0)),i=this.parse(n,null,a),i)throw new Fi(i);o=HS(new GS),o.bindURL(this),this.searchParams=o}};eo.prototype={type:"URL",parse:function(e,r,t){var n=this,a=r||Ki,i=0,o="",s=!1,c=!1,u=!1,v,l,f,d;for(e=ye(e),r||(n.scheme="",n.username="",n.password="",n.host=null,n.port=null,n.path=[],n.query=null,n.fragment=null,n.cannotBeABaseURL=!1,e=Gi(e,n2,""),e=Gi(e,a2,"$1")),e=Gi(e,i2,""),v=fr(e);i<=v.length;){switch(l=v[i],a){case Ki:if(l&&ve(Hl,l))o+=sn(l),a=Vl;else{if(r)return Hi;a=qi;continue}break;case Vl:if(l&&(ve(JS,l)||l==="+"||l==="-"||l==="."))o+=sn(l);else if(l===":"){if(r&&(n.isSpecial()!==Bi(cn,o)||o==="file"&&(n.includesCredentials()||n.port!==null)||n.scheme==="file"&&!n.host))return;if(n.scheme=o,r){n.isSpecial()&&cn[n.scheme]===n.port&&(n.port=null);return}o="",n.scheme==="file"?a=Qi:n.isSpecial()&&t&&t.scheme===n.scheme?a=Yl:n.isSpecial()?a=Ql:v[i+1]==="/"?(a=Xl,i++):(n.cannotBeABaseURL=!0,dr(n.path,""),a=ev)}else{if(r)return Hi;o="",a=qi,i=0;continue}break;case qi:if(!t||t.cannotBeABaseURL&&l!=="#")return Hi;if(t.cannotBeABaseURL&&l==="#"){n.scheme=t.scheme,n.path=le(t.path),n.query=t.query,n.fragment="",n.cannotBeABaseURL=!0,a=me;break}a=t.scheme==="file"?Qi:Vi;continue;case Yl:if(l==="/"&&v[i+1]==="/")a=ln,i++;else{a=Vi;continue}break;case Xl:if(l==="/"){a=vn;break}else{a=pe;continue}case Vi:if(n.scheme=t.scheme,l===ae)n.username=t.username,n.password=t.password,n.host=t.host,n.port=t.port,n.path=le(t.path),n.query=t.query;else if(l==="/"||l==="\\"&&n.isSpecial())a=Jl;else if(l==="?")n.username=t.username,n.password=t.password,n.host=t.host,n.port=t.port,n.path=le(t.path),n.query="",a=Ge;else if(l==="#")n.username=t.username,n.password=t.password,n.host=t.host,n.port=t.port,n.path=le(t.path),n.query=t.query,n.fragment="",a=me;else{n.username=t.username,n.password=t.password,n.host=t.host,n.port=t.port,n.path=le(t.path),n.path.length--,a=pe;continue}break;case Jl:if(n.isSpecial()&&(l==="/"||l==="\\"))a=ln;else if(l==="/")a=vn;else{n.username=t.username,n.password=t.password,n.host=t.host,n.port=t.port,a=pe;continue}break;case Ql:if(a=ln,l!=="/"||ne(o,i+1)!=="/")continue;i++;break;case ln:if(l!=="/"&&l!=="\\"){a=vn;continue}break;case vn:if(l==="@"){s&&(o="%40"+o),s=!0,f=fr(o);for(var m=0;m<f.length;m++){var w=f[m];if(w===":"&&!u){u=!0;continue}var g=_e(w,Wi);u?n.password+=g:n.username+=g}o=""}else if(l===ae||l==="/"||l==="?"||l==="#"||l==="\\"&&n.isSpecial()){if(s&&o==="")return XS;i-=fr(o).length+1,o="",a=Yi}else o+=l;break;case Yi:case Xi:if(r&&n.scheme==="file"){a=Zi;continue}else if(l===":"&&!c){if(o==="")return Fe;if(d=n.parseHost(o),d)return d;if(o="",a=Ji,r===Xi)return}else if(l===ae||l==="/"||l==="?"||l==="#"||l==="\\"&&n.isSpecial()){if(n.isSpecial()&&o==="")return Fe;if(r&&o===""&&(n.includesCredentials()||n.port!==null))return;if(d=n.parseHost(o),d)return d;if(o="",a=hr,r)return;continue}else l==="["?c=!0:l==="]"&&(c=!1),o+=l;break;case Ji:if(ve(zi,l))o+=l;else if(l===ae||l==="/"||l==="?"||l==="#"||l==="\\"&&n.isSpecial()||r){if(o!==""){var S=on(o,10);if(S>65535)return Gl;n.port=n.isSpecial()&&S===cn[n.scheme]?null:S,o=""}if(r)return;a=hr;continue}else return Gl;break;case Qi:if(n.scheme="file",l==="/"||l==="\\")a=Zl;else if(t&&t.scheme==="file")switch(l){case ae:n.host=t.host,n.path=le(t.path),n.query=t.query;break;case"?":n.host=t.host,n.path=le(t.path),n.query="",a=Ge;break;case"#":n.host=t.host,n.path=le(t.path),n.query=t.query,n.fragment="",a=me;break;default:ql(qr(le(v,i),""))||(n.host=t.host,n.path=le(t.path),n.shortenPath()),a=pe;continue}else{a=pe;continue}break;case Zl:if(l==="/"||l==="\\"){a=Zi;break}t&&t.scheme==="file"&&!ql(qr(le(v,i),""))&&(Xr(t.path[0],!0)?dr(n.path,t.path[0]):n.host=t.host),a=pe;continue;case Zi:if(l===ae||l==="/"||l==="\\"||l==="?"||l==="#"){if(!r&&Xr(o))a=pe;else if(o===""){if(n.host="",r)return;a=hr}else{if(d=n.parseHost(o),d)return d;if(n.host==="localhost"&&(n.host=""),r)return;o="",a=hr}continue}else o+=l;break;case hr:if(n.isSpecial()){if(a=pe,l!=="/"&&l!=="\\")continue}else if(!r&&l==="?")n.query="",a=Ge;else if(!r&&l==="#")n.fragment="",a=me;else if(l!==ae&&(a=pe,l!=="/"))continue;break;case pe:if(l===ae||l==="/"||l==="\\"&&n.isSpecial()||!r&&(l==="?"||l==="#")){if(l2(o)?(n.shortenPath(),l!=="/"&&!(l==="\\"&&n.isSpecial())&&dr(n.path,"")):c2(o)?l!=="/"&&!(l==="\\"&&n.isSpecial())&&dr(n.path,""):(n.scheme==="file"&&!n.path.length&&Xr(o)&&(n.host&&(n.host=""),o=ne(o,0)+":"),dr(n.path,o)),o="",n.scheme==="file"&&(l===ae||l==="?"||l==="#"))for(;n.path.length>1&&n.path[0]==="";)qS(n.path);l==="?"?(n.query="",a=Ge):l==="#"&&(n.fragment="",a=me)}else o+=_e(l,Kl);break;case ev:l==="?"?(n.query="",a=Ge):l==="#"?(n.fragment="",a=me):l!==ae&&(n.path[0]+=_e(l,un));break;case Ge:!r&&l==="#"?(n.fragment="",a=me):l!==ae&&(l==="'"&&n.isSpecial()?n.query+="%27":l==="#"?n.query+="%23":n.query+=_e(l,un));break;case me:l!==ae&&(n.fragment+=_e(l,Wl));break}i++}},parseHost:function(e){var r,t,n;if(ne(e,0)==="["){if(ne(e,e.length-1)!=="]"||(r=s2(Vr(e,1,-1)),!r))return Fe;this.host=r}else if(this.isSpecial()){if(e=US(e),ve(r2,e)||(r=o2(e),r===null))return Fe;this.host=r}else{if(ve(t2,e))return Fe;for(r="",t=fr(e),n=0;n<t.length;n++)r+=_e(t[n],un);this.host=r}},cannotHaveUsernamePasswordPort:function(){return!this.host||this.cannotBeABaseURL||this.scheme==="file"},includesCredentials:function(){return this.username!==""||this.password!==""},isSpecial:function(){return Bi(cn,this.scheme)},shortenPath:function(){var e=this.path,r=e.length;r&&(this.scheme!=="file"||r!==1||!Xr(e[0],!0))&&e.length--},serialize:function(){var e=this,r=e.scheme,t=e.username,n=e.password,a=e.host,i=e.port,o=e.path,s=e.query,c=e.fragment,u=r+":";return a!==null?(u+="//",e.includesCredentials()&&(u+=t+(n?":"+n:"")+"@"),u+=Yr(a),i!==null&&(u+=":"+i)):r==="file"&&(u+="//"),u+=e.cannotBeABaseURL?o[0]:o.length?"/"+qr(o,"/"):"",s!==null&&(u+="?"+s),c!==null&&(u+="#"+c),u},setHref:function(e){var r=this.parse(e);if(r)throw new Fi(r);this.searchParams.update()},getOrigin:function(){var e=this.scheme,r=this.port;if(e==="blob")try{return new pr(e.path[0]).origin}catch{return"null"}return e==="file"||!this.isSpecial()?"null":e+"://"+Yr(this.host)+(r!==null?":"+r:"")},getProtocol:function(){return this.scheme+":"},setProtocol:function(e){this.parse(ye(e)+":",Ki)},getUsername:function(){return this.username},setUsername:function(e){var r=fr(ye(e));if(!this.cannotHaveUsernamePasswordPort()){this.username="";for(var t=0;t<r.length;t++)this.username+=_e(r[t],Wi)}},getPassword:function(){return this.password},setPassword:function(e){var r=fr(ye(e));if(!this.cannotHaveUsernamePasswordPort()){this.password="";for(var t=0;t<r.length;t++)this.password+=_e(r[t],Wi)}},getHost:function(){var e=this.host,r=this.port;return e===null?"":r===null?Yr(e):Yr(e)+":"+r},setHost:function(e){this.cannotBeABaseURL||this.parse(e,Yi)},getHostname:function(){var e=this.host;return e===null?"":Yr(e)},setHostname:function(e){this.cannotBeABaseURL||this.parse(e,Xi)},getPort:function(){var e=this.port;return e===null?"":ye(e)},setPort:function(e){this.cannotHaveUsernamePasswordPort()||(e=ye(e),e===""?this.port=null:this.parse(e,Ji))},getPathname:function(){var e=this.path;return this.cannotBeABaseURL?e[0]:e.length?"/"+qr(e,"/"):""},setPathname:function(e){this.cannotBeABaseURL||(this.path=[],this.parse(e,hr))},getSearch:function(){var e=this.query;return e?"?"+e:""},setSearch:function(e){e=ye(e),e===""?this.query=null:(ne(e,0)==="?"&&(e=Vr(e,1)),this.query="",this.parse(e,Ge)),this.searchParams.update()},getSearchParams:function(){return this.searchParams.facade},getHash:function(){var e=this.fragment;return e?"#"+e:""},setHash:function(e){if(e=ye(e),e===""){this.fragment=null;return}ne(e,0)==="#"&&(e=Vr(e,1)),this.fragment="",this.parse(e,me)},update:function(){this.query=this.searchParams.serialize()||null}};var pr=function(r){var t=kS(this,K),n=DS(arguments.length,1)>1?arguments[1]:void 0,a=FS(t,new eo(r,!1,n));Mi||(t.href=a.serialize(),t.origin=a.getOrigin(),t.protocol=a.getProtocol(),t.username=a.getUsername(),t.password=a.getPassword(),t.host=a.getHost(),t.hostname=a.getHostname(),t.port=a.getPort(),t.pathname=a.getPathname(),t.search=a.getSearch(),t.searchParams=a.getSearchParams(),t.hash=a.getHash())},K=pr.prototype,ie=function(e,r){return{get:function(){return an(this)[e]()},set:r&&function(t){return an(this)[r](t)},configurable:!0,enumerable:!0}};if(Mi&&(te(K,"href",ie("serialize","setHref")),te(K,"origin",ie("getOrigin")),te(K,"protocol",ie("getProtocol","setProtocol")),te(K,"username",ie("getUsername","setUsername")),te(K,"password",ie("getPassword","setPassword")),te(K,"host",ie("getHost","setHost")),te(K,"hostname",ie("getHostname","setHostname")),te(K,"port",ie("getPort","setPort")),te(K,"pathname",ie("getPathname","setPathname")),te(K,"search",ie("getSearch","setSearch")),te(K,"searchParams",ie("getSearchParams")),te(K,"hash",ie("getHash","setHash"))),nn(K,"toJSON",function(){return an(this).serialize()},{enumerable:!0}),nn(K,"toString",function(){return an(this).serialize()},{enumerable:!0}),Kr){var rv=Kr.createObjectURL,tv=Kr.revokeObjectURL;rv&&nn(pr,"createObjectURL",Ul(rv,Kr)),tv&&nn(pr,"revokeObjectURL",Ul(tv,Kr))}BS(pr,"URL"),jS({global:!0,constructor:!0,forced:!NS,sham:!Mi},{URL:pr});var v2=D,f2=F;v2({target:"URL",proto:!0,enumerable:!0},{toJSON:function(){return f2(URL.prototype.toString,this)}});function d2(e,r){if(!e.length)return[];var t=URL.createObjectURL(new Blob(e)),n=document.createElement("a");return n.href=t,n.download=r,n.rel="noopener",document.body.appendChild(n),n.click(),document.body.removeChild(n),URL.revokeObjectURL(t),e}function h2(e){return ro.apply(this,arguments)}function ro(){return ro=V(R().mark(function e(r){var t,n,a,i,o,s,c,u,v,l;return R().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:if(t=r.interactionId,n=t===void 0?"":t,a=r.token,i=a===void 0?"":a,o=r.timezone,s=o===void 0?"":o,c=r.fileName,u=c===void 0?"unknown.txt":c,n){d.next=3;break}throw new Error("Interaction ID is required");case 3:if(i){d.next=5;break}throw new Error("Token is required");case 5:return v="/cds/interactions/".concat(n,"/messages/transcript"),d.next=8,Vt.get(v,{params:{timezone:s},token:i,responseType:Ac.BLOB});case 8:return l=d.sent,d.abrupt("return",d2([l],u));case 10:case"end":return d.stop()}},e)})),ro.apply(this,arguments)}var to=function(){function e(r){br(this,e),A(this,"current",void 0),this.current=r}return wr(e,null,[{key:"create",value:function(t){return new e(t)}},{key:"empty",value:function(){return new e(null)}}])}();function no(e,r){try{return e==null?void 0:e()}catch(t){r==null||r(t)}}const p2='@keyframes loading{0%,5%{transform:translate(40px) scale(1);background:#e9e9e9}10%{transform:translate(40px) scale(1);background:var(--chat-theme-color, #1f1f1f)}40%{transform:translate(20px) scale(1.5);background:var(--chat-theme-color, #1f1f1f)}90%,95%{transform:translate(0) scale(1);background:var(--chat-theme-color, #1f1f1f)}to{transform:translate(0) scale(1);background:#e9e9e9}}@keyframes move-x{0%,10%{transform:translate(0)}90%,to{transform:translate(20px)}}@keyframes dot1-animate{0%{transform:matrix(1,0,0,1,285.389,355.211)}25%{transform:matrix(.9957,0,0,.9957,286.3071,355.4352)}50%{transform:matrix(.7195,0,0,.7195,331.1569,366.3884)}to{transform:matrix(.6882,0,0,.6882,350.5277,371.1191) scale(0)}}@keyframes dot2-animate{0%{transform:matrix(1,0,0,1,354.999,355.211)}25%{transform:matrix(.9957,0,0,.9957,354.999,355.4352)}50%{transform:matrix(.7195,0,0,.7195,354.999,366.3883)}to{transform:matrix(.6882,0,0,.6882,354.999,371.119) scale(0)}}@keyframes dot3-animate{0%{transform:matrix(1,0,0,1,424.611,355.211)}25%{transform:matrix(.9957,0,0,.9957,423.6929,355.4352)}50%{transform:matrix(.7195 0,0,.7195,378.8418,366.3884)}to{transform:matrix(.6882,0,0,.6882,359.474,371.1191) scale(0)}}@keyframes wave-animate{0%{transform:scale(0)}to{transform:scale(1)}}.tdw-widget-wrapper{--chat-z-index: 99999;position:fixed;z-index:var(--chat-z-index)}.tdw-widget-wrapper[data-preview]{position:sticky;display:flex;flex-direction:column;gap:24px;align-items:self-end}.tdw-widget{position:fixed;right:20px;bottom:var(--chat-position-bottom, 20px);z-index:var(--chat-z-index);width:var(--chat-container-width, 360px);min-width:360px;height:var(--chat-container-height, 680px);max-height:calc(var(--chat-screen-height) - var(--chat-position-bottom, 20px) - 20px);border:none;border-radius:20px;box-shadow:0 32px 20px #00000005,0 16px 16px #0000000a,0 4px 8px #0000000f,0 -4px 24px #00000014;overflow:hidden;transform-origin:right bottom;transition:height .2s,visibility 1s,opacity 83ms ease-out,transform .4s cubic-bezier(.25,.8,.25,1);will-change:width,height,visibility,opacity,transform}.tdw-widget[aria-hidden=true]{opacity:0;visibility:hidden;pointer-events:none;transform:scale(0)}.tdw-widget[aria-hidden=false]{opacity:1;visibility:visible;pointer-events:auto;transform:scale(1)}.tdw-widget[data-preview]{position:unset}.tdw-widget iframe{width:100%;height:100%;border:none;border-radius:inherit}@media only screen and (max-width: 600px),(max-height: 620px){.tdw-widget[data-responsive-layout=true]{top:0;right:0;bottom:0;left:0;overflow:hidden;width:var(--chat-screen-width, 100%);min-width:var(--chat-screen-width, 100%);max-width:var(--chat-screen-width, 100%);height:var(--chat-screen-height, 100%);min-height:var(--chat-screen-height, 100%);max-height:var(--chat-screen-height, 100%);border-radius:0}}.tdw-widget-trigger{--box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 8%), 0 16px 16px 0 rgba(0, 0, 0, 4%), 0 32px 20px 0 rgba(0, 0, 0, 2%);position:fixed;right:var(--trigger-button-position-right, 10px);bottom:var(--trigger-button-position-bottom, 20px);z-index:var(--chat-z-index);display:flex;justify-content:center;align-items:center;width:var(--trigger-button-width, 64px);height:var(--trigger-button-height, 64px);border:none;border-radius:50%;cursor:pointer;background-image:var(--chat-icon);background-size:56%;background-repeat:no-repeat;background-position:center;transition:background-color .1s ease-in-out;box-shadow:var(--chat-launcher-shadow, var(--box-shadow));background-color:var(--chat-launcher-color, #1f1f1f)}.tdw-widget-trigger:hover{background-color:var(--chat-hover-launcher-color, #383838)}.tdw-widget-trigger[data-has-chat-icon=yes] .tdw-widget-trigger-animate{display:none}.tdw-widget-trigger[data-has-chat-icon=no]:hover .tdw-widget-trigger-animate svg g[data-target=wave]{display:block;transform-origin:center 52%;animation:wave-animate 2s infinite;animation-direction:alternate;animation-delay:0s,1s}.tdw-widget-trigger[data-has-chat-icon=no]:hover .tdw-widget-trigger-animate svg g[data-target=dot1]{animation:dot1-animate 2s infinite;animation-direction:alternate;animation-delay:0s,4s}.tdw-widget-trigger[data-has-chat-icon=no]:hover .tdw-widget-trigger-animate svg g[data-target=dot2]{animation:dot2-animate 2s infinite;animation-direction:alternate;animation-delay:0s,4s}.tdw-widget-trigger[data-has-chat-icon=no]:hover .tdw-widget-trigger-animate svg g[data-target=dot3]{animation:dot3-animate 2s infinite;animation-direction:alternate;animation-delay:0s,4s}.tdw-widget-trigger[data-preview]{position:relative;right:unset;bottom:unset}.tdw-widget-trigger[data-has-chat-icon=no] .tdw-widget-trigger-animate svg>g>g:nth-child(2)>g>path,.tdw-widget-trigger[data-has-chat-icon=no]:hover .tdw-widget-trigger-animate svg>g>g:nth-child(2)>g>path{fill:#fff}.tdw-widget-trigger-animate{position:absolute;top:0;right:0;bottom:0;left:0;overflow:hidden;border-radius:50%;background-color:var(--chat-hover-launcher-color, #383838)}.tdw-widget-trigger-animate svg{position:relative;width:100%;height:100%;transform:translateZ(0);content-visibility:visible}.tdw-widget-trigger-animate svg g[data-target]{animation:none}.tdw-widget-trigger-animate svg g[data-target=wave]{display:none}.tdw-widget-trigger-animate svg g[data-target=circle]>g>g>path,.tdw-widget-trigger-animate svg g[data-target=dot1]>g>path,.tdw-widget-trigger-animate svg g[data-target=dot2]>g>path,.tdw-widget-trigger-animate svg g[data-target=dot3]>g>path,.tdw-widget-trigger-animate svg g[data-target=wave]>g>g>path{fill:var(--chat-launcher-color, #383838)}.tdw-widget-trigger-animate:hover svg g[data-target=circle]>g>g>path,.tdw-widget-trigger-animate:hover svg g[data-target=dot1]>g>path,.tdw-widget-trigger-animate:hover svg g[data-target=dot2]>g>path,.tdw-widget-trigger-animate:hover svg g[data-target=dot3]>g>path,.tdw-widget-trigger-animate:hover svg g[data-target=wave]>g>g>path{fill:var(--chat-hover-launcher-color, #383838)}.tdw-widget-trigger-badge{position:absolute;top:0;right:0;width:20px;height:20px;line-height:20px;text-align:center;color:#fff;background-color:#f5222d;font-size:10px;border-radius:50%;box-sizing:border-box;transition:right,width,border-radius .25s ease}.tdw-widget-trigger-badge-more{right:-4px;width:31px;border-radius:48px}.tdw-widget-loading{display:flex;flex-direction:column;width:100%;height:100%}.tdw-widget-header{height:64px;background-color:var(--chat-header-background-color, #f8f8f8);border-top-left-radius:8px;border-top-right-radius:8px}.tdw-widget-content{display:flex;flex-direction:column;justify-content:center;align-items:center;height:calc(100% - 56px);padding:16px;box-sizing:border-box}.tdw-loader{position:relative;width:100px;height:10px}.tdw-loader:before,.tdw-loader:after{content:"";position:absolute;top:0;left:0;width:10px;height:10px;margin-left:25%;border-radius:50%;box-shadow:20px 0 #e9e9e9;background:#e9e9e9;animation:move-x 1s linear infinite}.tdw-loader:after{box-shadow:none;transform:translate(40px) scale(1);z-index:2;animation:loading 1s linear infinite}';var g2=function(r){var t={chatIcon:r.chatIcon?"url(".concat(r.chatIcon,")"):void 0,chatThemeColor:r.chatThemeColor,chatHoverThemeColor:r.chatHoverThemeColor,triggerButtonWidth:r.triggerButtonWidth,triggerButtonHeight:r.triggerButtonHeight,triggerButtonPositionBottom:r.triggerButtonPositionBottom,triggerButtonPositionRight:r.triggerButtonPositionRight,chatPositionBottom:r.chatPositionBottom,chatContainerHeight:r.chatContainerHeight,chatContainerWidth:r.chatContainerWidth,chatLauncherColor:r.chatLauncherColor,chatHoverLauncherColor:r.chatHoverLauncherColor,chatLauncherShadow:r.chatLauncherShadow};return h1(t,{removeEmptyString:!0})},y2="talkdesk-chat-widget-style";function m2(e){var r,t,n,a,i=e==null?void 0:e.config,o=i?i1(i,{}):e==null?void 0:e.widgetSettings,s={};if(o!=null&&(r=o.appearance)!==null&&r!==void 0&&(r=r.theme)!==null&&r!==void 0&&r.brandColor){var c,u;s.chatThemeColor=o==null||(c=o.appearance)===null||c===void 0?void 0:c.theme.brandColor,s.chatHoverThemeColor=o==null||(u=o.appearance)===null||u===void 0?void 0:u.theme.brandColor}if(o!=null&&(t=o.appearance)!==null&&t!==void 0&&(t=t.launcher)!==null&&t!==void 0&&t.color){var v,l;s.chatLauncherColor=o==null||(v=o.appearance)===null||v===void 0||(v=v.launcher)===null||v===void 0?void 0:v.color,s.chatHoverLauncherColor=o==null||(l=o.appearance)===null||l===void 0||(l=l.launcher)===null||l===void 0?void 0:l.color}if(o!=null&&(n=o.appearance)!==null&&n!==void 0&&(n=n.launcher)!==null&&n!==void 0&&n.iconUrl){var f;s.chatIcon=o==null||(f=o.appearance)===null||f===void 0||(f=f.launcher)===null||f===void 0?void 0:f.iconUrl}return o!=null&&(a=o.appearance)!==null&&a!==void 0&&(a=a.launcher)!==null&&a!==void 0&&a.shadow&&(s.chatLauncherShadow=o.appearance.launcher.shadow),s}function b2(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0;return g2(M(M({},m2(r)),e))}function w2(e){var r=[];return r.push(a1(p2,y2,e)),function(){r.forEach(function(t){return t()}),r.length=0}}function $2(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},t=arguments.length>2?arguments[2]:void 0,n=b2(r,t),a=Object.keys(n);if(a.length)return qu(e,n)}function S2(e,r){var t=function(){qu(e,{chatScreenWidth:window.innerWidth+"px",chatScreenHeight:window.innerHeight+"px"})},n=function(){t()};return t(),window.addEventListener("resize",n),function(){window.removeEventListener("resize",n)}}var nv="tdw-widget-wrapper";function E2(e){var r=e.root,t=e.isPreview,n=t===void 0?!1:t,a=document.createElement("div");return a.className=nv,a.setAttribute("data-".concat(nv),""),n&&a.setAttribute("data-preview",""),r.appendChild(a),{element:a,destroy:function(){wm(r,a)&&r.removeChild(a),a.remove()}}}var O2=F,I2=Y,T2=it,P2=xu,av=RegExp.prototype,R2=function(e){var r=e.flags;return r===void 0&&!("flags"in av)&&!I2(e,"flags")&&T2(av,e)?O2(P2,e):r},C2=ct.PROPER,x2=Z,_2=z,iv=Pe,L2=P,A2=R2,ao="toString",ov=RegExp.prototype,sv=ov[ao],j2=L2(function(){return sv.call({source:"a",flags:"b"})!=="/a/b"}),N2=C2&&sv.name!==ao;(j2||N2)&&x2(ov,ao,function(){var r=_2(this),t=iv(r.source),n=iv(A2(r));return"/"+t+"/"+n},{unsafe:!0});var k2='<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 710 710" width="710" height="710" preserveAspectRatio="xMidYMid meet"><g clip-path="url(#__lottie_element_51)" data-target="circle"><g transform="matrix(1,0,0,1,355,355)"><g opacity="1" transform="matrix(1,0,0,1,0,0)"><path fill="rgb(31,31,31)" fill-opacity="1" d=" M0,-355.0159912109375 C196.07000732421875,-355.0159912109375 355.0159912109375,-196.07000732421875 355.0159912109375,0 C355.0159912109375,196.07000732421875 196.07000732421875,355.0159912109375 0,355.0159912109375 C-196.07000732421875,355.0159912109375 -355.0159912109375,196.07000732421875 -355.0159912109375,0 C-355.0159912109375,-196.07000732421875 -196.07000732421875,-355.0159912109375 0,-355.0159912109375z"></path></g></g><g transform="matrix(1,0,0,1,354.9989929199219,384.5849914550781)"><g opacity="1" transform="matrix(1,0,0,1,0,0)"><path fill="rgb(255,255,255)" fill-opacity="1" d=" M-67.62200164794922,-135.24400329589844 C-67.62200164794922,-135.24400329589844 67.62200164794922,-135.24400329589844 67.62200164794922,-135.24400329589844 C123.64199829101562,-135.24400329589844 169.05499267578125,-89.83100128173828 169.05499267578125,-33.81100082397461 C169.05499267578125,22.20800018310547 123.64199829101562,67.62200164794922 67.62200164794922,67.62200164794922 C67.62200164794922,67.62200164794922 50.71699905395508,67.62200164794922 50.71699905395508,67.62200164794922 C50.71699905395508,67.62200164794922 -50.71699905395508,135.24400329589844 -50.71699905395508,135.24400329589844 C-50.71699905395508,135.24400329589844 -50.71699905395508,67.62200164794922 -50.71699905395508,67.62200164794922 C-50.71699905395508,67.62200164794922 -67.62200164794922,67.62200164794922 -67.62200164794922,67.62200164794922 C-123.64199829101562,67.62200164794922 -169.05499267578125,22.20800018310547 -169.05499267578125,-33.81100082397461 C-169.05499267578125,-89.83100128173828 -123.64199829101562,-135.24400329589844 -67.62200164794922,-135.24400329589844z"></path></g></g><g data-target="dot3" transform="matrix(1,0,0,1,424.6109924316406,355.21099853515625)"><g opacity="1" transform="matrix(1,0,0,1,0,0)"><path fill="rgb(30,30,30)" fill-opacity="1" d=" M0,-19.58300018310547 C-10.984000205993652,-19.58300018310547 -19.88800048828125,-10.815999984741211 -19.88800048828125,0 C-19.88800048828125,10.8149995803833 -10.984000205993652,19.58300018310547 0,19.58300018310547 C10.984000205993652,19.58300018310547 19.88800048828125,10.8149995803833 19.88800048828125,0 C19.88800048828125,-10.815999984741211 10.984000205993652,-19.58300018310547 0,-19.58300018310547z"></path></g></g><g data-target="dot1" transform="matrix(1,0,0,1,285.3890075683594,355.21099853515625)"><g opacity="1" transform="matrix(1,0,0,1,0,0)"><path fill="rgb(30,30,30)" fill-opacity="1" d=" M0,-19.58300018310547 C-10.984000205993652,-19.58300018310547 -19.888999938964844,-10.815999984741211 -19.888999938964844,0 C-19.888999938964844,10.8149995803833 -10.984000205993652,19.58300018310547 0,19.58300018310547 C10.984000205993652,19.58300018310547 19.888999938964844,10.8149995803833 19.888999938964844,0 C19.888999938964844,-10.815999984741211 10.984000205993652,-19.58300018310547 0,-19.58300018310547z"></path></g></g><g data-target="dot2" transform="matrix(1,0,0,1,354.9989929199219,355.21099853515625)"><g opacity="1" transform="matrix(1,0,0,1,0,0)"><path fill="rgb(30,30,30)" fill-opacity="1" d=" M-0.0010000000474974513,-19.58300018310547 C-10.984999656677246,-19.58300018310547 -19.888999938964844,-10.815999984741211 -19.888999938964844,0 C-19.888999938964844,10.8149995803833 -10.984999656677246,19.58300018310547 -0.0010000000474974513,19.58300018310547 C10.984000205993652,19.58300018310547 19.888999938964844,10.8149995803833 19.888999938964844,0 C19.888999938964844,-10.815999984741211 10.984000205993652,-19.58300018310547 -0.0010000000474974513,-19.58300018310547z"></path></g></g><g data-target="wave"><g transform="matrix(0.9995219707489014,-0.03091629408299923,0.03091629408299923,0.9995219707489014,356.4827575683594,355.05108642578125)" opacity="1"><g opacity="1" transform="matrix(1,0,0,1,0,0)"><path fill="rgb(31,31,31)" fill-opacity="1" d=" M73.96199798583984,-17.92799949645996 C73.96199798583984,-17.92799949645996 49.125999450683594,-29.759000778198242 49.125999450683594,-29.759000778198242 C40.44200134277344,-9.998000144958496 21.340900421142578,2.770447254180908 0.46700000762939453,2.7699999809265137 C-21.07493782043457,2.769519567489624 -40.41497039794922,-10.566868782043457 -48.804969787597656,-31.209869384765625 C-48.804969787597656,-31.209869384765625 -60.26470184326172,-26.16266632080078 -60.26519775390625,-26.1624755859375 C-60.265830993652344,-26.162199020385742 -73.96195220947266,-20.127910614013672 -73.96195220947266,-20.127910614013672 C-61.29095458984375,11.061088562011719 -32.06700134277344,31.209999084472656 0.46700000762939453,31.209999084472656 C31.999000549316406,31.209999084472656 60.83599853515625,11.920999526977539 73.96199798583984,-17.92799949645996z"></path></g></g></g></g></svg>';function M2(){var e=document.createElement("div");e.className="tdw-widget-trigger-animate",e.innerHTML=k2;var r=function(){e.remove()};return{destroy:r,get element(){return e}}}var uv="talkdesk-chat-widget-trigger";function U2(e,r){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,n=M2(),a=document.createElement("button");a.id=uv,a.className="tdw-widget-trigger",a.ariaLabel="Open chat widget",t&&a.setAttribute("data-preview","");var i=null,o=null,s=function(){var g;(g=o)===null||g===void 0||g.destroy(),o=null},c=function(){o||(o=new o1(a,{onClick:function(){r==null||r()}}))},u=function(){document.getElementById(uv)||(e.appendChild(a),a.appendChild(n.element),a.onclick=function(){o||r==null||r()})},v=function(){u(),a.style.display=""},l=function(){a.style.display="none"},f=function(g){var S=g.enablePointMoveTriggerButton,$=g.themes,I=$===void 0?{}:$;S&&c(),a.setAttribute("data-has-chat-icon",I!=null&&I["--chat-icon"]?"yes":"no")},d=function(){s(),a.removeChild(n.element),n.destroy(),a.remove()},m=function(g){g>0?(i||(i=document.createElement("span"),i.className="tdw-widget-trigger-badge ".concat(g>9?"tdw-widget-trigger-badge-more":""),i.ariaLabel="new message indicator",a.appendChild(i)),i.textContent=g>99?"99+":g.toString()):i&&(i.remove(),i=null)};return{open:v,close:l,update:f,destroy:d,setBadge:m}}var B2=D,D2=Ga.filter,F2=Ht,G2=F2("filter");B2({target:"Array",proto:!0,forced:!G2},{filter:function(r){return D2(this,r,arguments.length>1?arguments[1]:void 0)}});function io(e){try{return!isNaN(+e)}catch{return!1}}function H2(e){if(!e)return!1;try{var r=e.toString().split(".").map(function(o){return o.trim()}).filter(Boolean);if(r.length!==3)return!1;var t=gn(r,3),n=t[0],a=t[1],i=t[2];return io(n)&&io(a)&&io(i)}catch{return!1}}var cv={exports:{}},lv={},z2=Oe,W2=ge,vv=mt.f,K2=Lr,fv=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],q2=function(e){try{return vv(e)}catch{return K2(fv)}};lv.f=function(r){return fv&&z2(r)==="Window"?q2(r):vv(W2(r))};var V2=P,Y2=V2(function(){if(typeof ArrayBuffer=="function"){var e=new ArrayBuffer(8);Object.isExtensible(e)&&Object.defineProperty(e,"a",{value:8})}}),X2=P,J2=H,Q2=Oe,dv=Y2,fn=Object.isExtensible,Z2=X2(function(){fn(1)}),eE=Z2||dv?function(r){return!J2(r)||dv&&Q2(r)==="ArrayBuffer"?!1:fn?fn(r):!0}:fn,rE=P,tE=!rE(function(){return Object.isExtensible(Object.preventExtensions({}))}),nE=D,aE=_,iE=lt,oE=H,oo=Y,sE=ce.f,hv=mt,uE=lv,so=eE,cE=Sn,lE=tE,pv=!1,be=cE("meta"),vE=0,uo=function(e){sE(e,be,{value:{objectID:"O"+vE++,weakData:{}}})},fE=function(e,r){if(!oE(e))return typeof e=="symbol"?e:(typeof e=="string"?"S":"P")+e;if(!oo(e,be)){if(!so(e))return"F";if(!r)return"E";uo(e)}return e[be].objectID},dE=function(e,r){if(!oo(e,be)){if(!so(e))return!0;if(!r)return!1;uo(e)}return e[be].weakData},hE=function(e){return lE&&pv&&so(e)&&!oo(e,be)&&uo(e),e},pE=function(){gE.enable=function(){},pv=!0;var e=hv.f,r=aE([].splice),t={};t[be]=1,e(t).length&&(hv.f=function(n){for(var a=e(n),i=0,o=a.length;i<o;i++)if(a[i]===be){r(a,i,1);break}return a},nE({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:uE.f}))},gE=cv.exports={enable:pE,fastKey:fE,getWeakData:dE,onFreeze:hE};iE[be]=!0;var gv=cv.exports,yE=N,mE=H,yv=Zn,bE=function(e,r,t){var n,a;return yv&&yE(n=r.constructor)&&n!==t&&mE(a=n.prototype)&&a!==t.prototype&&yv(e,a),e},wE=D,$E=j,SE=_,mv=Jn,EE=Z,OE=gv,IE=Mt,TE=xr,PE=N,RE=Ae,co=H,lo=P,CE=Su,xE=Ne,_E=bE,LE=function(e,r,t){var n=e.indexOf("Map")!==-1,a=e.indexOf("Weak")!==-1,i=n?"set":"add",o=$E[e],s=o&&o.prototype,c=o,u={},v=function(S){var $=SE(s[S]);EE(s,S,S==="add"?function(L){return $(this,L===0?0:L),this}:S==="delete"?function(I){return a&&!co(I)?!1:$(this,I===0?0:I)}:S==="get"?function(L){return a&&!co(L)?void 0:$(this,L===0?0:L)}:S==="has"?function(L){return a&&!co(L)?!1:$(this,L===0?0:L)}:function(L,fe){return $(this,L===0?0:L,fe),this})},l=mv(e,!PE(o)||!(a||s.forEach&&!lo(function(){new o().entries().next()})));if(l)c=t.getConstructor(r,e,n,i),OE.enable();else if(mv(e,!0)){var f=new c,d=f[i](a?{}:-0,1)!==f,m=lo(function(){f.has(1)}),w=CE(function(S){new o(S)}),g=!a&&lo(function(){for(var S=new o,$=5;$--;)S[i]($,$);return!S.has(-0)});w||(c=r(function(S,$){TE(S,s);var I=_E(new o,S,c);return RE($)||IE($,I[i],{that:I,AS_ENTRIES:n}),I}),c.prototype=s,s.constructor=c),(m||g)&&(v("delete"),v("has"),n&&v("get")),(g||d)&&v(i),a&&s.clear&&delete s.clear}return u[e]=c,wE({global:!0,constructor:!0,forced:c!==o},u),xE(c,e),a||t.setStrong(c,e,n),c},bv=Br,AE=St,wv=yl,jE=Ie,NE=xr,kE=Ae,ME=Mt,UE=mi,dn=Xt,BE=hs,Jr=G,$v=gv.fastKey,Sv=Ee,Ev=Sv.set,vo=Sv.getterFor,DE={getConstructor:function(e,r,t,n){var a=e(function(u,v){NE(u,i),Ev(u,{type:r,index:bv(null),first:void 0,last:void 0,size:0}),Jr||(u.size=0),kE(v)||ME(v,u[n],{that:u,AS_ENTRIES:t})}),i=a.prototype,o=vo(r),s=function(u,v,l){var f=o(u),d=c(u,v),m,w;return d?d.value=l:(f.last=d={index:w=$v(v,!0),key:v,value:l,previous:m=f.last,next:void 0,removed:!1},f.first||(f.first=d),m&&(m.next=d),Jr?f.size++:u.size++,w!=="F"&&(f.index[w]=d)),u},c=function(u,v){var l=o(u),f=$v(v),d;if(f!=="F")return l.index[f];for(d=l.first;d;d=d.next)if(d.key===v)return d};return wv(i,{clear:function(){for(var v=this,l=o(v),f=l.first;f;)f.removed=!0,f.previous&&(f.previous=f.previous.next=void 0),f=f.next;l.first=l.last=void 0,l.index=bv(null),Jr?l.size=0:v.size=0},delete:function(u){var v=this,l=o(v),f=c(v,u);if(f){var d=f.next,m=f.previous;delete l.index[f.index],f.removed=!0,m&&(m.next=d),d&&(d.previous=m),l.first===f&&(l.first=d),l.last===f&&(l.last=m),Jr?l.size--:v.size--}return!!f},forEach:function(v){for(var l=o(this),f=jE(v,arguments.length>1?arguments[1]:void 0),d;d=d?d.next:l.first;)for(f(d.value,d.key,this);d&&d.removed;)d=d.previous},has:function(v){return!!c(this,v)}}),wv(i,t?{get:function(v){var l=c(this,v);return l&&l.value},set:function(v,l){return s(this,v===0?0:v,l)}}:{add:function(v){return s(this,v=v===0?0:v,v)}}),Jr&&AE(i,"size",{configurable:!0,get:function(){return o(this).size}}),a},setStrong:function(e,r,t){var n=r+" Iterator",a=vo(r),i=vo(n);UE(e,r,function(o,s){Ev(this,{type:n,target:o,state:a(o),kind:s,last:void 0})},function(){for(var o=i(this),s=o.kind,c=o.last;c&&c.removed;)c=c.previous;return!o.target||!(o.last=c=c?c.next:o.state.first)?(o.target=void 0,dn(void 0,!0)):dn(s==="keys"?c.key:s==="values"?c.value:[c.key,c.value],!1)},t?"entries":"values",!t,!0),BE(r)}},FE=LE,GE=DE;FE("Map",function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}},GE);function HE(e){var r=document.createElement("div");r.id=e,r.className="tdw-widget";var t=new Map,n=function(){r.remove(),t.forEach(function(v){return v.destroy()}),t.clear()},a=function(v,l){t.set(v,l),r.appendChild(l.element)},i=function(v){var l=t.get(v);l&&(l.destroy(),t.delete(v))},o=function(){r.setAttribute("aria-hidden","false")},s=function(){r.setAttribute("aria-hidden","true")},c=function(){return!!document.getElementById(e)};return{element:r,append:a,remove:i,show:o,hide:s,isMounted:c,destroy:n}}function zE(){var e=document.createElement("div");e.className="tdw-widget-loading",e.id="tdw-widget-loading",e.ariaLabel="Loading",e.innerHTML=['<div class="tdw-widget-content">','<span class="tdw-loader"></span>',"</div>"].join("");var r=function(){e.remove()};return{element:e,destroy:r}}function WE(e){var r=document.createElement("iframe");r.title="Chat Widget",r.allowFullscreen=!0,r.style.display="none";var t=function(){r.style.display="block",e()};r.addEventListener("load",t);var n=function(){r.removeEventListener("load",t),r.remove()};return{element:r,destroy:n}}var KE="talkdesk-chat-widget",Ov="loading-element",qE="iframe-element",VE=function(){var r=Ce.getAllConfig(),t=r.touchpoint,n=r.appProps,a=n!=null&&n.proxyHost?"//".concat(n.proxyHost).concat(Ur.tdChatSdk):"",i=(t==null?void 0:t.release_version)||"",o=H2(i);return"".concat(a||"https://talkdeskchatsdk.svc.talkdeskstg.com","/v2/widget/").concat(o?i:"latest","/index.html?touchpointId=").concat(n==null?void 0:n.touchpointId)},YE=function(){return"".concat("https://talkdeskchatsdk.svc.talkdeskstg.com","/v2/widget/latest/preview.html")};function XE(e,r){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,n=HE(KE),a=WE(function(){n.remove(Ov)});n.append(Ov,zE()),n.hide(),t&&n.element.setAttribute("data-preview","");var i=function(){n.isMounted()||(e.appendChild(n.element),a.element.src=t?YE():VE(),n.append(qE,a),r&&a.element.contentWindow&&r(a.element.contentWindow))},o=function(){i()},s=function(d){var m=d.height;m&&(n.element.style.height=typeof m=="string"?m:"".concat(m,"px"))},c=function(){i(),n.show()},u=function(){n.hide()},v=function(){n.destroy()},l=function(){var d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},m=d.enableResponsiveLayout,w=m===void 0?!1:m;w?n.element.setAttribute("data-responsive-layout","true"):n.element.removeAttribute("data-responsive-layout")};return{initInBackground:o,resize:s,open:c,close:u,destroy:v,update:l}}var JE=["enableResponsiveLayout","enableUserInput","enablePointMoveTriggerButton"];function QE(e,r){var t=document.getElementById(e);if(!t)throw new Error('The element not exist, element id = "#'.concat(e,'"'));var n=r.touchpointId||r.flowId;if(!n.trim())throw new Error("The td chat jssdk touchpointId or flowId no exist");if(!r.region)throw new Error("The td chat jssdk region not exist");Ce.setAppProps(M(M({},r),{},{touchpointId:n}));var a=[],i=null,o=!1,s=!1,c=null,u=null,v=null,l=to.empty(),f=to.empty(),d=to.empty(),m=E2({root:t}),w=U2(m.element,function(){$()}),g=XE(m.element,function(B){u=new T1({name:"SDK",sender:B,topic:X.Topic,debug:!1}),u.register(X.Methods.FrameReady,function(){if(!s){var O;s=!0,(O=c)===null||O===void 0||O(!0),w.open()}}),u.register(X.Methods.FrameResize,function(O){g.resize(O)}),u.register(X.Methods.Maximize,function(){$()}),u.register(X.Methods.Minimize,function(){I()}),u.register(X.Methods.GetAllConfig,function(){return Ce.getAllConfig()}),u.register(X.Methods.GetCredentials,function(O){return Tw(M(M({},O),{},{app_id:n}))}),u.register(X.Methods.ConversationStart,function(){no(d.current,function(O){console.error('An error occurred in "onConversationStart" callback.',O)})}),u.register(X.Methods.SetBadge,function(O){w.setBadge(O)}),u.register(X.Methods.GetTdAccessToken,function(){return Iw(n)}),u.register(X.Methods.DownloadTranscript,function(){var O=V(R().mark(function k(oe){return R().wrap(function(se){for(;;)switch(se.prev=se.next){case 0:return se.next=2,h2(oe);case 2:return se.abrupt("return",!0);case 3:case"end":return se.stop()}},k)}));return function(k){return O.apply(this,arguments)}}())}),S=function(){var B=V(R().mark(function O(){var k,oe,gr,se,hn,He,ze,we,p,h,y,E,b=arguments;return R().wrap(function(T){for(;;)switch(T.prev=T.next){case 0:return k=b.length>0&&b[0]!==void 0?b[0]:{},oe=k.enableResponsiveLayout,gr=oe===void 0?!0:oe,se=k.enableUserInput,hn=se===void 0?!0:se,He=k.enablePointMoveTriggerButton,ze=He===void 0?!1:He,we=Nv(k,JE),i||(i=Pw(n)),T.next=4,i;case 4:if(p=T.sent,p!=null&&p.active){T.next=7;break}return T.abrupt("return",!1);case 7:if(h=Ce.setAppConfig(M(M({},we),{},{enableResponsiveLayout:gr,enableUserInput:hn,enablePointMoveTriggerButton:ze,languageCode:(we==null?void 0:we.languageCode)||(r==null?void 0:r.languageCode)})),Ce.setTouchpoint(p),o){T.next=19;break}return o=!0,y=$2(m.element,h==null?void 0:h.styles,p),v=S2(m.element),a.push(w2(m.element)),g.update({enableResponsiveLayout:gr}),w.update({enablePointMoveTriggerButton:ze,themes:y}),T.abrupt("return",new Promise(function(q){c=q,g.initInBackground()}));case 19:return T.next=21,(E=u)===null||E===void 0?void 0:E.trigger(X.Methods.UpdateAppConfigs,{appConfig:h});case 21:return T.abrupt("return",!0);case 22:case"end":return T.stop()}},O)}));return function(){return B.apply(this,arguments)}}(),$=function(){var O;w.close(),g.open(),(O=u)===null||O===void 0||O.trigger(X.Methods.FrameOpened),no(l.current,function(k){console.error('An error occurred in "onOpenWebchat" callback.',k)})},I=function(){g.close(),w.open(),no(f.current,function(O){console.error('An error occurred in "onCloseWebchat" callback.',O)})},L=function(){var O,k;w.destroy(),g.destroy(),m.destroy(),a.forEach(function(oe){return oe()}),a.length=0,(O=u)===null||O===void 0||O.destroy(),u=null,f.current=null,l.current=null,d.current=null,Ce.clearAll(),i=null,o=!1,s=!1,c=null,(k=v)===null||k===void 0||k(),v=null},fe=function(O){var k;Ce.setContextParam(O),(k=u)===null||k===void 0||k.trigger(X.Methods.UpdateContext,O)};return{open:$,close:I,init:S,destroy:L,setContextParam:fe,set onOpenWebchat(B){l.current=B},set onCloseWebchat(B){f.current=B},set onConversationStart(B){d.current=B}}}function ZE(e,r){return QE(e,r)}return ZE});
//# sourceMappingURL=talkdeskchatsdk.js.map
