var G=Object.defineProperty;var V=(n,e,t)=>e in n?G(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var g=(n,e,t)=>V(n,typeof e!="symbol"?e+"":e,t);import{g as J,r as q,P as Z}from"./index-BpFo0E1C.js";/*!
* Talkdesk Confidential
*
* Copyright (C) Talkdesk Inc. 2024
*
* The source code for this program is not published or otherwise divested
* of its trade secrets, irrespective of what has been deposited with the
* U.S. Copyright Office. Unauthorized copying of this file, via any medium
* is strictly prohibited.
*/function Q(n,e){return!n||!e?!1:n.contains?n.contains(e):n.childNodes?Array.prototype.indexOf.call(n.childNodes,e)!==-1:!1}function ee(n){const e=n.charCodeAt(0);return e>=65&&e<=90}function A(n){const e=[...n].map((t,r)=>ee(t)?r===0?t.toLowerCase():"-"+t.toLowerCase():t).join("");return"--".concat(e)}function te(n,e){const t=Object.keys(e);return t.length?t.reduce((r,i)=>i.indexOf("-")>-1||i.indexOf("_")>-1?r:(n.style.setProperty(A(i),e[i]),{...r,[A(i)]:e[i]}),{}):{}}function H(n,e){let t;if(typeof n=="string"?t=n.indexOf("#")>-1?document.querySelector(n):document.getElementById(n):t=n,t)return te(t,e)}function ne(n){const e=document.createElement("style");return e.id=n,e}function _(n,e){return e.querySelector("#".concat(n))}function re(n,e,t=document.head){const r=_(e,t);if(r)return r.innerHTML=n,()=>{const i=_(e,t);i&&t.removeChild(i)};{const i=ne(e);return i.innerHTML=n,t.appendChild(i),()=>{const o=_(e,t);o&&t.removeChild(o)}}}function ie(n,e){try{return JSON.stringify(n)}catch(t){return""}}function oe(n,e,t){try{return JSON.parse(n)}catch(r){return e}}class ae{constructor(e,t={}){g(this,"_moving",!1);g(this,"_moved",!1);g(this,"_initialXY",[0,0]);g(this,"_startXY",[0,0]);g(this,"_boundaryValue",5);g(this,"_rb",null);g(this,"_isPC",!0);this.current=e,this.options=t,this.onMoveStart=this.onMoveStart.bind(this),this.onMoving=this.onMoving.bind(this),this.onMoveEnd=this.onMoveEnd.bind(this),this.removeDocumentListeners=this.removeDocumentListeners.bind(this),this.current.addEventListener("mousedown",this.onMoveStart),this.current.addEventListener("touchstart",this.onMoveStart),this._rb=new ResizeObserver(()=>{this.reset()}),this._rb.observe(document.body)}getEventInfo(e){return e.touches?(this._isPC=!1,{clientXY:[e.touches[0].clientX,e.touches[0].clientY]}):(this._isPC=!0,{clientXY:[e.clientX,e.clientY]})}onMoveStart(e){e.stopPropagation(),e.preventDefault(),this._initialXY=[this.current.offsetLeft,this.current.offsetTop],this._startXY=this.getEventInfo(e).clientXY,this._moved=!1,this.addDocumentListeners()}onMoving(e){var d,c;e.stopPropagation(),e.preventDefault();const{clientXY:t}=this.getEventInfo(e),[r,i]=t,o=r-this._startXY[0],a=i-this._startXY[1];Math.abs(o)<this._boundaryValue&&Math.abs(a)<this._boundaryValue||(this._moved||(this._moved=!0),this._moving=!0,this.current.style.left=Math.min(Math.max(0,this._initialXY[0]+o),window.innerWidth-this.current.offsetWidth)+"px",this.current.style.top=Math.min(Math.max(0,this._initialXY[1]+a),window.innerHeight-this.current.offsetHeight)+"px",(c=(d=this.options)==null?void 0:d.onChange)==null||c.call(d,"moving"))}onMoveEnd(e){var t,r,i,o;e.stopPropagation(),e.preventDefault(),this._moving&&((r=(t=this.options)==null?void 0:t.onChange)==null||r.call(t,"moveEnded")),this._moved||(o=(i=this.options)==null?void 0:i.onClick)==null||o.call(i),this._moved=!1,this.removeDocumentListeners()}addDocumentListeners(){document.addEventListener("mousemove",this.onMoving,{passive:!1}),document.addEventListener("mouseup",this.onMoveEnd,{passive:!1}),this.current.addEventListener("touchmove",this.onMoving,{passive:!1}),this.current.addEventListener("touchend",this.onMoveEnd,{passive:!1})}removeDocumentListeners(){document.removeEventListener("mousemove",this.onMoving),document.removeEventListener("mouseup",this.onMoveEnd),this.current.removeEventListener("touchmove",this.onMoveEnd),this.current.removeEventListener("touchend",this.onMoveEnd)}reset(){this._isPC&&(this.current.style.top="",this.current.style.left="")}destroy(){var e;this.current.removeEventListener("mousedown",this.onMoveStart),this.current.removeEventListener("touchstart",this.onMoveStart),this.removeDocumentListeners(),(e=this._rb)==null||e.disconnect(),this._rb=null}}const x={Topic:"WidgetCommunication",Methods:{Maximize:"Maximize",Minimize:"Minimize",GetAllConfig:"GetAllConfig",GetCredentials:"GetCredentials",GetTdAccessToken:"GetTdAccessToken",SetBadge:"SetBadge",FrameOpened:"FrameOpened",DownloadTranscript:"DownloadTranscript",UpdatePreviewConfig:"UpdatePreviewConfig",PreviewReady:"PreviewReady",ConversationStart:"ConversationStart",FrameReady:"FrameReady",FrameResize:"FrameResize",UpdateAppConfigs:"UpdateAppConfigs",UpdateContext:"UpdateContext"}};var S={exports:{}},b=typeof Reflect=="object"?Reflect:null,T=b&&typeof b.apply=="function"?b.apply:function(e,t,r){return Function.prototype.apply.call(e,t,r)},C;b&&typeof b.ownKeys=="function"?C=b.ownKeys:Object.getOwnPropertySymbols?C=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:C=function(e){return Object.getOwnPropertyNames(e)};function se(n){console&&console.warn&&console.warn(n)}var W=Number.isNaN||function(e){return e!==e};function l(){l.init.call(this)}S.exports=l;S.exports.once=he;l.EventEmitter=l;l.prototype._events=void 0;l.prototype._eventsCount=0;l.prototype._maxListeners=void 0;var N=10;function E(n){if(typeof n!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof n)}Object.defineProperty(l,"defaultMaxListeners",{enumerable:!0,get:function(){return N},set:function(n){if(typeof n!="number"||n<0||W(n))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+n+".");N=n}});l.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};l.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||W(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function Y(n){return n._maxListeners===void 0?l.defaultMaxListeners:n._maxListeners}l.prototype.getMaxListeners=function(){return Y(this)};l.prototype.emit=function(e){for(var t=[],r=1;r<arguments.length;r++)t.push(arguments[r]);var i=e==="error",o=this._events;if(o!==void 0)i=i&&o.error===void 0;else if(!i)return!1;if(i){var a;if(t.length>0&&(a=t[0]),a instanceof Error)throw a;var d=new Error("Unhandled error."+(a?" ("+a.message+")":""));throw d.context=a,d}var c=o[e];if(c===void 0)return!1;if(typeof c=="function")T(c,this,t);else for(var s=c.length,h=$(c,s),r=0;r<s;++r)T(h[r],this,t);return!0};function D(n,e,t,r){var i,o,a;if(E(t),o=n._events,o===void 0?(o=n._events=Object.create(null),n._eventsCount=0):(o.newListener!==void 0&&(n.emit("newListener",e,t.listener?t.listener:t),o=n._events),a=o[e]),a===void 0)a=o[e]=t,++n._eventsCount;else if(typeof a=="function"?a=o[e]=r?[t,a]:[a,t]:r?a.unshift(t):a.push(t),i=Y(n),i>0&&a.length>i&&!a.warned){a.warned=!0;var d=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");d.name="MaxListenersExceededWarning",d.emitter=n,d.type=e,d.count=a.length,se(d)}return n}l.prototype.addListener=function(e,t){return D(this,e,t,!1)};l.prototype.on=l.prototype.addListener;l.prototype.prependListener=function(e,t){return D(this,e,t,!0)};function de(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function F(n,e,t){var r={fired:!1,wrapFn:void 0,target:n,type:e,listener:t},i=de.bind(r);return i.listener=t,r.wrapFn=i,i}l.prototype.once=function(e,t){return E(t),this.on(e,F(this,e,t)),this};l.prototype.prependOnceListener=function(e,t){return E(t),this.prependListener(e,F(this,e,t)),this};l.prototype.removeListener=function(e,t){var r,i,o,a,d;if(E(t),i=this._events,i===void 0)return this;if(r=i[e],r===void 0)return this;if(r===t||r.listener===t)--this._eventsCount===0?this._events=Object.create(null):(delete i[e],i.removeListener&&this.emit("removeListener",e,r.listener||t));else if(typeof r!="function"){for(o=-1,a=r.length-1;a>=0;a--)if(r[a]===t||r[a].listener===t){d=r[a].listener,o=a;break}if(o<0)return this;o===0?r.shift():ce(r,o),r.length===1&&(i[e]=r[0]),i.removeListener!==void 0&&this.emit("removeListener",e,d||t)}return this};l.prototype.off=l.prototype.removeListener;l.prototype.removeAllListeners=function(e){var t,r,i;if(r=this._events,r===void 0)return this;if(r.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):r[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete r[e]),this;if(arguments.length===0){var o=Object.keys(r),a;for(i=0;i<o.length;++i)a=o[i],a!=="removeListener"&&this.removeAllListeners(a);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(t=r[e],typeof t=="function")this.removeListener(e,t);else if(t!==void 0)for(i=t.length-1;i>=0;i--)this.removeListener(e,t[i]);return this};function U(n,e,t){var r=n._events;if(r===void 0)return[];var i=r[e];return i===void 0?[]:typeof i=="function"?t?[i.listener||i]:[i]:t?le(i):$(i,i.length)}l.prototype.listeners=function(e){return U(this,e,!0)};l.prototype.rawListeners=function(e){return U(this,e,!1)};l.listenerCount=function(n,e){return typeof n.listenerCount=="function"?n.listenerCount(e):X.call(n,e)};l.prototype.listenerCount=X;function X(n){var e=this._events;if(e!==void 0){var t=e[n];if(typeof t=="function")return 1;if(t!==void 0)return t.length}return 0}l.prototype.eventNames=function(){return this._eventsCount>0?C(this._events):[]};function $(n,e){for(var t=new Array(e),r=0;r<e;++r)t[r]=n[r];return t}function ce(n,e){for(;e+1<n.length;e++)n[e]=n[e+1];n.pop()}function le(n){for(var e=new Array(n.length),t=0;t<e.length;++t)e[t]=n[t].listener||n[t];return e}function he(n,e){return new Promise(function(t,r){function i(a){n.removeListener(e,o),r(a)}function o(){typeof n.removeListener=="function"&&n.removeListener("error",i),t([].slice.call(arguments))}K(n,e,o,{once:!0}),e!=="error"&&ue(n,i,{once:!0})})}function ue(n,e,t){typeof n.on=="function"&&K(n,"error",e,t)}function K(n,e,t,r){if(typeof n.on=="function")r.once?n.once(e,t):n.on(e,t);else if(typeof n.addEventListener=="function")n.addEventListener(e,function i(o){r.once&&n.removeEventListener(e,i),t(o)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof n)}var ge=S.exports;const fe=J(ge);var L=function(){return L=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},L.apply(this,arguments)};function R(n,e,t,r){function i(o){return o instanceof t?o:new t(function(a){a(o)})}return new(t||(t=Promise))(function(o,a){function d(h){try{s(r.next(h))}catch(m){a(m)}}function c(h){try{s(r.throw(h))}catch(m){a(m)}}function s(h){h.done?o(h.value):i(h.value).then(d,c)}s((r=r.apply(n,[])).next())})}function I(n,e){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,a;return a={next:d(0),throw:d(1),return:d(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function d(s){return function(h){return c([s,h])}}function c(s){if(r)throw new TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(t=0)),t;)try{if(r=1,i&&(o=s[0]&2?i.return:s[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,s[1])).done)return o;switch(i=0,o&&(s=[s[0]&2,o.value]),s[0]){case 0:case 1:o=s;break;case 4:return t.label++,{value:s[1],done:!1};case 5:t.label++,i=s[1],s=[0];continue;case 7:s=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(s[0]===6||s[0]===2)){t=0;continue}if(s[0]===3&&(!o||s[1]>o[0]&&s[1]<o[3])){t.label=s[1];break}if(s[0]===6&&t.label<o[1]){t.label=o[1],o=s;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(s);break}o[2]&&t.ops.pop(),t.trys.pop();continue}s=e.call(n,t)}catch(h){s=[6,h],i=0}finally{r=o=0}if(s[0]&5)throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}}var pe=function(){function n(e){this.options=e,this._traceId=0,this._methods=new Map,this._emitter=new fe,this._handlerOnMessageByBound=this.handlerOnMessage.bind(this),this.createService(),this.getListener().addEventListener("message",this._handlerOnMessageByBound,!1)}return n.jsonParseData=function(e,t){try{return JSON.parse(e)}catch(r){return t}},n.jsonStringifyData=function(e){try{return JSON.stringify(e)}catch(t){return""}},n.runHandler=function(e){return R(this,void 0,void 0,function(){var t,r;return I(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,e()];case 1:return t=i.sent(),[2,{data:t,error:null}];case 2:return r=i.sent(),[2,{error:typeof r=="string"?r:r.message}];case 3:return[2]}})})},n.prototype.destroy=function(){this._emitter.removeAllListeners(),this._methods.clear(),this.getListener().removeEventListener("message",this._handlerOnMessageByBound,!1)},n.prototype.register=function(e,t){this._methods.set(e,t),this.log("Register ".concat(e),this._methods)},n.prototype.unregister=function(e){this._methods.delete(e),this.log("Unregister ".concat(e),this._methods)},n.prototype.trigger=function(e){for(var t=this,r=[],i=1;i<arguments.length;i++)r[i-1]=arguments[i];return new Promise(function(o){var a=t.createId();t.sendMessage({id:a,method:e,payload:r,type:"request"}),t.log("Trigger ".concat(e," | ").concat(a),r),t._emitter.once("response_".concat(a),function(d){o(d.payload),t.log("Receive ".concat(e," | ").concat(a),n.jsonStringifyData(d))})})},n.prototype.createId=function(){return"".concat(this.options.name,"_").concat(this._traceId++)},n.prototype.createService=function(){var e=this;this._emitter.on(this.options.topic,function(t){return R(e,void 0,void 0,function(){var r,i,o,a,d;return I(this,function(c){switch(c.label){case 0:return r=t.id,i=t.payload,o=t.method,a=this._methods.get(o),a?[4,n.runHandler(function(){return a.apply(void 0,i)})]:[3,2];case 1:return d=c.sent(),this.sendMessage({id:r,method:o,payload:d,type:"response"}),[3,3];case 2:this.sendMessage({id:r,method:o,payload:{error:"No found method in service"},type:"response"}),c.label=3;case 3:return[2]}})})})},n.prototype.sendMessage=function(e){var t=this.options,r=t.sender,i=t.origin,o=t.topic,a=n.jsonStringifyData(L(L({},e),{topic:o}));if(!r.postMessage)throw new Error("The sender no found postMessage method please check the sender option");a&&r.postMessage(a,i||"*")},n.prototype.handlerOnMessage=function(e){var t=e.data;if(t){var r=n.jsonParseData(t,null);if(!(!r||r.topic!==this.options.topic)){var i=r.id,o=r.type;o==="request"&&this._emitter.emit(this.options.topic,r),o==="response"&&this._emitter.emit("response_".concat(i),r)}}},n.prototype.getListener=function(){return this.options.listener||window},n.prototype.log=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];var i=this.options,o=i.debug,a=i.name;if(o){var d=new Date().toISOString(),c="[RPC] [".concat(d,"] [").concat(a,"] ").concat(e);console.groupCollapsed(c),t!=null&&t.length&&console.info.apply(console,t),console.groupEnd()}},Object.defineProperty(n.prototype,"methods",{get:function(){return this._methods},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"emitter",{get:function(){return this._emitter},enumerable:!1,configurable:!0}),n}();class me{constructor(){g(this,"appConfig",{});g(this,"touchpoint",null);g(this,"appProps",null);g(this,"context",{});g(this,"participantName","")}setAppConfig(e){var r;const t=(e==null?void 0:e.styles)||{};return this.appConfig={...this.appConfig,...e,styles:Object.keys(t).length?{...(r=this.appConfig)==null?void 0:r.styles,...t}:{}},this.appConfig}setTouchpoint(e){this.touchpoint=e}setParticipantName(e){this.participantName=e}setAppProps(e){this.appProps=e}getAllConfig(){return{appConfig:this.appConfig,touchpoint:this.touchpoint,context:this.context,appProps:this.appProps,participantName:this.participantName,injectorWindowHref:window.location.href,injectorWindowHostname:window.location.hostname}}setContextParam(e){this.context=e}clearAll(){this.appConfig={},this.touchpoint=null,this.context={},this.participantName=""}}const w=new me,ve='@keyframes loading{0%,5%{transform:translate(40px) scale(1);background:#e9e9e9}10%{transform:translate(40px) scale(1);background:var(--chat-theme-color, #1f1f1f)}40%{transform:translate(20px) scale(1.5);background:var(--chat-theme-color, #1f1f1f)}90%,95%{transform:translate(0) scale(1);background:var(--chat-theme-color, #1f1f1f)}to{transform:translate(0) scale(1);background:#e9e9e9}}@keyframes move-x{0%,10%{transform:translate(0)}90%,to{transform:translate(20px)}}@keyframes dot1-animate{0%{transform:matrix(1,0,0,1,285.389,355.211)}25%{transform:matrix(.9957,0,0,.9957,286.3071,355.4352)}50%{transform:matrix(.7195,0,0,.7195,331.1569,366.3884)}to{transform:matrix(.6882,0,0,.6882,350.5277,371.1191) scale(0)}}@keyframes dot2-animate{0%{transform:matrix(1,0,0,1,354.999,355.211)}25%{transform:matrix(.9957,0,0,.9957,354.999,355.4352)}50%{transform:matrix(.7195,0,0,.7195,354.999,366.3883)}to{transform:matrix(.6882,0,0,.6882,354.999,371.119) scale(0)}}@keyframes dot3-animate{0%{transform:matrix(1,0,0,1,424.611,355.211)}25%{transform:matrix(.9957,0,0,.9957,423.6929,355.4352)}50%{transform:matrix(.7195 0,0,.7195,378.8418,366.3884)}to{transform:matrix(.6882,0,0,.6882,359.474,371.1191) scale(0)}}@keyframes wave-animate{0%{transform:scale(0)}to{transform:scale(1)}}.tdw-widget-wrapper{--chat-z-index: 99999;position:fixed;z-index:var(--chat-z-index)}.tdw-widget-wrapper[data-preview]{position:sticky;display:flex;flex-direction:column;gap:24px;align-items:self-end}.tdw-widget{position:fixed;right:20px;bottom:var(--chat-position-bottom, 20px);z-index:var(--chat-z-index);width:var(--chat-container-width, 360px);min-width:360px;height:var(--chat-container-height, 680px);max-height:calc(var(--chat-screen-height) - var(--chat-position-bottom, 20px) - 20px);border:none;border-radius:20px;box-shadow:0 32px 20px rgba(0,0,0,.02),0 16px 16px rgba(0,0,0,.04),0 4px 8px rgba(0,0,0,.06),0 -4px 24px rgba(0,0,0,.08);overflow:hidden;transform-origin:right bottom;transition:height .2s,visibility 1s,opacity 83ms ease-out,transform .4s cubic-bezier(.25,.8,.25,1);will-change:width,height,visibility,opacity,transform}.tdw-widget[aria-hidden=true]{opacity:0;visibility:hidden;pointer-events:none;transform:scale(0)}.tdw-widget[aria-hidden=false]{opacity:1;visibility:visible;pointer-events:auto;transform:scale(1)}.tdw-widget[data-preview]{position:unset}.tdw-widget iframe{width:100%;height:100%;border:none;border-radius:inherit}@media only screen and (max-width: 600px),(max-height: 620px){.tdw-widget[data-responsive-layout=true]{top:0;right:0;bottom:0;left:0;overflow:hidden;width:var(--chat-screen-width, 100%);min-width:var(--chat-screen-width, 100%);max-width:var(--chat-screen-width, 100%);height:var(--chat-screen-height, 100%);min-height:var(--chat-screen-height, 100%);max-height:var(--chat-screen-height, 100%);border-radius:0}}.tdw-widget-trigger{--box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 8%), 0 16px 16px 0 rgba(0, 0, 0, 4%), 0 32px 20px 0 rgba(0, 0, 0, 2%);position:fixed;right:var(--trigger-button-position-right, 10px);bottom:var(--trigger-button-position-bottom, 20px);z-index:var(--chat-z-index);display:flex;justify-content:center;align-items:center;width:var(--trigger-button-width, 64px);height:var(--trigger-button-height, 64px);border:none;border-radius:50%;cursor:pointer;background-image:var(--chat-icon);background-size:56%;background-repeat:no-repeat;background-position:center;transition:background-color .1s ease-in-out;box-shadow:var(--chat-launcher-shadow, var(--box-shadow));background-color:var(--chat-launcher-color, #1f1f1f)}.tdw-widget-trigger:hover{background-color:var(--chat-hover-launcher-color, #383838)}.tdw-widget-trigger[data-has-chat-icon=yes] .tdw-widget-trigger-animate{display:none}.tdw-widget-trigger[data-has-chat-icon=no]:hover .tdw-widget-trigger-animate svg g[data-target=wave]{display:block;transform-origin:center 52%;animation:wave-animate 2s infinite;animation-direction:alternate;animation-delay:0s,1s}.tdw-widget-trigger[data-has-chat-icon=no]:hover .tdw-widget-trigger-animate svg g[data-target=dot1]{animation:dot1-animate 2s infinite;animation-direction:alternate;animation-delay:0s,4s}.tdw-widget-trigger[data-has-chat-icon=no]:hover .tdw-widget-trigger-animate svg g[data-target=dot2]{animation:dot2-animate 2s infinite;animation-direction:alternate;animation-delay:0s,4s}.tdw-widget-trigger[data-has-chat-icon=no]:hover .tdw-widget-trigger-animate svg g[data-target=dot3]{animation:dot3-animate 2s infinite;animation-direction:alternate;animation-delay:0s,4s}.tdw-widget-trigger[data-preview]{position:relative;right:unset;bottom:unset}.tdw-widget-trigger[data-has-chat-icon=no] .tdw-widget-trigger-animate svg>g>g:nth-child(2)>g>path,.tdw-widget-trigger[data-has-chat-icon=no]:hover .tdw-widget-trigger-animate svg>g>g:nth-child(2)>g>path{fill:#fff}.tdw-widget-trigger-animate{position:absolute;top:0;right:0;bottom:0;left:0;overflow:hidden;border-radius:50%;background-color:var(--chat-hover-launcher-color, #383838)}.tdw-widget-trigger-animate svg{position:relative;width:100%;height:100%;transform:translateZ(0);content-visibility:visible}.tdw-widget-trigger-animate svg g[data-target]{animation:none}.tdw-widget-trigger-animate svg g[data-target=wave]{display:none}.tdw-widget-trigger-animate svg g[data-target=circle]>g>g>path,.tdw-widget-trigger-animate svg g[data-target=dot1]>g>path,.tdw-widget-trigger-animate svg g[data-target=dot2]>g>path,.tdw-widget-trigger-animate svg g[data-target=dot3]>g>path,.tdw-widget-trigger-animate svg g[data-target=wave]>g>g>path{fill:var(--chat-launcher-color, #383838)}.tdw-widget-trigger-animate:hover svg g[data-target=circle]>g>g>path,.tdw-widget-trigger-animate:hover svg g[data-target=dot1]>g>path,.tdw-widget-trigger-animate:hover svg g[data-target=dot2]>g>path,.tdw-widget-trigger-animate:hover svg g[data-target=dot3]>g>path,.tdw-widget-trigger-animate:hover svg g[data-target=wave]>g>g>path{fill:var(--chat-hover-launcher-color, #383838)}.tdw-widget-trigger-badge{position:absolute;top:0;right:0;width:20px;height:20px;line-height:20px;text-align:center;color:#fff;background-color:#f5222d;font-size:10px;border-radius:50%;box-sizing:border-box;transition:right,width,border-radius .25s ease}.tdw-widget-trigger-badge-more{right:-4px;width:31px;border-radius:48px}.tdw-widget-loading{display:flex;flex-direction:column;width:100%;height:100%}.tdw-widget-header{height:64px;background-color:var(--chat-header-background-color, #f8f8f8);border-top-left-radius:8px;border-top-right-radius:8px}.tdw-widget-content{display:flex;flex-direction:column;justify-content:center;align-items:center;height:calc(100% - 56px);padding:16px;box-sizing:border-box}.tdw-loader{position:relative;width:100px;height:10px}.tdw-loader:before,.tdw-loader:after{content:"";position:absolute;top:0;left:0;width:10px;height:10px;margin-left:25%;border-radius:50%;box-shadow:20px 0 #e9e9e9;background:#e9e9e9;animation:move-x 1s linear infinite}.tdw-loader:after{box-shadow:none;transform:translate(40px) scale(1);z-index:2;animation:loading 1s linear infinite}',we=n=>{const e={chatIcon:n.chatIcon?"url(".concat(n.chatIcon,")"):void 0,chatThemeColor:n.chatThemeColor,chatHoverThemeColor:n.chatHoverThemeColor,triggerButtonWidth:n.triggerButtonWidth,triggerButtonHeight:n.triggerButtonHeight,triggerButtonPositionBottom:n.triggerButtonPositionBottom,triggerButtonPositionRight:n.triggerButtonPositionRight,chatPositionBottom:n.chatPositionBottom,chatContainerHeight:n.chatContainerHeight,chatContainerWidth:n.chatContainerWidth,chatLauncherColor:n.chatLauncherColor,chatHoverLauncherColor:n.chatHoverLauncherColor,chatLauncherShadow:n.chatLauncherShadow};return q(e,{removeEmptyString:!0})},ye="talkdesk-chat-widget-style";function be(n){var i,o,a,d,c,s,h,m,p,u,y,f,v,k,O,P;const e=n==null?void 0:n.config,t=e?oe(e,{}):n==null?void 0:n.widgetSettings,r={};return(o=(i=t==null?void 0:t.appearance)==null?void 0:i.theme)!=null&&o.brandColor&&(r.chatThemeColor=(a=t==null?void 0:t.appearance)==null?void 0:a.theme.brandColor,r.chatHoverThemeColor=(d=t==null?void 0:t.appearance)==null?void 0:d.theme.brandColor),(s=(c=t==null?void 0:t.appearance)==null?void 0:c.launcher)!=null&&s.color&&(r.chatLauncherColor=(m=(h=t==null?void 0:t.appearance)==null?void 0:h.launcher)==null?void 0:m.color,r.chatHoverLauncherColor=(u=(p=t==null?void 0:t.appearance)==null?void 0:p.launcher)==null?void 0:u.color),(f=(y=t==null?void 0:t.appearance)==null?void 0:y.launcher)!=null&&f.iconUrl&&(r.chatIcon=(k=(v=t==null?void 0:t.appearance)==null?void 0:v.launcher)==null?void 0:k.iconUrl),(P=(O=t==null?void 0:t.appearance)==null?void 0:O.launcher)!=null&&P.shadow&&(r.chatLauncherShadow=t.appearance.launcher.shadow),r}function xe(n={},e){return we({...be(e),...n})}function Ce(n){const e=[];return e.push(re(ve,ye,n)),()=>{e.forEach(t=>t()),e.length=0}}function Le(n,e={},t){const r=xe(e,t);if(Object.keys(r).length)return H(n,r)}function Ee(n,e){const t=()=>{H(n,{chatScreenWidth:window.innerWidth+"px",chatScreenHeight:window.innerHeight+"px"})},r=()=>{t()};return t(),window.addEventListener("resize",r),()=>{window.removeEventListener("resize",r)}}const B="tdw-widget-wrapper";function _e({root:n,isPreview:e=!1}){const t=document.createElement("div");return t.className=B,t.setAttribute("data-".concat(B),""),e&&t.setAttribute("data-preview",""),n.appendChild(t),{element:t,destroy:()=>{Q(n,t)&&n.removeChild(t),t.remove()}}}const Me='<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 710 710" width="710" height="710" preserveAspectRatio="xMidYMid meet"><g clip-path="url(#__lottie_element_51)" data-target="circle"><g transform="matrix(1,0,0,1,355,355)"><g opacity="1" transform="matrix(1,0,0,1,0,0)"><path fill="rgb(31,31,31)" fill-opacity="1" d=" M0,-355.0159912109375 C196.07000732421875,-355.0159912109375 355.0159912109375,-196.07000732421875 355.0159912109375,0 C355.0159912109375,196.07000732421875 196.07000732421875,355.0159912109375 0,355.0159912109375 C-196.07000732421875,355.0159912109375 -355.0159912109375,196.07000732421875 -355.0159912109375,0 C-355.0159912109375,-196.07000732421875 -196.07000732421875,-355.0159912109375 0,-355.0159912109375z"></path></g></g><g transform="matrix(1,0,0,1,354.9989929199219,384.5849914550781)"><g opacity="1" transform="matrix(1,0,0,1,0,0)"><path fill="rgb(255,255,255)" fill-opacity="1" d=" M-67.62200164794922,-135.24400329589844 C-67.62200164794922,-135.24400329589844 67.62200164794922,-135.24400329589844 67.62200164794922,-135.24400329589844 C123.64199829101562,-135.24400329589844 169.05499267578125,-89.83100128173828 169.05499267578125,-33.81100082397461 C169.05499267578125,22.20800018310547 123.64199829101562,67.62200164794922 67.62200164794922,67.62200164794922 C67.62200164794922,67.62200164794922 50.71699905395508,67.62200164794922 50.71699905395508,67.62200164794922 C50.71699905395508,67.62200164794922 -50.71699905395508,135.24400329589844 -50.71699905395508,135.24400329589844 C-50.71699905395508,135.24400329589844 -50.71699905395508,67.62200164794922 -50.71699905395508,67.62200164794922 C-50.71699905395508,67.62200164794922 -67.62200164794922,67.62200164794922 -67.62200164794922,67.62200164794922 C-123.64199829101562,67.62200164794922 -169.05499267578125,22.20800018310547 -169.05499267578125,-33.81100082397461 C-169.05499267578125,-89.83100128173828 -123.64199829101562,-135.24400329589844 -67.62200164794922,-135.24400329589844z"></path></g></g><g data-target="dot3" transform="matrix(1,0,0,1,424.6109924316406,355.21099853515625)"><g opacity="1" transform="matrix(1,0,0,1,0,0)"><path fill="rgb(30,30,30)" fill-opacity="1" d=" M0,-19.58300018310547 C-10.984000205993652,-19.58300018310547 -19.88800048828125,-10.815999984741211 -19.88800048828125,0 C-19.88800048828125,10.8149995803833 -10.984000205993652,19.58300018310547 0,19.58300018310547 C10.984000205993652,19.58300018310547 19.88800048828125,10.8149995803833 19.88800048828125,0 C19.88800048828125,-10.815999984741211 10.984000205993652,-19.58300018310547 0,-19.58300018310547z"></path></g></g><g data-target="dot1" transform="matrix(1,0,0,1,285.3890075683594,355.21099853515625)"><g opacity="1" transform="matrix(1,0,0,1,0,0)"><path fill="rgb(30,30,30)" fill-opacity="1" d=" M0,-19.58300018310547 C-10.984000205993652,-19.58300018310547 -19.888999938964844,-10.815999984741211 -19.888999938964844,0 C-19.888999938964844,10.8149995803833 -10.984000205993652,19.58300018310547 0,19.58300018310547 C10.984000205993652,19.58300018310547 19.888999938964844,10.8149995803833 19.888999938964844,0 C19.888999938964844,-10.815999984741211 10.984000205993652,-19.58300018310547 0,-19.58300018310547z"></path></g></g><g data-target="dot2" transform="matrix(1,0,0,1,354.9989929199219,355.21099853515625)"><g opacity="1" transform="matrix(1,0,0,1,0,0)"><path fill="rgb(30,30,30)" fill-opacity="1" d=" M-0.0010000000474974513,-19.58300018310547 C-10.984999656677246,-19.58300018310547 -19.888999938964844,-10.815999984741211 -19.888999938964844,0 C-19.888999938964844,10.8149995803833 -10.984999656677246,19.58300018310547 -0.0010000000474974513,19.58300018310547 C10.984000205993652,19.58300018310547 19.888999938964844,10.8149995803833 19.888999938964844,0 C19.888999938964844,-10.815999984741211 10.984000205993652,-19.58300018310547 -0.0010000000474974513,-19.58300018310547z"></path></g></g><g data-target="wave"><g transform="matrix(0.9995219707489014,-0.03091629408299923,0.03091629408299923,0.9995219707489014,356.4827575683594,355.05108642578125)" opacity="1"><g opacity="1" transform="matrix(1,0,0,1,0,0)"><path fill="rgb(31,31,31)" fill-opacity="1" d=" M73.96199798583984,-17.92799949645996 C73.96199798583984,-17.92799949645996 49.125999450683594,-29.759000778198242 49.125999450683594,-29.759000778198242 C40.44200134277344,-9.998000144958496 21.340900421142578,2.770447254180908 0.46700000762939453,2.7699999809265137 C-21.07493782043457,2.769519567489624 -40.41497039794922,-10.566868782043457 -48.804969787597656,-31.209869384765625 C-48.804969787597656,-31.209869384765625 -60.26470184326172,-26.16266632080078 -60.26519775390625,-26.1624755859375 C-60.265830993652344,-26.162199020385742 -73.96195220947266,-20.127910614013672 -73.96195220947266,-20.127910614013672 C-61.29095458984375,11.061088562011719 -32.06700134277344,31.209999084472656 0.46700000762939453,31.209999084472656 C31.999000549316406,31.209999084472656 60.83599853515625,11.920999526977539 73.96199798583984,-17.92799949645996z"></path></g></g></g></g></svg>';function Se(){const n=document.createElement("div");return n.className="tdw-widget-trigger-animate",n.innerHTML=Me,{destroy:()=>{n.remove()},get element(){return n}}}const j="talkdesk-chat-widget-trigger";function ke(n,e,t=!1){const r=Se(),i=document.createElement("button");i.id=j,i.className="tdw-widget-trigger",i.ariaLabel="Open chat widget",t&&i.setAttribute("data-preview","");let o=null,a=null;const d=()=>{a==null||a.destroy(),a=null},c=()=>{a||(a=new ae(i,{onClick:()=>{}}))},s=()=>{document.getElementById(j)||(n.appendChild(i),i.appendChild(r.element),i.onclick=()=>{})};return{open:()=>{s(),i.style.display=""},close:()=>{i.style.display="none"},update:({enablePointMoveTriggerButton:f,themes:v={}})=>{f&&c(),i.setAttribute("data-has-chat-icon",v!=null&&v["--chat-icon"]?"yes":"no")},destroy:()=>{d(),i.removeChild(r.element),r.destroy(),i.remove()},setBadge:f=>{f>0?(o||(o=document.createElement("span"),o.className="tdw-widget-trigger-badge ".concat(f>9?"tdw-widget-trigger-badge-more":""),o.ariaLabel="new message indicator",i.appendChild(o)),o.textContent=f>99?"99+":f.toString()):o&&(o.remove(),o=null)}}}function M(n){try{return!isNaN(+n)}catch(e){return!1}}function Oe(n){if(!n)return!1;try{const e=n.toString().split(".").map(o=>o.trim()).filter(Boolean);if(e.length!==3)return!1;const[t,r,i]=e;return M(t)&&M(r)&&M(i)}catch(e){return!1}}function Pe(n){const e=document.createElement("div");e.id=n,e.className="tdw-widget";const t=new Map;return{element:e,append:(s,h)=>{t.set(s,h),e.appendChild(h.element)},remove:s=>{const h=t.get(s);h&&(h.destroy(),t.delete(s))},show:()=>{e.setAttribute("aria-hidden","false")},hide:()=>{e.setAttribute("aria-hidden","true")},isMounted:()=>!!document.getElementById(n),destroy:()=>{e.remove(),t.forEach(s=>s.destroy()),t.clear()}}}function Ae(){const n=document.createElement("div");return n.className="tdw-widget-loading",n.id="tdw-widget-loading",n.ariaLabel="Loading",n.innerHTML=['<div class="tdw-widget-content">','<span class="tdw-loader"></span>',"</div>"].join(""),{element:n,destroy:()=>{n.remove()}}}function Te(n){const e=document.createElement("iframe");e.title="Chat Widget",e.allowFullscreen=!0,e.style.display="none";const t=()=>{e.style.display="block",n()};return e.addEventListener("load",t),{element:e,destroy:()=>{e.removeEventListener("load",t),e.remove()}}}const Ne="talkdesk-chat-widget",z="loading-element",Re="iframe-element",Ie=()=>{const{touchpoint:n,appProps:e}=w.getAllConfig(),t=e!=null&&e.proxyHost?"//".concat(e.proxyHost).concat(Z.tdChatSdk):"",r=(n==null?void 0:n.release_version)||"",i=Oe(r);return"".concat(t||"https://talkdeskchatsdk.svc.talkdeskstg.com","/v2/widget/").concat(i?r:"latest","/index.html?touchpointId=").concat(e==null?void 0:e.touchpointId)},Be=()=>"https://talkdeskchatsdk.svc.talkdeskstg.com/v2/widget/latest/preview.html";function je(n,e,t=!1){const r=Pe(Ne),i=Te(()=>{r.remove(z)});r.append(z,Ae()),r.hide(),t&&r.element.setAttribute("data-preview","");const o=()=>{r.isMounted()||(n.appendChild(r.element),i.element.src=t?Be():Ie(),r.append(Re,i),e&&i.element.contentWindow&&e(i.element.contentWindow))};return{initInBackground:()=>{o()},resize:({height:p})=>{p&&(r.element.style.height=typeof p=="string"?p:"".concat(p,"px"))},open:()=>{o(),r.show()},close:()=>{r.hide()},destroy:()=>{r.destroy()},update:({enableResponsiveLayout:p=!1}={})=>{p?r.element.setAttribute("data-responsive-layout","true"):r.element.removeAttribute("data-responsive-layout")}}}function ze(n){const e=document.getElementById(n);if(!e)throw new Error('The element not exist, element id = "#'.concat(n,'"'));const t=[];let r=null,i=!1,o=null,a=null;const d=_e({root:e,isPreview:!0}),c=ke(d.element,()=>{},!0),s=je(d.element,u=>{r=new pe({name:"SDK",sender:u,topic:x.Topic,debug:!1}),r.register(x.Methods.GetAllConfig,()=>w.getAllConfig()),r.register(x.Methods.PreviewReady,()=>{i=!0,r==null||r.trigger(x.Methods.UpdatePreviewConfig,o)})},!0);return{init:(u={})=>{w.setAppConfig(u),t.push(Ce(d.element)),a||(a=Ee(d.element)),s.open(),c.open()},destroy:()=>{c.destroy(),s.destroy(),d.destroy(),t.forEach(u=>u()),t.length=0,o=null,w.clearAll(),a==null||a(),a=null},updateConfig:u=>{var f,v;w.setTouchpoint({active:!0,config:ie(u==null?void 0:u.widgetSettings),account_id:""}),w.setParticipantName(u.userName||"");const y=Le(d.element,(v=(f=w.getAllConfig())==null?void 0:f.appConfig)==null?void 0:v.styles,u);c.update({themes:y}),i?r==null||r.trigger(x.Methods.UpdatePreviewConfig,u):o=u}}}function Ye(n){return ze(n)}export{Ye as default};
//# sourceMappingURL=entryPreview-DjNpcpxO.js.map
